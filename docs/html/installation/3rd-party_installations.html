<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Populse_mia’s third-party softwares installations &#8212; populse_mia 2.4.1-dev+8e6ba826 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=f63d8bfa" />
    <link rel="stylesheet" type="text/css" href="../_static/haiku.css?v=e491ac2d" />
    <script src="../_static/documentation_options.js?v=15f9fecf"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../index.html">
          <span>populse_mia 2.4.1-dev+8e6ba826 documentation</span></a></h1>
        <h2 class="heading"><span>Populse_mia’s third-party softwares installations</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>
      <div class="content" role="main">
        
        
  <table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference external" href="../index.html">Home</a></p></td>
<td><p><a class="reference external" href="../documentation/documentation.html">Documentation</a></p></td>
<td><p><a class="reference external" href="./installation.html">Installation</a></p></td>
<td><p><a class="reference external" href="https://github.com/populse/populse_mia">GitHub</a></p></td>
</tr>
</tbody>
</table>
<section id="populse-mia-s-third-party-softwares-installations">
<h1>Populse_mia’s third-party softwares installations<a class="headerlink" href="#populse-mia-s-third-party-softwares-installations" title="Link to this heading">¶</a></h1>
<p>To use bricks and pipelines from <a class="reference external" href="https://populse.github.io/mia_processes/html/index.html">mia_processes</a> in populse_mia, it is necessary to install softwares as FSL, SPM, Freesurfer, ANTs…
The softwares paths should be configure in Mia preferences.</p>
</section>
<section id="installation-on-linux">
<h1>Installation on Linux<a class="headerlink" href="#installation-on-linux" title="Link to this heading">¶</a></h1>
<blockquote>
<div><ul class="simple">
<li><p>These installation notes are based on Ubuntu 22.04.02 (and Fedora 37) which use Python3 as default (when <code class="docutils literal notranslate"><span class="pre">python</span></code> is typed into a command line).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">path/to/softs</span></code> is the destination folder where the softwares will be installed, i.e.: <code class="docutils literal notranslate"><span class="pre">/opt</span></code>, <code class="docutils literal notranslate"><span class="pre">/home/APPS</span></code> or other.</p></li>
<li><p>If populse_mia is installed in a container using <a class="reference external" href="./virtualisation_user_installation.html">brainvisa Singulary image</a>, it is generally not necessary to be in the container to install third-party software (in fact, this will depend on the operating system in the container and the host).</p></li>
</ul>
</div></blockquote>
<section id="installation-of-fsl-v6-0-6-4">
<h2>Installation of <a class="reference external" href="https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/">FSL v6.0.6.4</a><a class="headerlink" href="#installation-of-fsl-v6-0-6-4" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><p>Download <a class="reference external" href="https://fsl.fmrib.ox.ac.uk/fsldownloads_registration/">fslinstaller.py</a> (with Fedora 37, choose Linux - Centos 8) then launch the installer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">fslinstaller</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</li>
<li><p>The installer will ask where to install FSL. Keep the default location or specify a folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FSL</span> <span class="n">installation</span> <span class="n">directory</span> <span class="p">[</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">username</span><span class="o">/</span><span class="n">fsl</span><span class="p">]:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">softs</span><span class="o">/</span><span class="n">fsl</span><span class="o">-</span><span class="mf">6.0.6.4</span><span class="o">/</span>
</pre></div>
</div>
</li>
<li><p>populse_mia do not need environment variables, however to test FSL outside populse_mia, the following lines must be included in the user’s <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file (it seems that some versions of the installer automatically add the FSL configuration to ~/.bash_profile):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>FSLDIR=/pathto/softs/FSL/6.04
PATH=${FSLDIR}/bin:${PATH}
export FSLDIR PATH
. ${FSLDIR}/etc/fslconf/fsl.sh
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">fsl.sh</span></code> defines other environment variables for FSL like <code class="docutils literal notranslate"><span class="pre">FSLOUTPUTTYPE=NIFTI-GZ</span></code></p>
</li>
<li><p>Test FSL on a new terminal (it may be necessary to open a new shell or restart a session (logout / login):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flirt</span> <span class="o">-</span><span class="n">version</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</section>
<section id="installation-of-spm-12-standalone-and-matlab-runtime">
<h2>Installation of <a class="reference external" href="https://www.fil.ion.ucl.ac.uk/spm/software/spm12/">SPM 12</a> Standalone and Matlab Runtime<a class="headerlink" href="#installation-of-spm-12-standalone-and-matlab-runtime" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><p><a class="reference external" href="https://www.fil.ion.ucl.ac.uk/spm/download/restricted/bids/">Download</a> the desired version of standalone SPM 12.</p>
<p>Unzip it. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">Downloads</span><span class="o">/</span>
<span class="n">unzip</span> <span class="n">spm12_r7771_Linux_R2019b</span><span class="o">.</span><span class="n">zip</span> <span class="o">-</span><span class="n">d</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">soft</span><span class="o">/</span><span class="n">spmStandalone</span>
</pre></div>
</div>
</li>
<li><p>Download and install the corresponding R20xxa/b Matlab Runtime installation for linux <a class="reference external" href="https://uk.mathworks.com/products/compiler/matlab-runtime.html">here</a>.</p>
<ul>
<li><p>Unzip it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">Downloads</span>
<span class="n">unzip</span> <span class="n">MATLAB_Runtime_R2019b_Update_9_glnxa64</span><span class="o">.</span><span class="n">zip</span>
</pre></div>
</div>
</li>
<li><p>And then install it (sudo is only required to install in a directory without write access):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">MATLAB_Runtime_R2019b_Update_3_glnxa64</span>
<span class="n">sudo</span> <span class="o">./</span><span class="n">install</span>
</pre></div>
</div>
</li>
<li><p>After the installation, the following message is observed (ex. for R2019b (9.7) Matlab Runtime):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">On</span> <span class="n">the</span> <span class="n">target</span> <span class="n">computer</span><span class="p">,</span> <span class="n">append</span> <span class="n">the</span> <span class="n">following</span> <span class="n">to</span> <span class="n">your</span> <span class="n">LD_LIBRARY_PATH</span> <span class="n">environment</span> <span class="n">variable</span><span class="p">:</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">MATLAB</span><span class="o">/</span><span class="n">MATLAB_Runtime</span><span class="o">/</span><span class="n">v97</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">glnxa64</span><span class="p">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">MATLAB</span><span class="o">/</span><span class="n">MATLAB_Runtime</span><span class="o">/</span><span class="n">v97</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">glnxa64</span><span class="p">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">MATLAB</span><span class="o">/</span><span class="n">MATLAB_Runtime</span><span class="o">/</span><span class="n">v97</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">os</span><span class="o">/</span><span class="n">glnxa64</span><span class="p">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">MATLAB</span><span class="o">/</span><span class="n">MATLAB_Runtime</span><span class="o">/</span><span class="n">v97</span><span class="o">/</span><span class="n">extern</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">glnxa64</span>
<span class="n">If</span> <span class="n">MATLAB</span> <span class="n">Runtime</span> <span class="ow">is</span> <span class="n">to</span> <span class="n">be</span> <span class="n">used</span> <span class="k">with</span> <span class="n">MATLAB</span> <span class="n">Production</span> <span class="n">Server</span><span class="p">,</span> <span class="n">you</span> <span class="n">do</span> <span class="ow">not</span> <span class="n">need</span> <span class="n">to</span> <span class="n">modify</span> <span class="n">the</span> <span class="n">above</span> <span class="n">environment</span> <span class="n">variable</span><span class="o">.</span>
</pre></div>
</div>
<p>Click on <code class="docutils literal notranslate"><span class="pre">next</span></code> in order to finish the installation.</p>
</li>
<li><p>Then if necessary (optional), create a .conf file in the /etc/ld.so.conf.d/ folder and add those previous paths in the file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">nano</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ld</span><span class="o">.</span><span class="n">so</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">your_lib</span><span class="o">.</span><span class="n">conf</span>
<span class="c1"># Matlab 2019b Runtine Library</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">MATLAB</span><span class="o">/</span><span class="n">MATLAB_Runtime</span><span class="o">/</span><span class="n">v97</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">glnxa64</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">MATLAB</span><span class="o">/</span><span class="n">MATLAB_Runtime</span><span class="o">/</span><span class="n">v97</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">glnxa64</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">MATLAB</span><span class="o">/</span><span class="n">MATLAB_Runtime</span><span class="o">/</span><span class="n">v97</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">os</span><span class="o">/</span><span class="n">glnxa64</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">MATLAB</span><span class="o">/</span><span class="n">MATLAB_Runtime</span><span class="o">/</span><span class="n">v97</span><span class="o">/</span><span class="n">extern</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">glnxa64</span>
</pre></div>
</div>
</li>
<li><p>Run ldconfig to update the cache (optional):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">ldconfig</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Check installation by exectuting SPM12, the second path being the path to the Matlab Runtime:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">spm_standalone</span><span class="o">/</span><span class="n">spm12</span><span class="o">/</span><span class="n">run_spm12</span><span class="o">.</span><span class="n">sh</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">MATLAB_Runtime</span><span class="o">/</span><span class="n">v97</span>
</pre></div>
</div>
</li>
<li><p>Check this <a class="reference external" href="https://en.wikibooks.org/wiki/SPM/Standalone">manual</a> in case of problems during installation.</p></li>
</ul>
</div></blockquote>
</section>
<section id="installation-of-afni">
<h2>Installation of <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/htmldoc/index.html">AFNI</a><a class="headerlink" href="#installation-of-afni" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>For Ubuntu, follow the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/htmldoc/background_install/install_instructs/steps_linux_ubuntu20.html#quick-setup">quick setup</a> of the AFNI’s team. For Fedora 37, select the <code class="docutils literal notranslate"><span class="pre">Linux,</span> <span class="pre">Fedora</span></code> chapter in the table of contents on the left.</p></li>
<li><p>By default, all data will be installed in $HOME. $HOME/abin can then be moved to a directory dedicated to AFNI (e.g. /data/softs/AFNI). The rest of the data installed in $HOME can be deleted if AFNI is to be used only in Mia.</p></li>
</ul>
</div></blockquote>
</section>
<section id="installation-of-ants">
<h2>Installation of <a class="reference external" href="http://stnava.github.io/ANTs/">ANTs</a><a class="headerlink" href="#installation-of-ants" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>We strongly recommend installing ANTS via release binaries, available for macos and linux (ubuntu, centos - fedora) from ANTs 2.4.1, and Windows from 2.4.4. For this, <a class="reference external" href="https://github.com/ANTsX/ANTs/releases">download pre-built releases</a> (select the desired file in the <code class="docutils literal notranslate"><span class="pre">Assets</span></code> section, e.g. ants-2.4.1-centos7-X64-gcc.zip) then unzip it. <a class="reference external" href="https://github.com/ANTsX/ANTs/wiki/Installing-ANTs-release-binaries">Some notes</a> on this subject are available.</p></li>
<li><p>ANTs since 2.4.4 is also available <a class="reference external" href="https://anaconda.org/aramislab/ants">via Conda</a>.</p></li>
<li><p>The final solution for installing ANTs is to build it from source (e.g. for release &lt; 2.4.1 <a class="reference external" href="https://github.com/ANTsX/ANTs/wiki/Compiling-ANTs-on-Linux-and-Mac-OS">for linux and macos</a> and release &lt; 2.4.4 <a class="reference external" href="https://github.com/ANTsX/ANTs/wiki/Compiling-ANTs-on-Windows-10">for windows</a>).</p></li>
<li><p>Please note that to use the mriqc pipeline on Mia, version <code class="docutils literal notranslate"><span class="pre">v2.3.4</span></code> is recommended.</p></li>
<li><p>Mia doesn’t need environment variables, but to test ANTs outside Mia, ANTs path have to be added to the ~/.bashrc file.</p></li>
</ul>
</div></blockquote>
</section>
<section id="installation-of-freesurfer">
<h2>Installation of <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/">freesurfer</a><a class="headerlink" href="#installation-of-freesurfer" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>Follow the installation instruction <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki//FS7_linux">here</a>. For Ubuntu systeme it is easier to use the tar archive. For Fedora, centos8 tar archive works fine</p></li>
<li><p>Get the freesurfer License <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/registration.html">here</a>. Copy the license received in the freesurfer folder.</p></li>
<li><p>populse_mia do not need environment variables, however if you want to testfFreesurfer outside populse_mia you need to add freesurfer path in your .bashr.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="installation-on-macos">
<h1>Installation on Macos<a class="headerlink" href="#installation-on-macos" title="Link to this heading">¶</a></h1>
<section id="id4">
<h2>Installation of <a class="reference external" href="https://www.fil.ion.ucl.ac.uk/spm/software/spm12/">SPM 12</a> Standalone and Matlab Runtime<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><p>Download the spm12_r7532_BI_macOS_R2018b.zip <a class="reference external" href="https://www.fil.ion.ucl.ac.uk/spm/download/restricted/utopia/">file</a>. Unzip it. In the same directory where run_spm12.sh can be found unzip spm12_maci64.zip</p></li>
<li><p>Download the corresponding MCR for MATLAB Compiler Runtime (MCR) MCR_R2018b_maci64_installer.dmg.zip <a class="reference external" href="https://fr.mathworks.com/products/compiler/matlab-runtime.html">file</a></p></li>
<li><dl class="simple">
<dt>Start the MATLAB Runtime installer:</dt><dd><ul class="simple">
<li><p>double click in MCRInstaller.dmg</p></li>
<li><p>then right click on MCRInstaller.pkg</p></li>
<li><p>then choose Open with &gt; Installer (default).
The MATLAB Runtime installer starts, it displays a dialog box.
Read the information and then click <code class="docutils literal notranslate"><span class="pre">Next</span></code> (or <code class="docutils literal notranslate"><span class="pre">continue</span></code>) to proceed with the installation.</p></li>
<li><p>Then click Install.
The default MATLAB Runtime installation directory is now in <code class="docutils literal notranslate"><span class="pre">/Applications/MATLAB/MATLAB_Compiler_Runtime/vXX</span></code>.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Usage: Go where run_spm12.sh file can be found, then just type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">run_spm12</span><span class="o">.</span><span class="n">sh</span> <span class="o">/</span><span class="n">Applications</span><span class="o">/</span><span class="n">MATLAB</span><span class="o">/</span><span class="n">MATLAB_Compiler_Runtime</span><span class="o">/</span><span class="n">vXX</span><span class="o">/</span>
</pre></div>
</div>
</li>
<li><p>If No Java runtime is already installed, a pop-up is opened with a <code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">Java</span> <span class="pre">runtime</span> <span class="pre">present,</span> <span class="pre">requesting</span> <span class="pre">install</span></code> message.</p>
<blockquote>
<div><ul class="simple">
<li><p>Download <a class="reference external" href="https://support.apple.com/kb/DL1572?locale=en_US">Java for OS X 2017-001</a>.</p></li>
<li><p>Click on <code class="docutils literal notranslate"><span class="pre">Download</span></code> then Open with &gt; DiskImageMounter (default) &gt; Ok.</p></li>
<li><p>Right click on the JavaForOSX.pkg then choose Open with Installer (default).</p></li>
<li><p>The Java for OS X 2017-001 installer starts, it displays a dialog box. Answer the questions then install.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Tested on macOS 10.13.6:</p>
<ul class="simple">
<li><p>The spm12_r7771.zip <a class="reference external" href="https://www.fil.ion.ucl.ac.uk/spm/download/restricted/utopia/">file</a> and MCR v4.13 (MATLAB R2010a) MCRInstaller.dmg <a class="reference external" href="https://www.fil.ion.ucl.ac.uk/spm/download/restricted/utopia/MCR/maci64/">file</a> are not compatible with mia (while <cite>./run_spm12.sh /Applications/MATLAB/MATLAB_Compiler_Runtime/v713/ fmri</cite> works fine in a terminal). Using this version of spm standalone, the following message is observed in MIA: <cite>/Volumes/Users/econdami/Documents/spm/spm12Standalone/spm12Stndalone_r7771/run_spm12. sh: line 60: ./spm12.app/Contents/MacOS/spm12_maci64: No such file or directory</cite>.</p></li>
</ul>
</li>
</ul>
</div></blockquote>
</section>
<section id="installation-of-others-software">
<h2>Installation of others software<a class="headerlink" href="#installation-of-others-software" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p>Please follow the instruction in the documentation of each third-party software.</p>
</div></blockquote>
</section>
</section>
<section id="installation-on-windows">
<h1>Installation on Windows<a class="headerlink" href="#installation-on-windows" title="Link to this heading">¶</a></h1>
<blockquote>
<div><p>Please follow the instruction in the documentation of each third-party software.</p>
</div></blockquote>
</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2022, populse.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>