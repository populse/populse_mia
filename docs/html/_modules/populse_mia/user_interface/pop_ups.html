
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>populse_mia.user_interface.pop_ups &#8212; populse_mia 2.4.1-dev+28702685 documentation</title>
    <link rel="stylesheet" href="../../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script >mermaid.initialize({startOnLoad:true});</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../../index.html">
          <span>populse_mia 2.4.1-dev+28702685 documentation</span></a></h1>
        <h2 class="heading"><span>populse_mia.user_interface.pop_ups</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        <a class="uplink" href="../../../index.html">Contents</a>
        </p>

      </div>
      <div class="content" role="main">
        
        
  <h1>Source code for populse_mia.user_interface.pop_ups</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot; Module that defines all the pop-ups used across the software</span>

<span class="sd">:Contains:</span>
<span class="sd">    :Class:</span>
<span class="sd">        - ClickableLabel</span>
<span class="sd">        - DefaultValueListCreation</span>
<span class="sd">        - DefaultValueQLineEdit</span>
<span class="sd">        - PopUpAddPath</span>
<span class="sd">        - PopUpAddTag</span>
<span class="sd">        - PopUpCloneTag</span>
<span class="sd">        - PopUpClosePipeline</span>
<span class="sd">        - PopUpDataBrowserCurrentSelection</span>
<span class="sd">        - PopUpDeletedProject</span>
<span class="sd">        - PopUpDeleteProject</span>
<span class="sd">        - PopUpFilterSelection</span>
<span class="sd">        - PopUpInformation</span>
<span class="sd">        - PopUpInheritanceDict</span>
<span class="sd">        - PopUpMultipleSort</span>
<span class="sd">        - PopUpNewProject</span>
<span class="sd">        - PopUpOpenProject</span>
<span class="sd">        - PopUpPreferences</span>
<span class="sd">        - PopUpProperties</span>
<span class="sd">        - PopUpQuit</span>
<span class="sd">        - PopUpRemoveScan</span>
<span class="sd">        - PopUpRemoveTag</span>
<span class="sd">        - PopUpSaveProjectAs</span>
<span class="sd">        - PopUpSeeAllProjects</span>
<span class="sd">        - PopUpSelectFilter</span>
<span class="sd">        - PopUpSelectIteration</span>
<span class="sd">        - PopUpTagSelection  (must precede PopUpSelectTag)</span>
<span class="sd">        - PopUpSelectTag</span>
<span class="sd">        - PopUpSelectTagCountTable</span>
<span class="sd">        - PopUpShowHistory</span>
<span class="sd">        - PopUpVisualizedTags</span>
<span class="sd">        - QLabel_clickable</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="c1">##########################################################################</span>
<span class="c1"># Populse_mia - Copyright (C) IRMaGe/CEA, 2018</span>
<span class="c1"># Distributed under the terms of the CeCILL license, as published by</span>
<span class="c1"># the CEA-CNRS-INRIA. Refer to the LICENSE file or to</span>
<span class="c1"># http://www.cecill.info/licences/Licence_CeCILL_V2.1-en.html</span>
<span class="c1"># for details.</span>
<span class="c1">##########################################################################</span>

<span class="kn">import</span> <span class="nn">ast</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="kn">import</span> <span class="nn">yaml</span>

<span class="c1"># Capsul imports</span>
<span class="kn">from</span> <span class="nn">capsul.api</span> <span class="kn">import</span> <span class="n">capsul_engine</span>
<span class="kn">from</span> <span class="nn">capsul.pipeline.pipeline_nodes</span> <span class="kn">import</span> <span class="n">PipelineNode</span>
<span class="kn">from</span> <span class="nn">capsul.qt_gui.widgets.pipeline_developer_view</span> <span class="kn">import</span> <span class="n">PipelineDeveloperView</span>
<span class="kn">from</span> <span class="nn">capsul.qt_gui.widgets.settings_editor</span> <span class="kn">import</span> <span class="n">SettingsEditor</span>

<span class="c1"># Populse_db imports</span>
<span class="kn">from</span> <span class="nn">populse_db.database</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">FIELD_TYPE_BOOLEAN</span><span class="p">,</span>
    <span class="n">FIELD_TYPE_DATE</span><span class="p">,</span>
    <span class="n">FIELD_TYPE_DATETIME</span><span class="p">,</span>
    <span class="n">FIELD_TYPE_FLOAT</span><span class="p">,</span>
    <span class="n">FIELD_TYPE_INTEGER</span><span class="p">,</span>
    <span class="n">FIELD_TYPE_LIST_BOOLEAN</span><span class="p">,</span>
    <span class="n">FIELD_TYPE_LIST_DATE</span><span class="p">,</span>
    <span class="n">FIELD_TYPE_LIST_DATETIME</span><span class="p">,</span>
    <span class="n">FIELD_TYPE_LIST_FLOAT</span><span class="p">,</span>
    <span class="n">FIELD_TYPE_LIST_INTEGER</span><span class="p">,</span>
    <span class="n">FIELD_TYPE_LIST_STRING</span><span class="p">,</span>
    <span class="n">FIELD_TYPE_LIST_TIME</span><span class="p">,</span>
    <span class="n">FIELD_TYPE_STRING</span><span class="p">,</span>
    <span class="n">FIELD_TYPE_TIME</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># PyQt5 imports</span>
<span class="kn">from</span> <span class="nn">PyQt5</span> <span class="kn">import</span> <span class="n">Qt</span><span class="p">,</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtGui</span><span class="p">,</span> <span class="n">QtWidgets</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QCoreApplication</span><span class="p">,</span> <span class="n">pyqtSignal</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span><span class="p">,</span> <span class="n">QPixmap</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">QApplication</span><span class="p">,</span>
    <span class="n">QCheckBox</span><span class="p">,</span>
    <span class="n">QComboBox</span><span class="p">,</span>
    <span class="n">QDialog</span><span class="p">,</span>
    <span class="n">QDialogButtonBox</span><span class="p">,</span>
    <span class="n">QFileDialog</span><span class="p">,</span>
    <span class="n">QFormLayout</span><span class="p">,</span>
    <span class="n">QHBoxLayout</span><span class="p">,</span>
    <span class="n">QHeaderView</span><span class="p">,</span>
    <span class="n">QInputDialog</span><span class="p">,</span>
    <span class="n">QLabel</span><span class="p">,</span>
    <span class="n">QLineEdit</span><span class="p">,</span>
    <span class="n">QMessageBox</span><span class="p">,</span>
    <span class="n">QPlainTextEdit</span><span class="p">,</span>
    <span class="n">QPushButton</span><span class="p">,</span>
    <span class="n">QRadioButton</span><span class="p">,</span>
    <span class="n">QScrollArea</span><span class="p">,</span>
    <span class="n">QSplitter</span><span class="p">,</span>
    <span class="n">QTableWidget</span><span class="p">,</span>
    <span class="n">QTableWidgetItem</span><span class="p">,</span>
    <span class="n">QTreeWidget</span><span class="p">,</span>
    <span class="n">QTreeWidgetItem</span><span class="p">,</span>
    <span class="n">QVBoxLayout</span><span class="p">,</span>
    <span class="n">QWidget</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Populse_mia imports</span>
<span class="kn">from</span> <span class="nn">populse_mia.data_manager.database_mia</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">TAG_ORIGIN_USER</span><span class="p">,</span>
    <span class="n">TAG_UNIT_DEGREE</span><span class="p">,</span>
    <span class="n">TAG_UNIT_HZPIXEL</span><span class="p">,</span>
    <span class="n">TAG_UNIT_MHZ</span><span class="p">,</span>
    <span class="n">TAG_UNIT_MM</span><span class="p">,</span>
    <span class="n">TAG_UNIT_MS</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">populse_mia.data_manager.project</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BRICK_EXEC</span><span class="p">,</span>
    <span class="n">BRICK_EXEC_TIME</span><span class="p">,</span>
    <span class="n">BRICK_INIT</span><span class="p">,</span>
    <span class="n">BRICK_INIT_TIME</span><span class="p">,</span>
    <span class="n">BRICK_INPUTS</span><span class="p">,</span>
    <span class="n">BRICK_NAME</span><span class="p">,</span>
    <span class="n">BRICK_OUTPUTS</span><span class="p">,</span>
    <span class="n">COLLECTION_BRICK</span><span class="p">,</span>
    <span class="n">COLLECTION_CURRENT</span><span class="p">,</span>
    <span class="n">COLLECTION_HISTORY</span><span class="p">,</span>
    <span class="n">COLLECTION_INITIAL</span><span class="p">,</span>
    <span class="n">HISTORY_BRICKS</span><span class="p">,</span>
    <span class="n">HISTORY_PIPELINE</span><span class="p">,</span>
    <span class="n">TAG_CHECKSUM</span><span class="p">,</span>
    <span class="n">TAG_FILENAME</span><span class="p">,</span>
    <span class="n">TAG_HISTORY</span><span class="p">,</span>
    <span class="n">TAG_TYPE</span><span class="p">,</span>
    <span class="n">TYPE_MAT</span><span class="p">,</span>
    <span class="n">TYPE_NII</span><span class="p">,</span>
    <span class="n">TYPE_TXT</span><span class="p">,</span>
    <span class="n">TYPE_UNKNOWN</span><span class="p">,</span>
    <span class="n">Project</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">populse_mia.software_properties</span> <span class="kn">import</span> <span class="n">Config</span><span class="p">,</span> <span class="n">verCmp</span>
<span class="kn">from</span> <span class="nn">populse_mia.user_interface.data_browser</span> <span class="kn">import</span> <span class="n">data_browser</span>
<span class="kn">from</span> <span class="nn">populse_mia.utils</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="kn">from</span> <span class="nn">populse_mia.utils.utils</span> <span class="kn">import</span> <span class="n">check_value_type</span>


<div class="viewcode-block" id="ClickableLabel"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.ClickableLabel">[docs]</a><span class="k">class</span> <span class="nc">ClickableLabel</span><span class="p">(</span><span class="n">QLabel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    QLabel with a clicked signal</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - mousePressEvent: overrides the mousePressEvent method by emitting</span>
<span class="sd">          the clicked signal</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Signal that will be emitted when the widget is clicked</span>
    <span class="n">clicked</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>

<div class="viewcode-block" id="ClickableLabel.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.ClickableLabel.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span></div>

<div class="viewcode-block" id="ClickableLabel.mousePressEvent"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.ClickableLabel.mousePressEvent">[docs]</a>    <span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overrides the mousePressEvent method by emitting the clicked signal</span>

<span class="sd">        :param event: clicked event</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="DefaultValueListCreation"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.DefaultValueListCreation">[docs]</a><span class="k">class</span> <span class="nc">DefaultValueListCreation</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Widget that is called when to create a list&#39;s default value.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - add_element: one more element added to the list</span>
<span class="sd">        - default_init_table: default init table when no previous value</span>
<span class="sd">        - remove_element: removes the last element of the list</span>
<span class="sd">        - resize_table: to resize the pop up depending on the table</span>
<span class="sd">        - update_default_value: checks if the values are correct and updates</span>
<span class="sd">           the parent value</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="DefaultValueListCreation.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.DefaultValueListCreation.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param parent: the DefaultValueQLineEdit parent object</span>
<span class="sd">        :param type: type of the list (e.g. list of int, list of float, etc.)</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setModal</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Current type chosen</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">type</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Adding a &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; of &quot;</span><span class="p">))</span>

        <span class="c1"># The table that will be filled</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTableWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">list_value</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">list_value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="c1"># If the previous value was already a list, we fill it</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">list_value</span><span class="p">))</span>

                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()):</span>
                        <span class="n">item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">()</span>
                        <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">list_value</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">default_init_table</span><span class="p">()</span>

            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">default_init_table</span><span class="p">()</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_init_table</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">resize_table</span><span class="p">()</span>

        <span class="c1"># Ok button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ok_button</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Ok&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ok_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_default_value</span><span class="p">)</span>

        <span class="c1"># Cancel button</span>
        <span class="n">cancel_button</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">)</span>
        <span class="n">cancel_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>

        <span class="c1"># Button to add an element to the list</span>
        <span class="n">sources_images_dir</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span><span class="o">.</span><span class="n">getSourceImageDir</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_element_label</span> <span class="o">=</span> <span class="n">ClickableLabel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_element_label</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;plus&quot;</span><span class="p">)</span>
        <span class="n">add_element_picture</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sources_images_dir</span><span class="p">,</span> <span class="s2">&quot;green_plus.png&quot;</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="n">add_element_picture</span> <span class="o">=</span> <span class="n">add_element_picture</span><span class="o">.</span><span class="n">scaledToHeight</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_element_label</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">add_element_picture</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_element_label</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_element</span><span class="p">)</span>

        <span class="c1"># Button to remove the last element of the list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_element_label</span> <span class="o">=</span> <span class="n">ClickableLabel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_element_label</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;minus&quot;</span><span class="p">)</span>
        <span class="n">remove_element_picture</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sources_images_dir</span><span class="p">,</span> <span class="s2">&quot;red_minus.png&quot;</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="n">remove_element_picture</span> <span class="o">=</span> <span class="n">remove_element_picture</span><span class="o">.</span><span class="n">scaledToHeight</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_element_label</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">remove_element_picture</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_element_label</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_element</span><span class="p">)</span>

        <span class="c1"># Layouts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">v_box_final</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_final</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_final</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ok_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_final</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">cancel_button</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">list_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_element_label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_element_label</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">v_box_final</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">v_box_final</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">h_box_final</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">v_box_final</span><span class="p">)</span></div>

<div class="viewcode-block" id="DefaultValueListCreation.add_element"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.DefaultValueListCreation.add_element">[docs]</a>    <span class="k">def</span> <span class="nf">add_element</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;One more element added to the list.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resize_table</span><span class="p">()</span></div>

<div class="viewcode-block" id="DefaultValueListCreation.default_init_table"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.DefaultValueListCreation.default_init_table">[docs]</a>    <span class="k">def</span> <span class="nf">default_init_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Default init table when no previous value</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Table filled with a single element at the beginning if no value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span></div>

<div class="viewcode-block" id="DefaultValueListCreation.remove_element"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.DefaultValueListCreation.remove_element">[docs]</a>    <span class="k">def</span> <span class="nf">remove_element</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Removes the last element of the list.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resize_table</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">adjustSize</span><span class="p">()</span></div>

<div class="viewcode-block" id="DefaultValueListCreation.resize_table"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.DefaultValueListCreation.resize_table">[docs]</a>    <span class="k">def</span> <span class="nf">resize_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;To resize the pop up depending on the table.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">resizeColumnsToContents</span><span class="p">()</span>
        <span class="n">total_width</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">total_height</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">columnCount</span><span class="p">():</span>
            <span class="n">total_width</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">columnWidth</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">total_height</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">rowHeight</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">total_width</span> <span class="o">+</span> <span class="mi">20</span> <span class="o">&lt;</span> <span class="mi">900</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setFixedWidth</span><span class="p">(</span><span class="n">total_width</span> <span class="o">+</span> <span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setFixedHeight</span><span class="p">(</span><span class="n">total_height</span> <span class="o">+</span> <span class="mi">25</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setFixedWidth</span><span class="p">(</span><span class="mi">900</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setFixedHeight</span><span class="p">(</span><span class="n">total_height</span> <span class="o">+</span> <span class="mi">40</span><span class="p">)</span></div>

<div class="viewcode-block" id="DefaultValueListCreation.update_default_value"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.DefaultValueListCreation.update_default_value">[docs]</a>    <span class="k">def</span> <span class="nf">update_default_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if the values are correct and updates the parent value.&quot;&quot;&quot;</span>

        <span class="n">database_value</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">valid_values</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># For each value</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">FIELD_TYPE_LIST_INTEGER</span><span class="p">:</span>
                    <span class="n">database_value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">FIELD_TYPE_LIST_FLOAT</span><span class="p">:</span>
                    <span class="n">database_value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">FIELD_TYPE_LIST_BOOLEAN</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;True&quot;</span><span class="p">:</span>
                        <span class="n">database_value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;False&quot;</span><span class="p">:</span>
                        <span class="n">database_value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Not a boolean value&quot;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">FIELD_TYPE_LIST_STRING</span><span class="p">:</span>
                    <span class="n">database_value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">FIELD_TYPE_LIST_DATE</span><span class="p">:</span>
                    <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y&quot;</span>
                    <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
                    <span class="n">database_value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">FIELD_TYPE_LIST_DATETIME</span><span class="p">:</span>
                    <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y %H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span>
                    <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span>
                    <span class="n">database_value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">FIELD_TYPE_LIST_TIME</span><span class="p">:</span>
                    <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;%H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span>
                    <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
                    <span class="n">database_value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="c1"># Error if invalid value</span>
                <span class="n">valid_values</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
                <span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Warning</span><span class="p">)</span>
                <span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Invalid value&quot;</span><span class="p">)</span>
                <span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span>
                    <span class="s2">&quot;The value &quot;</span>
                    <span class="o">+</span> <span class="n">text</span>
                    <span class="o">+</span> <span class="s2">&quot; is invalid with the type &quot;</span>
                    <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
                <span class="p">)</span>
                <span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Warning&quot;</span><span class="p">)</span>
                <span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
                <span class="n">msg</span><span class="o">.</span><span class="n">buttonClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
                <span class="n">msg</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span>
                <span class="k">break</span>

        <span class="k">if</span> <span class="n">valid_values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">database_value</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="DefaultValueQLineEdit"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.DefaultValueQLineEdit">[docs]</a><span class="k">class</span> <span class="nc">DefaultValueQLineEdit</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Overrides the QLineEdit for the default value.</span>

<span class="sd">    We need to override the mousePressEvent.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - mousePressEvent: mouse pressed on the QLineEdit</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="DefaultValueQLineEdit.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.DefaultValueQLineEdit.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span></div>

<div class="viewcode-block" id="DefaultValueQLineEdit.mousePressEvent"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.DefaultValueQLineEdit.mousePressEvent">[docs]</a>    <span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Mouse pressed on the QLineEdit.</span>

<span class="sd">        :param event: used ?</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;list_&quot;</span><span class="p">):</span>
            <span class="c1"># We display the pop up to create the list if the checkbox is</span>
            <span class="c1"># checked, otherwise we do nothing</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">list_creation</span> <span class="o">=</span> <span class="n">DefaultValueListCreation</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">type</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">list_creation</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpAddPath"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpAddPath">[docs]</a><span class="k">class</span> <span class="nc">PopUpAddPath</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to add a document to the project</span>
<span class="sd">       without importing from MRI Files Manager (File &gt; Import).</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - file_to_choose: lets the user choose a file to import</span>
<span class="sd">        - find_type: tries to find the document type when the document is</span>
<span class="sd">           changed</span>
<span class="sd">        - save_path: adds the path to the database and the data browser</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PopUpAddPath.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpAddPath.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">,</span> <span class="n">databrowser</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization of the PopUp AddPath.</span>

<span class="sd">        :param project: current project in the software</span>
<span class="sd">        :param databrowser: data browser instance of the software</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span> <span class="o">=</span> <span class="n">databrowser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Add a document&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModal</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">vbox_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="n">hbox_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">file_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;File: &quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_line_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_line_edit</span><span class="o">.</span><span class="n">setFixedWidth</span><span class="p">(</span><span class="mi">300</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_line_edit</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">find_type</span><span class="p">)</span>
        <span class="n">file_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Choose a document&quot;</span><span class="p">)</span>
        <span class="n">file_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_to_choose</span><span class="p">)</span>
        <span class="n">hbox_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">file_label</span><span class="p">)</span>
        <span class="n">hbox_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_line_edit</span><span class="p">)</span>
        <span class="n">hbox_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">file_button</span><span class="p">)</span>
        <span class="n">vbox_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox_layout</span><span class="p">)</span>

        <span class="n">hbox_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">type_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Type: &quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type_line_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">hbox_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">type_label</span><span class="p">)</span>
        <span class="n">hbox_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type_line_edit</span><span class="p">)</span>
        <span class="n">vbox_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox_layout</span><span class="p">)</span>

        <span class="n">hbox_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ok_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Ok&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ok_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_path</span><span class="p">)</span>
        <span class="n">cancel_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">)</span>
        <span class="n">cancel_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
        <span class="n">hbox_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ok_button</span><span class="p">)</span>
        <span class="n">hbox_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">cancel_button</span><span class="p">)</span>
        <span class="n">vbox_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox_layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vbox_layout</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpAddPath.file_to_choose"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpAddPath.file_to_choose">[docs]</a>    <span class="k">def</span> <span class="nf">file_to_choose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Lets the user choose a file to import.&quot;&quot;&quot;</span>

        <span class="n">fname</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileNames</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Choose a document to import&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">fname</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_line_edit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">fname</span><span class="p">))</span></div>

<div class="viewcode-block" id="PopUpAddPath.find_type"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpAddPath.find_type">[docs]</a>    <span class="k">def</span> <span class="nf">find_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Tries to find the document type when the document is changed.&quot;&quot;&quot;</span>

        <span class="n">new_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_line_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">new_file</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">new_file</span><span class="p">)</span>
        <span class="n">new_type</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">elmt</span> <span class="ow">in</span> <span class="n">new_file</span><span class="p">:</span>
            <span class="n">filename</span><span class="p">,</span> <span class="n">file_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">elmt</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">file_extension</span> <span class="o">==</span> <span class="s2">&quot;.nii&quot;</span><span class="p">:</span>
                <span class="n">new_type</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TYPE_NII</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">file_extension</span> <span class="o">==</span> <span class="s2">&quot;.mat&quot;</span><span class="p">:</span>
                <span class="n">new_type</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TYPE_MAT</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">file_extension</span> <span class="o">==</span> <span class="s2">&quot;.txt&quot;</span><span class="p">:</span>
                <span class="n">new_type</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TYPE_TXT</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">new_type</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TYPE_UNKNOWN</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">type_line_edit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">new_type</span><span class="p">))</span></div>

<div class="viewcode-block" id="PopUpAddPath.save_path"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpAddPath.save_path">[docs]</a>    <span class="k">def</span> <span class="nf">save_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds the path to the database and the data browser.&quot;&quot;&quot;</span>

        <span class="n">path_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_line_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">path_list</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">path_list</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">path_list</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">path_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">path_list</span><span class="p">]</span>

        <span class="n">path_type_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_line_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">path_type_list</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">path_type_list</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">path_type_list</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">path_type_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">path_type_list</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">path_type</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">path_list</span><span class="p">,</span> <span class="n">path_type_list</span><span class="p">):</span>
            <span class="n">docInDb</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_documents_names</span><span class="p">(</span>
                    <span class="n">COLLECTION_CURRENT</span>
                <span class="p">)</span>
            <span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">unsavedModifications</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="ow">in</span> <span class="n">docInDb</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Warning</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;- </span><span class="si">{0}</span><span class="s2"> -&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span>
                    <span class="s2">&quot;The document &#39;</span><span class="si">{0}</span><span class="s2">&#39; </span><span class="se">\n</span><span class="s2"> &quot;</span>
                    <span class="s2">&quot;already exists in the Data Browser!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Warning: existing data!&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">buttonClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

            <span class="k">elif</span> <span class="n">path</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="ow">and</span> <span class="n">path_type</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="c1"># For history</span>
                <span class="n">history_maker</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">history_maker</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;add_scans&quot;</span><span class="p">)</span>

                <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                <span class="n">copy_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;downloaded_data&quot;</span><span class="p">,</span> <span class="n">filename</span>
                <span class="p">)</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">copy_path</span><span class="p">)</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">scan_file</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">scan_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                    <span class="n">checksum</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
                <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;downloaded_data&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add_document</span><span class="p">(</span><span class="n">COLLECTION_CURRENT</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add_document</span><span class="p">(</span><span class="n">COLLECTION_INITIAL</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
                <span class="n">values_added</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span>
                    <span class="n">COLLECTION_INITIAL</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">TAG_TYPE</span><span class="p">,</span> <span class="n">path_type</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span>
                    <span class="n">COLLECTION_CURRENT</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">TAG_TYPE</span><span class="p">,</span> <span class="n">path_type</span>
                <span class="p">)</span>
                <span class="n">values_added</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">path</span><span class="p">,</span> <span class="n">TAG_TYPE</span><span class="p">,</span> <span class="n">path_type</span><span class="p">,</span> <span class="n">path_type</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span>
                    <span class="n">COLLECTION_INITIAL</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">TAG_CHECKSUM</span><span class="p">,</span> <span class="n">checksum</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span>
                    <span class="n">COLLECTION_CURRENT</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">TAG_CHECKSUM</span><span class="p">,</span> <span class="n">checksum</span>
                <span class="p">)</span>
                <span class="n">values_added</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">path</span><span class="p">,</span> <span class="n">TAG_CHECKSUM</span><span class="p">,</span> <span class="n">checksum</span><span class="p">,</span> <span class="n">checksum</span><span class="p">])</span>

                <span class="c1"># For history</span>
                <span class="n">history_maker</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">path</span><span class="p">])</span>
                <span class="n">history_maker</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">values_added</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">undos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">history_maker</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">redos</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

                <span class="c1"># Databrowser updated</span>

                <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">table_data</span><span class="o">.</span><span class="n">scans_to_visualize</span>
                <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_documents_names</span><span class="p">(</span>
                    <span class="n">COLLECTION_CURRENT</span>
                <span class="p">)</span>

                <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">table_data</span><span class="o">.</span><span class="n">scans_to_search</span>
                <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_documents_names</span><span class="p">(</span>
                    <span class="n">COLLECTION_CURRENT</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">table_data</span><span class="o">.</span><span class="n">add_columns</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">table_data</span><span class="o">.</span><span class="n">fill_headers</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">table_data</span><span class="o">.</span><span class="n">add_rows</span><span class="p">([</span><span class="n">path</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">reset_search_bar</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">frame_advanced_search</span><span class="o">.</span><span class="n">setHidden</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">advanced_search</span><span class="o">.</span><span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Warning</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Invalid arguments&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span>
                    <span class="s2">&quot;The path must exist.</span><span class="se">\n</span><span class="s2">The path type can&#39;t be empty.&quot;</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Warning&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">buttonClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpAddTag"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpAddTag">[docs]</a><span class="k">class</span> <span class="nc">PopUpAddTag</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to add a tag to the project.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - ok_action: verifies that each field is correct and send the new tag</span>
<span class="sd">           to the data browser</span>
<span class="sd">        - on_activated: type updated</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Signal that will be emitted at the end to tell that the project</span>
    <span class="c1"># has been created</span>
    <span class="n">signal_add_tag</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>

<div class="viewcode-block" id="PopUpAddTag.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpAddTag.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">databrowser</span><span class="p">,</span> <span class="n">project</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param project: current project in the software</span>
<span class="sd">        :param databrowser: data browser instance of the software</span>
<span class="sd">        :param type: type of the tag to add</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span> <span class="o">=</span> <span class="n">databrowser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">FIELD_TYPE_STRING</span>  <span class="c1"># Type is string by default</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;Add a tag&quot;</span><span class="p">)</span>

        <span class="c1"># The &#39;OK&#39; push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;push_button_ok&quot;</span><span class="p">)</span>

        <span class="c1"># The &#39;Tag name&#39; label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_name</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_name</span><span class="o">.</span><span class="n">setTextFormat</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AutoText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_name</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;tag_name&quot;</span><span class="p">)</span>

        <span class="c1"># The &#39;Tag name&#39; text edit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_tag_name</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_tag_name</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;textEdit_tag_name&quot;</span><span class="p">)</span>

        <span class="c1"># The &#39;Default value&#39; label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_default_value</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_default_value</span><span class="o">.</span><span class="n">setTextFormat</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AutoText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_default_value</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;default_value&quot;</span><span class="p">)</span>

        <span class="c1"># The &#39;Default value&#39; text edit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span> <span class="o">=</span> <span class="n">DefaultValueQLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;textEdit_default_value&quot;</span><span class="p">)</span>
        <span class="c1"># By default the tag is a string</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Undefined&quot;</span><span class="p">)</span>

        <span class="c1"># The &#39;Description value&#39; label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_description_value</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_description_value</span><span class="o">.</span><span class="n">setTextFormat</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AutoText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_description_value</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;description_value&quot;</span><span class="p">)</span>

        <span class="c1"># The &#39;Description value&#39; text edit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_description_value</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_description_value</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span>
            <span class="s2">&quot;textEdit_&quot;</span> <span class="s2">&quot;description_value&quot;</span>
        <span class="p">)</span>

        <span class="c1"># The &#39;Unit value&#39; label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_unit_value</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_unit_value</span><span class="o">.</span><span class="n">setTextFormat</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AutoText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_unit_value</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;unit_value&quot;</span><span class="p">)</span>

        <span class="c1"># The &#39;Unit value&#39; text edit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_unit</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QComboBox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_unit</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;combo_box_unit&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_unit</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_unit</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">TAG_UNIT_MS</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_unit</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">TAG_UNIT_MM</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_unit</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">TAG_UNIT_MHZ</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_unit</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">TAG_UNIT_HZPIXEL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_unit</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">TAG_UNIT_DEGREE</span><span class="p">)</span>

        <span class="c1"># The &#39;Type&#39; label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_type</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_type</span><span class="o">.</span><span class="n">setTextFormat</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AutoText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_type</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>

        <span class="c1"># The &#39;Type&#39; text edit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QComboBox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;combo_box_type&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;String&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Integer&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Float&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Boolean&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Datetime&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Time&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;String List&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Integer List&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Float List&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Boolean List&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Date List&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Datetime List&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Time List&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="o">.</span><span class="n">currentTextChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_activated</span><span class="p">)</span>

        <span class="c1"># Layouts</span>
        <span class="n">v_box_labels</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_labels</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_tag_name</span><span class="p">)</span>
        <span class="n">v_box_labels</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_default_value</span><span class="p">)</span>
        <span class="n">v_box_labels</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_description_value</span><span class="p">)</span>
        <span class="n">v_box_labels</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_unit_value</span><span class="p">)</span>
        <span class="n">v_box_labels</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_type</span><span class="p">)</span>

        <span class="n">v_box_edits</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_edits</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text_edit_tag_name</span><span class="p">)</span>
        <span class="n">default_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">default_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="p">)</span>
        <span class="n">v_box_edits</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">default_layout</span><span class="p">)</span>
        <span class="n">v_box_edits</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text_edit_description_value</span><span class="p">)</span>
        <span class="n">v_box_edits</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">combo_box_unit</span><span class="p">)</span>
        <span class="n">v_box_edits</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">combo_box_type</span><span class="p">)</span>

        <span class="n">h_box_top</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_top</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">v_box_labels</span><span class="p">)</span>
        <span class="n">h_box_top</span><span class="o">.</span><span class="n">addSpacing</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
        <span class="n">h_box_top</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">v_box_edits</span><span class="p">)</span>

        <span class="n">h_box_ok</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_ok</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">h_box_ok</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="p">)</span>

        <span class="n">v_box_total</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_total</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_top</span><span class="p">)</span>
        <span class="n">v_box_total</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_ok</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">v_box_total</span><span class="p">)</span>

        <span class="c1"># Filling the title of the labels and push buttons</span>
        <span class="n">_translate</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Add a tag&quot;</span><span class="p">,</span> <span class="s2">&quot;OK&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_name</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Add a tag&quot;</span><span class="p">,</span> <span class="s2">&quot;Tag name:&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_default_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
            <span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Add a tag&quot;</span><span class="p">,</span> <span class="s2">&quot;Default value:&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_description_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
            <span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Add a tag&quot;</span><span class="p">,</span> <span class="s2">&quot;Description:&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_unit_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Add a tag&quot;</span><span class="p">,</span> <span class="s2">&quot;Unit:&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_type</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Add a tag&quot;</span><span class="p">,</span> <span class="s2">&quot;Tag type:&quot;</span><span class="p">))</span>

        <span class="c1"># Connecting the OK push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ok_action</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="mi">700</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Add a tag&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModal</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpAddTag.ok_action"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpAddTag.ok_action">[docs]</a>    <span class="k">def</span> <span class="nf">ok_action</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Verifies that each field is correct and send the new tag</span>
<span class="sd">        to the data browser.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">name_already_exists</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># Tag name checked</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_tag_name</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_fields_names</span><span class="p">(</span><span class="n">COLLECTION_CURRENT</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="n">name_already_exists</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># Tag name can&#39;t be empty</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_tag_name</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Critical</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;The tag name cannot be empty&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span><span class="s2">&quot;Please enter a tag name&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Close</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="c1"># Tag name can&#39;t exist already</span>
        <span class="k">elif</span> <span class="n">name_already_exists</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Critical</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;This tag name already exists&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span><span class="s2">&quot;Please select another tag name&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Close</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="c1"># Default value checked</span>
        <span class="n">wrong_default_value_type</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">check_value_type</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">text</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">)</span>

        <span class="c1"># The default value must be valid</span>
        <span class="k">if</span> <span class="n">wrong_default_value_type</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Critical</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Invalid default value&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span>
                <span class="s2">&quot;The default value &#39;</span><span class="si">{0}</span><span class="s2">&#39; is invalid &quot;</span>
                <span class="s2">&quot;with the &#39;</span><span class="si">{1}</span><span class="s2">&#39; type!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">text</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Close</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="c1"># Everything is Ok</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_tag_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_tag_name</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_default_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_tag_description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_description_value</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_tag_unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo_box_unit</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_tag_unit</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">new_tag_unit</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">add_tag_infos</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">new_tag_name</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">new_default_value</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">new_tag_description</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">new_tag_unit</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpAddTag.on_activated"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpAddTag.on_activated">[docs]</a>    <span class="k">def</span> <span class="nf">on_activated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Type updated.</span>

<span class="sd">        :param text: New type</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;String&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">FIELD_TYPE_STRING</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Undefined&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Integer&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">FIELD_TYPE_INTEGER</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Float&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">FIELD_TYPE_FLOAT</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Boolean&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">FIELD_TYPE_BOOLEAN</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;True&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Date&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">FIELD_TYPE_DATE</span>
            <span class="n">date_value</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="n">date_format</span> <span class="o">=</span> <span class="n">date_value</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Datetime&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">FIELD_TYPE_DATETIME</span>
            <span class="n">datetime_value</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="n">datetime_format</span> <span class="o">=</span> <span class="n">datetime_value</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y %H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">datetime_format</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Time&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">FIELD_TYPE_TIME</span>
            <span class="n">time_value</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="n">time_format</span> <span class="o">=</span> <span class="n">time_value</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">time_format</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;String List&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">FIELD_TYPE_LIST_STRING</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;[&#39;Undefined&#39;, &#39;Undefined&#39;]&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Integer List&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">FIELD_TYPE_LIST_INTEGER</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;[0, 0]&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Float List&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">FIELD_TYPE_LIST_FLOAT</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;[0.0, 0.0]&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Boolean List&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">FIELD_TYPE_LIST_BOOLEAN</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;[True, True]&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Date List&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">FIELD_TYPE_LIST_DATE</span>
            <span class="n">date_value</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="n">date_format</span> <span class="o">=</span> <span class="n">date_value</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">([</span><span class="n">date_format</span><span class="p">,</span> <span class="n">date_format</span><span class="p">])</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Datetime List&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">FIELD_TYPE_LIST_DATETIME</span>
            <span class="n">datetime_value</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="n">datetime_format</span> <span class="o">=</span> <span class="n">datetime_value</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y %H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">([</span><span class="n">datetime_format</span><span class="p">,</span> <span class="n">datetime_format</span><span class="p">])</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;Time List&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">FIELD_TYPE_LIST_TIME</span>
            <span class="n">time_value</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="n">time_format</span> <span class="o">=</span> <span class="n">time_value</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit_default_value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">([</span><span class="n">time_format</span><span class="p">,</span> <span class="n">time_format</span><span class="p">])</span>
            <span class="p">)</span></div></div>


<div class="viewcode-block" id="PopUpCloneTag"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpCloneTag">[docs]</a><span class="k">class</span> <span class="nc">PopUpCloneTag</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to clone a tag to the project.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - ok_action: verifies the specified name is correct and send the</span>
<span class="sd">           information to the data browser</span>
<span class="sd">        - search_str: matches the searched pattern with the tags of the project</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Signal that will be emitted at the end to tell that the project</span>
    <span class="c1"># has been created</span>
    <span class="n">signal_clone_tag</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>

<div class="viewcode-block" id="PopUpCloneTag.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpCloneTag.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">databrowser</span><span class="p">,</span> <span class="n">project</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param project: current project in the software</span>
<span class="sd">        :param databrowser: data browser instance of the software</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Clone a tag&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span> <span class="o">=</span> <span class="n">databrowser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModal</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">_translate</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;Clone a tag&quot;</span><span class="p">)</span>

        <span class="c1"># The &#39;OK&#39; push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;push_button_ok&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Clone a tag&quot;</span><span class="p">,</span> <span class="s2">&quot;OK&quot;</span><span class="p">))</span>

        <span class="c1"># The &#39;New tag name&#39; text edit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_edit_new_tag_name</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_edit_new_tag_name</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;lineEdit_new_tag_name&quot;</span><span class="p">)</span>

        <span class="c1"># The &#39;New tag name&#39; label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_new_tag_name</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_new_tag_name</span><span class="o">.</span><span class="n">setTextFormat</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AutoText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_new_tag_name</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;label_new_tag_name&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_new_tag_name</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
            <span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Clone a tag&quot;</span><span class="p">,</span> <span class="s2">&quot;New tag name:&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">hbox_buttons</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_new_tag_name</span><span class="p">)</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line_edit_new_tag_name</span><span class="p">)</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="p">)</span>

        <span class="c1"># The &quot;Tag list&quot; label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span><span class="o">.</span><span class="n">setTextFormat</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AutoText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;label_tag_list&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
            <span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Clone a tag&quot;</span><span class="p">,</span> <span class="s2">&quot;Available tags:&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;lineEdit_search_bar&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Search&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_str</span><span class="p">,</span> <span class="n">project</span><span class="p">))</span>

        <span class="n">hbox_top</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hbox_top</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span><span class="p">)</span>
        <span class="n">hbox_top</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">hbox_top</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="p">)</span>

        <span class="c1"># The list of tags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;listWidget_tags&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span>
            <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">SingleSelection</span>
        <span class="p">)</span>

        <span class="n">vbox</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox_top</span><span class="p">)</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="p">)</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox_buttons</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vbox</span><span class="p">)</span>

        <span class="n">tags_lists</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_fields_names</span><span class="p">(</span><span class="n">COLLECTION_CURRENT</span><span class="p">)</span>
        <span class="n">tags_lists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">TAG_CHECKSUM</span><span class="p">)</span>
        <span class="n">tags_lists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">TAG_HISTORY</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags_lists</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Dialog&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">sortItems</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vbox</span><span class="p">)</span>

        <span class="c1"># Connecting the OK push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ok_action</span><span class="p">(</span><span class="n">project</span><span class="p">))</span></div>

<div class="viewcode-block" id="PopUpCloneTag.ok_action"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpCloneTag.ok_action">[docs]</a>    <span class="k">def</span> <span class="nf">ok_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Verifies the specified name is correct and send the</span>
<span class="sd">          information to the data browser.</span>

<span class="sd">        :param project: current project</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">name_already_exists</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(</span><span class="n">COLLECTION_CURRENT</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">tag</span><span class="o">.</span><span class="n">field_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_edit_new_tag_name</span><span class="o">.</span><span class="n">text</span><span class="p">():</span>
                <span class="n">name_already_exists</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">name_already_exists</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Critical</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;This tag name already exists&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span><span class="s2">&quot;Please select another tag name&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">buttonClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_edit_new_tag_name</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Critical</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;The tag name can&#39;t be empty&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span><span class="s2">&quot;Please select a tag name&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">buttonClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">selectedItems</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Critical</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;The tag to clone must be selected&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span><span class="s2">&quot;Please select a tag to clone&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">buttonClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tag_to_replace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">selectedItems</span><span class="p">()[</span>
                <span class="mi">0</span>
            <span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">new_tag_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_edit_new_tag_name</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">clone_tag_infos</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tag_to_replace</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_tag_name</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpCloneTag.search_str"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpCloneTag.search_str">[docs]</a>    <span class="k">def</span> <span class="nf">search_str</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">,</span> <span class="n">str_search</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Matches the searched pattern with the tags of the project.</span>

<span class="sd">        :param project: current project</span>
<span class="sd">        :param str_search: string pattern to search</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_translate</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span>
        <span class="n">return_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">tags_lists</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_fields_names</span><span class="p">(</span><span class="n">COLLECTION_CURRENT</span><span class="p">)</span>
        <span class="n">tags_lists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">TAG_CHECKSUM</span><span class="p">)</span>
        <span class="n">tags_lists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">TAG_HISTORY</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">str_search</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags_lists</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">str_search</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">tag</span><span class="o">.</span><span class="n">upper</span><span class="p">():</span>
                    <span class="n">return_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags_lists</span><span class="p">:</span>
                <span class="n">return_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">tag_name</span> <span class="ow">in</span> <span class="n">return_list</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Dialog&quot;</span><span class="p">,</span> <span class="n">tag_name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">sortItems</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpClosePipeline"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpClosePipeline">[docs]</a><span class="k">class</span> <span class="nc">PopUpClosePipeline</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user closes a pipeline editor that has been modified.</span>

<span class="sd">    :param bool_save_as: boolean to True if the pipeline needs to be saved</span>
<span class="sd">    :param bool_exit: boolean to True if we can exit the editor</span>
<span class="sd">    :param save_as_signal: signal emitted to save the pipeline under</span>
<span class="sd">                           another name</span>
<span class="sd">    :param do_not_save_signal: signal emitted to close the editor</span>
<span class="sd">    :param cancel_signal: signal emitted to cancel the action</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - can_exit: returns the value of bool_exit</span>
<span class="sd">        - cancel_clicked: makes the actions to cancel the action</span>
<span class="sd">        - do_not_save_clicked: makes the actions not to save the pipeline</span>
<span class="sd">        - save_as_clicked: makes the actions to save the pipeline</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">save_as_signal</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="n">do_not_save_signal</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="n">cancel_signal</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>

<div class="viewcode-block" id="PopUpClosePipeline.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpClosePipeline.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param pipeline_name: name of the pipeline (basename)</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_name</span> <span class="o">=</span> <span class="n">pipeline_name</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bool_exit</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bool_save_as</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Confirm pipeline closing&quot;</span><span class="p">)</span>

        <span class="n">label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
            <span class="s2">&quot;Do you want to close the pipeline without saving &quot;</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_name</span>
            <span class="o">+</span> <span class="s2">&quot;?&quot;</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_save_as</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Save&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_do_not_save</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Do not save&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="n">hbox</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_save_as</span><span class="p">)</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_do_not_save</span><span class="p">)</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="p">)</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">vbox</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vbox</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_save_as</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_as_clicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_do_not_save</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">do_not_save_clicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cancel_clicked</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpClosePipeline.can_exit"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpClosePipeline.can_exit">[docs]</a>    <span class="k">def</span> <span class="nf">can_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the value of bool_exit.</span>

<span class="sd">        :return: bool_exit value</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bool_exit</span></div>

<div class="viewcode-block" id="PopUpClosePipeline.cancel_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpClosePipeline.cancel_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">cancel_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Makes the actions to cancel the action.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bool_exit</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpClosePipeline.do_not_save_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpClosePipeline.do_not_save_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">do_not_save_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Makes the actions not to save the pipeline.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bool_exit</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpClosePipeline.save_as_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpClosePipeline.save_as_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">save_as_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Makes the actions to save the pipeline.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_as_signal</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bool_save_as</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bool_exit</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpDataBrowserCurrentSelection"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpDataBrowserCurrentSelection">[docs]</a><span class="k">class</span> <span class="nc">PopUpDataBrowserCurrentSelection</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called to display the current data_browser selection.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - ok_clicked: updates the &quot;scan_list&quot; attribute of several widgets</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PopUpDataBrowserCurrentSelection.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpDataBrowserCurrentSelection.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">,</span> <span class="n">databrowser</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">main_window</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param project: current project in the software</span>
<span class="sd">        :param databrowser: data browser instance of the software</span>
<span class="sd">        :param filter: list of the current documents in the data browser</span>
<span class="sd">        :param main_window: main window of the software</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span> <span class="o">=</span> <span class="n">databrowser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filter</span> <span class="o">=</span> <span class="nb">filter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_window</span> <span class="o">=</span> <span class="n">main_window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Confirm the selection&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModal</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">vbox_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="c1"># Adding databrowser table</span>
        <span class="n">databrowser_table</span> <span class="o">=</span> <span class="n">data_browser</span><span class="o">.</span><span class="n">TableDataBrowser</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="p">,</span> <span class="p">[</span><span class="n">TAG_FILENAME</span><span class="p">],</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">)</span>
        <span class="n">old_scan_list</span> <span class="o">=</span> <span class="n">databrowser_table</span><span class="o">.</span><span class="n">scans_to_visualize</span>
        <span class="n">databrowser_table</span><span class="o">.</span><span class="n">scans_to_visualize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span>
        <span class="n">databrowser_table</span><span class="o">.</span><span class="n">update_visualized_rows</span><span class="p">(</span><span class="n">old_scan_list</span><span class="p">)</span>
        <span class="n">buttons</span> <span class="o">=</span> <span class="n">QDialogButtonBox</span><span class="p">(</span>
            <span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Ok</span> <span class="o">|</span> <span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Cancel</span>
        <span class="p">)</span>
        <span class="n">vbox_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">databrowser_table</span><span class="p">)</span>
        <span class="n">vbox_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">buttons</span><span class="p">)</span>
        <span class="n">buttons</span><span class="o">.</span><span class="n">accepted</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ok_clicked</span><span class="p">)</span>
        <span class="n">buttons</span><span class="o">.</span><span class="n">rejected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vbox_layout</span><span class="p">)</span>
        <span class="n">screen_resolution</span> <span class="o">=</span> <span class="n">QApplication</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">desktop</span><span class="p">()</span><span class="o">.</span><span class="n">screenGeometry</span><span class="p">()</span>
        <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">screen_resolution</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="n">screen_resolution</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">width</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMinimumHeight</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">0.8</span> <span class="o">*</span> <span class="n">height</span><span class="p">))</span></div>

<div class="viewcode-block" id="PopUpDataBrowserCurrentSelection.ok_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpDataBrowserCurrentSelection.ok_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">ok_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Updates the &quot;scan_list&quot; attribute of several widgets.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">main_window</span><span class="o">.</span><span class="n">pipeline_manager</span><span class="o">.</span><span class="n">scan_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_window</span><span class="o">.</span><span class="n">pipeline_manager</span><span class="o">.</span><span class="n">nodeController</span><span class="o">.</span><span class="n">scan_list</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">filter</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_window</span><span class="o">.</span><span class="n">pipeline_manager</span><span class="o">.</span><span class="n">pipelineEditorTabs</span><span class="o">.</span><span class="n">scan_list</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">filter</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_window</span><span class="o">.</span><span class="n">pipeline_manager</span><span class="o">.</span><span class="n">iterationTable</span><span class="o">.</span><span class="n">scan_list</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">filter</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">data_sent</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpDeletedProject"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpDeletedProject">[docs]</a><span class="k">class</span> <span class="nc">PopUpDeletedProject</span><span class="p">(</span><span class="n">QMessageBox</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Indicate the names of deleted project when the software starts.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="PopUpDeletedProject.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpDeletedProject.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deleted_projects</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;These projects have been renamed, moved or deleted:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">deleted_project</span> <span class="ow">in</span> <span class="n">deleted_projects</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">+=</span> <span class="s2">&quot;- </span><span class="si">{0}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">deleted_project</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Warning</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Deleted projects&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Warning&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttonClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpDeleteProject"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpDeleteProject">[docs]</a><span class="k">class</span> <span class="nc">PopUpDeleteProject</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to delete a project.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - ok_clicked: delete the selected projects after confirmation</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PopUpDeleteProject.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpDeleteProject.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">main_window</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.&quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Delete project&quot;</span><span class="p">)</span>

        <span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_path</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getPathToProjectsFolder</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_window</span> <span class="o">=</span> <span class="n">main_window</span>

        <span class="n">project_list</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">v_box</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="c1"># Label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Select projects to delete:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">v_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">check_boxes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">project</span> <span class="ow">in</span> <span class="n">project_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_path</span><span class="p">,</span> <span class="n">project</span><span class="p">)):</span>
                <span class="n">check_box</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">check_boxes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">check_box</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">v_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">check_box</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_bottom</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_bottom</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># The &#39;OK&#39; push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_ok&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ok_clicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_bottom</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="p">)</span>

        <span class="c1"># The &#39;Cancel&#39; push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_bottom</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">scroll</span> <span class="o">=</span> <span class="n">QScrollArea</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">v_box</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll</span><span class="o">.</span><span class="n">setWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">final</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">final</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scroll</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">final</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">h_box_bottom</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpDeleteProject.ok_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpDeleteProject.ok_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">ok_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete the selected projects after confirmation.&quot;&quot;&quot;</span>

        <span class="n">final_values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">check_box</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_boxes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">check_box</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">final_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">check_box</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>

        <span class="n">reply</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span>
        <span class="n">opened_projects</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_opened_projects</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">final_values</span><span class="p">:</span>
            <span class="n">project</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_path</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">reply</span> <span class="o">!=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">YesToAll</span> <span class="ow">and</span> <span class="n">reply</span> <span class="o">!=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">NoToAll</span><span class="p">:</span>
                <span class="n">msgtext</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;Do you really want to delete the &quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot; project ?&quot;</span>
                <span class="p">)</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
                <span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Warning</span><span class="p">)</span>
                <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;populse_mia - Warning: Delete project&quot;</span>
                <span class="n">reply</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">question</span><span class="p">(</span>
                    <span class="bp">self</span><span class="p">,</span>
                    <span class="n">title</span><span class="p">,</span>
                    <span class="n">msgtext</span><span class="p">,</span>
                    <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span>
                    <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span>
                    <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">YesToAll</span>
                    <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">NoToAll</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="n">reply</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="ow">or</span> <span class="n">reply</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">YesToAll</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">main_window</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">folder</span>
                <span class="p">)</span> <span class="o">==</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">project</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">main_window</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">Project</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">main_window</span><span class="o">.</span><span class="n">update_project</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>
                    <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_window</span><span class="o">.</span><span class="n">saved_projects</span><span class="o">.</span><span class="n">pathsList</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">main_window</span><span class="o">.</span><span class="n">saved_projects</span><span class="o">.</span><span class="n">removeSavedProject</span><span class="p">(</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">main_window</span><span class="o">.</span><span class="n">update_recent_projects_actions</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">project</span><span class="p">)</span> <span class="ow">in</span> <span class="n">opened_projects</span><span class="p">:</span>
                    <span class="n">opened_projects</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">project</span><span class="p">))</span>

                <span class="n">config</span><span class="o">.</span><span class="n">set_opened_projects</span><span class="p">(</span><span class="n">opened_projects</span><span class="p">)</span>
                <span class="n">config</span><span class="o">.</span><span class="n">saveConfig</span><span class="p">()</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpFilterSelection"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpFilterSelection">[docs]</a><span class="k">class</span> <span class="nc">PopUpFilterSelection</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to open a filter that has already been</span>
<span class="sd">       saved.</span>

<span class="sd">    :Methods:</span>
<span class="sd">        - cancel_clicked: closes the pop-up</span>
<span class="sd">        - ok_clicked: actions when the &quot;OK&quot; button is clicked</span>
<span class="sd">        - search_str: matches the searched pattern with the saved filters</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PopUpFilterSelection.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpFilterSelection.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param project: current project in the software</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModal</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">_translate</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span>

        <span class="c1"># The &quot;Filter list&quot; label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_filter_list</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_filter_list</span><span class="o">.</span><span class="n">setTextFormat</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AutoText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_filter_list</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;label_filter_list&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_filter_list</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
            <span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;main_window&quot;</span><span class="p">,</span> <span class="s2">&quot;Available filters:&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># The search bar to search in the list of filters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;lineEdit_search_bar&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Search&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_str</span><span class="p">)</span>

        <span class="c1"># The list of filters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_filters</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_filters</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;listWidget_tags&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_filters</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span>
            <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">SingleSelection</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_ok&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ok_clicked</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cancel_clicked</span><span class="p">)</span>

        <span class="n">hbox_top_left</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hbox_top_left</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_filter_list</span><span class="p">)</span>
        <span class="n">hbox_top_left</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="p">)</span>

        <span class="n">vbox_top_left</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">vbox_top_left</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox_top_left</span><span class="p">)</span>
        <span class="n">vbox_top_left</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_widget_filters</span><span class="p">)</span>

        <span class="n">hbox_buttons</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="p">)</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="p">)</span>

        <span class="n">vbox_final</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">vbox_final</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">vbox_top_left</span><span class="p">)</span>
        <span class="n">vbox_final</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox_buttons</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vbox_final</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpFilterSelection.cancel_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpFilterSelection.cancel_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">cancel_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Closes the pop-up.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpFilterSelection.ok_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpFilterSelection.ok_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">ok_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Actions when the &quot;OK&quot; button is clicked.&quot;&quot;&quot;</span>

        <span class="c1"># Has to be override in the PopUpSelectFilter* classes</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="PopUpFilterSelection.search_str"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpFilterSelection.search_str">[docs]</a>    <span class="k">def</span> <span class="nf">search_str</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">str_search</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Matches the searched pattern with the saved filters.</span>

<span class="sd">        :param str_search: string pattern to search</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">return_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">str_search</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="nb">filter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">filters</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">str_search</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="nb">filter</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">():</span>
                    <span class="n">return_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">filter</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="nb">filter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">filters</span><span class="p">:</span>
                <span class="n">return_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">filter</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_widget_filters</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_filters</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">in</span> <span class="n">return_list</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setHidden</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setHidden</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="PopUpInformation"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpInformation">[docs]</a><span class="k">class</span> <span class="nc">PopUpInformation</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to display the current project&#39;s</span>
<span class="sd">    information.&quot;&quot;&quot;</span>

    <span class="c1"># Signal that will be emitted at the end to tell that the project</span>
    <span class="c1"># has been created</span>
    <span class="n">signal_preferences_change</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>

<div class="viewcode-block" id="PopUpInformation.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpInformation.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param project: current project in the software</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="n">name_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Name: &quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name_value</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">project</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span>
        <span class="n">folder_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Root folder: &quot;</span> <span class="o">+</span> <span class="n">project</span><span class="o">.</span><span class="n">folder</span><span class="p">)</span>
        <span class="n">date_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Date of creation: &quot;</span> <span class="o">+</span> <span class="n">project</span><span class="o">.</span><span class="n">getDate</span><span class="p">())</span>

        <span class="n">box</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">row</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">name_label</span><span class="p">)</span>
        <span class="n">row</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name_value</span><span class="p">)</span>
        <span class="n">box</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="n">box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">folder_label</span><span class="p">)</span>
        <span class="n">box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">date_label</span><span class="p">)</span>
        <span class="n">box</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">box</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="PopUpInheritanceDict"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpInheritanceDict">[docs]</a><span class="k">class</span> <span class="nc">PopUpInheritanceDict</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called to select from which input the output will inherit the tags.</span>

<span class="sd">    :Methods:</span>
<span class="sd">        - on_clicked: event when radiobutton is clicked</span>
<span class="sd">        - ok_clicked: event when ok button is clicked</span>
<span class="sd">        - okall_clicked: event when Ok all button is clicked</span>
<span class="sd">        - ignore_clicked: event when ignore button is clicked</span>
<span class="sd">        - ignoreall_clicked:event when ignore all plugs button is clicked</span>
<span class="sd">        - ignore_node_clicked: event when ignore all nodes button is clicked</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PopUpInheritanceDict.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpInheritanceDict.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">node_name</span><span class="p">,</span> <span class="n">plug_name</span><span class="p">,</span> <span class="n">iterate</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization</span>

<span class="sd">        :param values: A dictionary with input name as key and their paths</span>
<span class="sd">        as values</span>
<span class="sd">        :param node_name: name of the current node</span>
<span class="sd">        :param plug_name: name of the current output plug</span>
<span class="sd">        :param iterate: boolean, iteration or not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setModal</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;Dialog&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Plug inherited in &quot;</span> <span class="o">+</span> <span class="n">node_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">everything</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">label</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;In the node &lt;b&gt;&lt;i&gt;&quot;</span> <span class="o">+</span> <span class="n">node_name</span> <span class="o">+</span> <span class="s2">&quot;&lt;/i&gt;&lt;/b&gt;, from which &quot;</span>
            <span class="s2">&quot;input plug, the output plug &lt;b&gt;&lt;i&gt;&quot;</span> <span class="o">+</span> <span class="n">plug_name</span> <span class="o">+</span> <span class="s2">&quot;&lt;/i&gt;&lt;/b&gt;&quot;</span>
            <span class="s2">&quot; should inherit the tags:&quot;</span>
        <span class="p">)</span>

        <span class="n">v_box_values</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="n">v_box_values</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="n">label</span><span class="p">))</span>
        <span class="n">checked</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="n">radiobutton</span> <span class="o">=</span> <span class="n">QRadioButton</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="n">radiobutton</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="n">radiobutton</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
            <span class="n">radiobutton</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">checked</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">checked</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">radiobutton</span><span class="o">.</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">radiobutton</span><span class="o">.</span><span class="n">key</span>

            <span class="n">checked</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">radiobutton</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_clicked</span><span class="p">)</span>
            <span class="n">v_box_values</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">radiobutton</span><span class="p">)</span>
            <span class="n">v_box_values</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">h_box_buttons</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ok_clicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
            <span class="s2">&quot;&lt;i&gt;&quot;</span> <span class="o">+</span> <span class="n">plug_name</span> <span class="o">+</span> <span class="s2">&quot;&lt;/i&gt; will inherit &quot;</span> <span class="s2">&quot;tags from &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span>
        <span class="p">)</span>
        <span class="n">h_box_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ignore</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ignore</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Ignore&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ignore</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ignore_clicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ignore</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
            <span class="s2">&quot;&lt;i&gt;&quot;</span> <span class="o">+</span> <span class="n">plug_name</span> <span class="o">+</span> <span class="s2">&quot;&lt;/i&gt; will &quot;</span> <span class="s2">&quot;not inherit any tags.&quot;</span>
        <span class="p">)</span>
        <span class="n">h_box_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_ignore</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_okall</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_okall</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;OK for all output plugs&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_okall</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">okall_clicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_okall</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
            <span class="s2">&quot;All the output plugs from &lt;i&gt;&quot;</span>
            <span class="o">+</span> <span class="n">node_name</span>
            <span class="o">+</span> <span class="s2">&quot;&lt;/i&gt; will inherit tags&quot;</span>
            <span class="s2">&quot; from &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span>
        <span class="p">)</span>
        <span class="n">h_box_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_okall</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ignoreall</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ignoreall</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Ignore for all output plugs&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ignoreall</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ignoreall_clicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ignoreall</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
            <span class="s2">&quot;All the output plugs from &lt;i&gt;&quot;</span> <span class="o">+</span> <span class="n">node_name</span> <span class="o">+</span> <span class="s2">&quot;&lt;/i&gt; will not &quot;</span>
            <span class="s2">&quot;inherit any tags.&quot;</span>
        <span class="p">)</span>
        <span class="n">h_box_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_ignoreall</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ignore_node</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ignore_node</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
            <span class="s2">&quot;Ignore for all nodes in the &quot;</span> <span class="s2">&quot;pipeline&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ignore_node</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ignore_node_clicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ignore_node</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
            <span class="s2">&quot;No tags will be inherited &quot;</span> <span class="s2">&quot;for the whole pipeline.&quot;</span>
        <span class="p">)</span>
        <span class="n">v_box_values</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_buttons</span><span class="p">)</span>

        <span class="n">v_box_values</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_ignore_node</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">iterate</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;&lt;i&gt;Theses choices will be valid for each iteration.&lt;/i&gt;&quot;</span>
            <span class="n">v_box_values</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="n">label</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">v_box_values</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpInheritanceDict.on_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpInheritanceDict.on_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">on_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Event when radiobutton is clicked&quot;&quot;&quot;</span>
        <span class="n">radiobutton</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sender</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">radiobutton</span><span class="o">.</span><span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">radiobutton</span><span class="o">.</span><span class="n">key</span></div>

<div class="viewcode-block" id="PopUpInheritanceDict.ok_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpInheritanceDict.ok_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">ok_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Event when ok button is clicked&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpInheritanceDict.okall_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpInheritanceDict.okall_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">okall_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Event when Ok all button is clicked&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpInheritanceDict.ignore_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpInheritanceDict.ignore_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">ignore_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Event when ignore button is clicked&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpInheritanceDict.ignoreall_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpInheritanceDict.ignoreall_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">ignoreall_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Event when ignore all plugs button is clicked&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpInheritanceDict.ignore_node_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpInheritanceDict.ignore_node_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">ignore_node_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Event when ignore all nodes button is clicked&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">everything</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpMultipleSort"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpMultipleSort">[docs]</a><span class="k">class</span> <span class="nc">PopUpMultipleSort</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called to sort the data browser&#39;s table depending on multiple tags.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - add_tag: adds a push button</span>
<span class="sd">        - fill_values: fills the values list when a tag is added or removed</span>
<span class="sd">        - refresh_layout: updates the layouts (especially when a tag push</span>
<span class="sd">          button is added or removed)</span>
<span class="sd">        - remove_tag: removes a push buttons and makes the changes in the</span>
<span class="sd">          list of values</span>
<span class="sd">        - select_tag: calls a pop-up to choose a tag</span>
<span class="sd">        - sort_scans: collects the information and send them to the data</span>
<span class="sd">          browser</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PopUpMultipleSort.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpMultipleSort.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">,</span> <span class="n">table_data_browser</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param project: current project in the software</span>
<span class="sd">        :param table_data_browser: data browser&#39;s table of the software</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_data_browser</span> <span class="o">=</span> <span class="n">table_data_browser</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setModal</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Multiple sort&quot;</span><span class="p">)</span>

        <span class="c1"># values_list will contain the different values of each selected tag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">values_list</span> <span class="o">=</span> <span class="p">[[],</span> <span class="p">[]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_tags</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">label_tags</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Tags: &quot;</span><span class="p">)</span>

        <span class="c1"># Each push button will allow the user to add a tag to the count table</span>
        <span class="n">push_button_tag_1</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">()</span>
        <span class="n">push_button_tag_1</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Tag n1&quot;</span><span class="p">)</span>
        <span class="n">push_button_tag_1</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_tag</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

        <span class="n">push_button_tag_2</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">()</span>
        <span class="n">push_button_tag_2</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Tag n2&quot;</span><span class="p">)</span>
        <span class="n">push_button_tag_2</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_tag</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

        <span class="c1"># The list of all the push buttons (the user can add as many as</span>
        <span class="c1"># he or she wants)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_buttons</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_buttons</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">push_button_tag_1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_buttons</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">push_button_tag_2</span><span class="p">)</span>

        <span class="c1"># Labels to add/remove a tag (a push button)</span>
        <span class="n">sources_images_dir</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span><span class="o">.</span><span class="n">getSourceImageDir</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_tag_label</span> <span class="o">=</span> <span class="n">ClickableLabel</span><span class="p">()</span>
        <span class="n">remove_tag_picture</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sources_images_dir</span><span class="p">,</span> <span class="s2">&quot;red_minus.png&quot;</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="n">remove_tag_picture</span> <span class="o">=</span> <span class="n">remove_tag_picture</span><span class="o">.</span><span class="n">scaledToHeight</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_tag_label</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">remove_tag_picture</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_tag_label</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_tag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_tag_label</span> <span class="o">=</span> <span class="n">ClickableLabel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_tag_label</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;plus&quot;</span><span class="p">)</span>
        <span class="n">add_tag_picture</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sources_images_dir</span><span class="p">,</span> <span class="s2">&quot;green_plus.png&quot;</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="n">add_tag_picture</span> <span class="o">=</span> <span class="n">add_tag_picture</span><span class="o">.</span><span class="n">scaledToHeight</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_tag_label</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">add_tag_picture</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_tag_label</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_tag</span><span class="p">)</span>

        <span class="c1"># Combobox to choose if the sort order is ascending or descending</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span><span class="o">.</span><span class="n">addItems</span><span class="p">([</span><span class="s2">&quot;Ascending&quot;</span><span class="p">,</span> <span class="s2">&quot;Descending&quot;</span><span class="p">])</span>

        <span class="c1"># Push button that is pressed to launch the computations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_sort</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_sort</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Sort scans&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_sort</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sort_scans</span><span class="p">)</span>

        <span class="c1"># Layouts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">v_box_final</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">v_box_final</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_layout</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpMultipleSort.add_tag"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpMultipleSort.add_tag">[docs]</a>    <span class="k">def</span> <span class="nf">add_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds a push button.&quot;&quot;&quot;</span>

        <span class="n">push_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">()</span>
        <span class="n">push_button</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Tag n&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_buttons</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">push_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_tag</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_buttons</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_buttons</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_buttons</span><span class="p">),</span> <span class="n">push_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_layout</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpMultipleSort.fill_values"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpMultipleSort.fill_values">[docs]</a>    <span class="k">def</span> <span class="nf">fill_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Fills the values list when a tag is added or removed.</span>

<span class="sd">        :param idx: index of the pressed push button</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">tag_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_buttons</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values_list</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">idx</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">values_list</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">scan</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_fields_names</span><span class="p">(</span><span class="n">COLLECTION_CURRENT</span><span class="p">):</span>
            <span class="n">current_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span>
                <span class="n">COLLECTION_CURRENT</span><span class="p">,</span> <span class="n">scan</span><span class="p">,</span> <span class="n">tag_name</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">current_value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="n">idx</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_value</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpMultipleSort.refresh_layout"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpMultipleSort.refresh_layout">[docs]</a>    <span class="k">def</span> <span class="nf">refresh_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Updates the layouts (especially when a tag push button is added or</span>
<span class="sd">        removed).</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_top</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_top</span><span class="o">.</span><span class="n">setSpacing</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_top</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_tags</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">tag_label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_buttons</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">h_box_top</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">tag_label</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_top</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_tag_label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_top</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_tag_label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_top</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_top</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_sort</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_top</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">v_box_final</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">h_box_top</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpMultipleSort.remove_tag"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpMultipleSort.remove_tag">[docs]</a>    <span class="k">def</span> <span class="nf">remove_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Removes a push buttons and makes the changesn in the list of</span>
<span class="sd">        values.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">push_button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_buttons</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">push_button</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">()</span>
        <span class="n">push_button</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_buttons</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_layout</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpMultipleSort.select_tag"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpMultipleSort.select_tag">[docs]</a>    <span class="k">def</span> <span class="nf">select_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calls a pop-up to choose a tag.</span>

<span class="sd">        :param idx: index of the pressed push button</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">pop_up</span> <span class="o">=</span> <span class="n">PopUpSelectTagCountTable</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_shown_tags</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">push_buttons</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(),</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">pop_up</span><span class="o">.</span><span class="n">exec_</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">push_buttons</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">pop_up</span><span class="o">.</span><span class="n">selected_tag</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fill_values</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpMultipleSort.sort_scans"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpMultipleSort.sort_scans">[docs]</a>    <span class="k">def</span> <span class="nf">sort_scans</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Collects the information and send them to the data browser.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span><span class="o">.</span><span class="n">itemText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">())</span>

        <span class="k">for</span> <span class="n">push_button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_buttons</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">push_button</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_fields_names</span><span class="p">(</span>
                <span class="n">COLLECTION_CURRENT</span>
            <span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">list_tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">push_button</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_data_browser</span><span class="o">.</span><span class="n">multiple_sort_infos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_tags</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="PopUpNewProject"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpNewProject">[docs]</a><span class="k">class</span> <span class="nc">PopUpNewProject</span><span class="p">(</span><span class="n">QFileDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to create a new project.</span>

<span class="sd">    .. Method:</span>
<span class="sd">        - get_filename: sets the widget&#39;s attributes depending on the</span>
<span class="sd">          selected file name</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Signal that will be emitted at the end to tell that the project</span>
    <span class="c1"># has been created</span>
    <span class="n">signal_create_project</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>

<div class="viewcode-block" id="PopUpNewProject.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpNewProject.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.&quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLabelText</span><span class="p">(</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">Accept</span><span class="p">,</span> <span class="s2">&quot;Create&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAcceptMode</span><span class="p">(</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">AcceptSave</span><span class="p">)</span>

        <span class="c1"># Setting the projects directory as default</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">set_projects_directory_as_default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpNewProject.get_filename"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpNewProject.get_filename">[docs]</a>    <span class="k">def</span> <span class="nf">get_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name_tuple</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the widget&#39;s attributes depending on the selected file name.</span>

<span class="sd">        :param file_name_tuple: tuple obtained with the selectedFiles method</span>
<span class="sd">        :return: real file name</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">file_name</span> <span class="o">=</span> <span class="n">file_name_tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">file_name</span><span class="p">:</span>
            <span class="n">entire_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">entire_path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relative_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relative_subpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relative_path</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="c1"># A signal is emitted to tell that the project has been created</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">signal_create_project</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">message_already_exists</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">file_name</span></div></div>


<div class="viewcode-block" id="PopUpOpenProject"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpOpenProject">[docs]</a><span class="k">class</span> <span class="nc">PopUpOpenProject</span><span class="p">(</span><span class="n">QFileDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to open project.</span>

<span class="sd">    .. Method:</span>
<span class="sd">        - get_filename: sets the widget&#39;s attributes depending on the selected</span>
<span class="sd">           file name</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Signal that will be emitted at the end to tell that the project</span>
    <span class="c1"># has been created</span>
    <span class="n">signal_create_project</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>

<div class="viewcode-block" id="PopUpOpenProject.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpOpenProject.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setOption</span><span class="p">(</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">DontUseNativeDialog</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFileMode</span><span class="p">(</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">Directory</span><span class="p">)</span>

        <span class="c1"># Setting the projects directory as default</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">set_projects_directory_as_default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpOpenProject.get_filename"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpOpenProject.get_filename">[docs]</a>    <span class="k">def</span> <span class="nf">get_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name_tuple</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the widget&#39;s attributes depending on the selected file name.</span>

<span class="sd">        :param file_name_tuple: tuple obtained with the selectedFiles method</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">file_name</span> <span class="o">=</span> <span class="n">file_name_tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">file_name</span><span class="p">:</span>
            <span class="n">entire_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">entire_path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relative_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>

            <span class="c1"># If the file exists</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">entire_path</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="c1"># A signal is emitted to tell that the project has been created</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">signal_create_project</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">message_already_exists</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpPreferences"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences">[docs]</a><span class="k">class</span> <span class="nc">PopUpPreferences</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to change the software preferences.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - browse_afni: called when afni browse button is clicked</span>
<span class="sd">        - browse_ants: called when ants browse button is clicked</span>
<span class="sd">        - browse_fsl: called when fsl browse button is clicked</span>
<span class="sd">        - browse_matlab: called when matlab browse button is clicked</span>
<span class="sd">        - browse_matlab_standalone: called when matlab browse button is clicked</span>
<span class="sd">        - browse_mri_conv_path: called when &quot;MRIManager.jar&quot; browse</span>
<span class="sd">          button is clicked</span>
<span class="sd">        - browse_projects_save_path: called when &quot;Projects folder&quot; browse</span>
<span class="sd">          button is clicked</span>
<span class="sd">        - browse_resources_path: called when &quot;resources&quot; browse button is</span>
<span class="sd">          clicked</span>
<span class="sd">        - browse_spm: called when spm browse button is clicked</span>
<span class="sd">        - browse_spm_standalone: called when spm standalone browse button</span>
<span class="sd">          is clicked</span>
<span class="sd">        - change_admin_psswd: method to change the admin password</span>
<span class="sd">        - control_checkbox_toggled: check before changing controller version</span>
<span class="sd">        - edit_capsul_config: capsul engine edition</span>
<span class="sd">        - edit_config_file: create a window to view, edit the mia</span>
<span class="sd">           configuration file</span>
<span class="sd">        - findChar: highlights characters in red when using the Find button</span>
<span class="sd">            when editing configuration</span>
<span class="sd">        - ok_clicked: saves the modifications to the config file and apply them</span>
<span class="sd">        - use_afni_changed: called when the use_afni checkbox is changed</span>
<span class="sd">        - use_ants_changed: called when the use_ants checkbox is changed</span>
<span class="sd">        - use_fsl_changed: called when the use_fsl checkbox is changed</span>
<span class="sd">        - use_matlab_changed: called when the use_matlab checkbox is changed</span>
<span class="sd">        - use_matlab_standalone_changed: called when the use_matlab_standalone</span>
<span class="sd">           checkbox is changed</span>
<span class="sd">        - use_spm_changed: called when the use_spm checkbox is changed</span>
<span class="sd">        - use_spm_standalone_changed: called when the use_spm_standalone</span>
<span class="sd">          checkbox is changed</span>
<span class="sd">        - admin_mode_switch: called when the admin mode checkbox</span>
<span class="sd">           is clicked</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Signal that will be emitted at the end to tell that the project</span>
    <span class="c1"># has been created</span>
    <span class="n">signal_preferences_change</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="n">use_clinical_mode_signal</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="n">not_use_clinical_mode_signal</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>

<div class="viewcode-block" id="PopUpPreferences.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">main_window</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param main_window: main window object of the software</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModal</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_window</span> <span class="o">=</span> <span class="n">main_window</span>

        <span class="n">_translate</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;Dialog&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;MIA preferences&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">clicked</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab_widget</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTabWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_widget</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">salt</span> <span class="o">=</span> <span class="s2">&quot;P0pulseM1@&quot;</span>

        <span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span>

        <span class="c1"># The &#39;Tools&quot; tab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_tools</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_tools</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;tab_tools&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_widget</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_tools</span><span class="p">,</span> <span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Dialog&quot;</span><span class="p">,</span> <span class="s2">&quot;Tools&quot;</span><span class="p">))</span>

        <span class="c1"># Groupbox &quot;Global preferences&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_global</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">(</span><span class="s2">&quot;Global preferences&quot;</span><span class="p">)</span>

        <span class="c1"># Auto save</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_checkbox</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Auto save&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">isAutoSave</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">h_box_auto_save</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_auto_save</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_checkbox</span><span class="p">)</span>
        <span class="n">h_box_auto_save</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_label</span><span class="p">)</span>
        <span class="n">h_box_auto_save</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Clinical mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clinical_mode_checkbox</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_clinical</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clinical_mode_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">clinical_mode_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Clinical mode&quot;</span><span class="p">)</span>
        <span class="n">h_box_clinical</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_clinical</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clinical_mode_checkbox</span><span class="p">)</span>
        <span class="n">h_box_clinical</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clinical_mode_label</span><span class="p">)</span>
        <span class="n">h_box_clinical</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Admin mode + Change password + Edit config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">admin_mode_checkbox</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">admin_mode_checkbox</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">admin_mode_switch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">admin_mode_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Admin mode&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">change_psswd</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span>
            <span class="s2">&quot;Change password&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">autoDefault</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edit_config</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span>
            <span class="s2">&quot;Edit config&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">autoDefault</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">change_psswd</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_admin_psswd</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edit_config</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edit_config_file</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get_user_mode</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">admin_mode_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">change_psswd</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">edit_config</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">admin_mode_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">change_psswd</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">edit_config</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">h_box_admin_mode</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_admin_mode</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">admin_mode_checkbox</span><span class="p">)</span>
        <span class="n">h_box_admin_mode</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">admin_mode_label</span><span class="p">)</span>
        <span class="n">h_box_admin_mode</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">h_box_change_psswd</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_change_psswd</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_psswd</span><span class="p">)</span>
        <span class="n">h_box_change_psswd</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">h_box_edit_config</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_edit_config</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edit_config</span><span class="p">)</span>
        <span class="n">h_box_edit_config</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Version 1 controller</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control_checkbox</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Version 1 controller&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">isControlV1</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">control_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">control_checkbox_changed</span> <span class="o">=</span> <span class="n">main_window</span><span class="o">.</span><span class="n">get_controller_version</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control_checkbox</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">control_checkbox_toggled</span><span class="p">,</span> <span class="n">main_window</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">h_box_control</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_control</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">control_checkbox</span><span class="p">)</span>
        <span class="n">h_box_control</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">control_label</span><span class="p">)</span>
        <span class="n">h_box_control</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Max thumbnails number at the data browser bottom</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_thumbnails_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span>
            <span class="s2">&quot;Number of thumbnails &quot;</span> <span class="s2">&quot;in Data Browser:&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_thumbnails_box</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSpinBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_thumbnails_box</span><span class="o">.</span><span class="n">setMinimum</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_thumbnails_box</span><span class="o">.</span><span class="n">setMaximum</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_thumbnails_box</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_max_thumbnails</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_thumbnails_box</span><span class="o">.</span><span class="n">setSingleStep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">h_box_max_thumbnails</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_max_thumbnails</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_thumbnails_box</span><span class="p">)</span>
        <span class="n">h_box_max_thumbnails</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Radiological vs neurological orientation in miniviewer data browser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radioView_checkbox</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radioView_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span>
            <span class="s2">&quot;Radiological orientation in &quot;</span> <span class="s2">&quot;miniviewer (data browser)&quot;</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">isRadioView</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">radioView_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">h_box_radioView</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_radioView</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radioView_checkbox</span><span class="p">)</span>
        <span class="n">h_box_radioView</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radioView_label</span><span class="p">)</span>
        <span class="n">h_box_radioView</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Draws graphic objects</span>
        <span class="n">v_box_global</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_global</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_auto_save</span><span class="p">)</span>
        <span class="n">v_box_global</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_clinical</span><span class="p">)</span>
        <span class="n">v_box_global</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_admin_mode</span><span class="p">)</span>
        <span class="n">v_box_global</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_change_psswd</span><span class="p">)</span>
        <span class="n">v_box_global</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_edit_config</span><span class="p">)</span>
        <span class="n">v_box_global</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_control</span><span class="p">)</span>
        <span class="n">v_box_global</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_thumbnails_label</span><span class="p">)</span>
        <span class="n">v_box_global</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_max_thumbnails</span><span class="p">)</span>
        <span class="n">v_box_global</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_radioView</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_global</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">v_box_global</span><span class="p">)</span>

        <span class="c1"># Groupbox &quot;Projects preferences&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_projects</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">(</span><span class="s2">&quot;Projects preferences&quot;</span><span class="p">)</span>

        <span class="c1"># Projects folder label/line edit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projects_save_path_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Projects folder:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projects_save_path_line_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span>
            <span class="n">config</span><span class="o">.</span><span class="n">get_projects_save_path</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projects_save_path_browse</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Browse&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projects_save_path_browse</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">browse_projects_save_path</span>
        <span class="p">)</span>

        <span class="c1"># Max projects in &quot;Saved projects&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_projects_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span>
            <span class="s1">&#39;Number of projects in &quot;Saved projects&quot;:&#39;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_projects_box</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSpinBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_projects_box</span><span class="o">.</span><span class="n">setMinimum</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_projects_box</span><span class="o">.</span><span class="n">setMaximum</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_projects_box</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_max_projects</span><span class="p">())</span>
        <span class="c1"># self.max_projects_box.setDecimals(0)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_projects_box</span><span class="o">.</span><span class="n">setSingleStep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Draws graphic objects</span>
        <span class="n">h_box_projects_save</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_projects_save</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_save_path_line_edit</span><span class="p">)</span>
        <span class="n">h_box_projects_save</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_save_path_browse</span><span class="p">)</span>

        <span class="n">v_box_projects_save</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_projects_save</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projects_save_path_label</span><span class="p">)</span>
        <span class="n">v_box_projects_save</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_projects_save</span><span class="p">)</span>

        <span class="n">h_box_max_projects</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_max_projects</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_projects_box</span><span class="p">)</span>
        <span class="n">h_box_max_projects</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">v_box_max_projects</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_max_projects</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_projects_label</span><span class="p">)</span>
        <span class="n">v_box_max_projects</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_max_projects</span><span class="p">)</span>

        <span class="n">projects_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">projects_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">v_box_projects_save</span><span class="p">)</span>
        <span class="n">projects_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">v_box_max_projects</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_projects</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">projects_layout</span><span class="p">)</span>

        <span class="c1"># Groupbox &quot;POPULSE third party preferences&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_populse</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">(</span>
            <span class="s2">&quot;POPULSE third party preference&quot;</span>
        <span class="p">)</span>

        <span class="c1"># MRI File Manager folder label/line edit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mri_conv_path_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span>
            <span class="s2">&quot;Absolute path to MRIManager.jar &quot;</span>
            <span class="s2">&quot;file (e.g., mri_conv_dir/&quot;</span>
            <span class="s2">&quot;MRIFileManager/MRIManager.jar):&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mri_conv_path_line_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_mri_conv_path</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mri_conv_path_browse</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Browse&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mri_conv_path_browse</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">browse_mri_conv_path</span><span class="p">)</span>

        <span class="c1"># Draws graphic objects</span>
        <span class="n">h_box_mri_conv</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_mri_conv</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mri_conv_path_line_edit</span><span class="p">)</span>
        <span class="n">h_box_mri_conv</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mri_conv_path_browse</span><span class="p">)</span>

        <span class="n">v_box_mri_conv</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_mri_conv</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mri_conv_path_label</span><span class="p">)</span>
        <span class="n">v_box_mri_conv</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_mri_conv</span><span class="p">)</span>

        <span class="n">populse_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">populse_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">v_box_mri_conv</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_populse</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">populse_layout</span><span class="p">)</span>

        <span class="c1"># Groupbox &quot;External resources preferences&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_resources</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">(</span>
            <span class="s2">&quot;External resources preferences&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Resources folder label/line edit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resources_path_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span>
            <span class="s2">&quot;Absolute path to the external resources data (some processes may &quot;</span>
            <span class="s2">&quot;require external data to function properly):&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resources_path_line_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_resources_path</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resources_path_browse</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Browse&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resources_path_browse</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">browse_resources_path</span><span class="p">)</span>

        <span class="c1"># Draws graphic objects</span>
        <span class="n">h_box_resources</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_resources</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resources_path_line_edit</span><span class="p">)</span>
        <span class="n">h_box_resources</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resources_path_browse</span><span class="p">)</span>

        <span class="n">v_box_resources</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_resources</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resources_path_label</span><span class="p">)</span>
        <span class="n">v_box_resources</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_resources</span><span class="p">)</span>

        <span class="n">resources_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">resources_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">v_box_resources</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_resources</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">resources_layout</span><span class="p">)</span>

        <span class="c1"># Final tab layouts</span>
        <span class="n">h_box_top</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_top</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groupbox_global</span><span class="p">)</span>
        <span class="n">h_box_top</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab_tools_layout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_tools_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_top</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_tools_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groupbox_projects</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_tools_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groupbox_populse</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_tools_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groupbox_resources</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_tools_layout</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_tools</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_tools_layout</span><span class="p">)</span>

        <span class="c1"># The &#39;OK&#39; push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_ok&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ok_clicked</span><span class="p">)</span>

        <span class="c1"># The &#39;Cancel&#39; push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">status_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1"># Buttons layouts</span>
        <span class="n">hbox_buttons</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_label</span><span class="p">)</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="p">)</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="p">)</span>

        <span class="n">vbox</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_widget</span><span class="p">)</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox_buttons</span><span class="p">)</span>

        <span class="c1"># The &#39;Pipeline&#39; tab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_pipeline</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_pipeline</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;tab_pipeline&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_widget</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tab_pipeline</span><span class="p">,</span> <span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Dialog&quot;</span><span class="p">,</span> <span class="s2">&quot;Pipeline&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Groupbox &quot;Matlab&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_matlab</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">(</span><span class="s2">&quot;Matlab&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Use Matlab&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_checkbox</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">matlab_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span>
            <span class="s2">&quot;Matlab path (e.g., matlab_dir/&quot;</span> <span class="s2">&quot;bin/matlab):&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matlab_choice</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_matlab_path</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matlab_browse</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Browse&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matlab_browse</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">browse_matlab</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Use Matlab standalone&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_checkbox</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span>
            <span class="s2">&quot;Matlab standalone path (e.g., &quot;</span> <span class="s2">&quot;MCR_dir/v95):&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_choice</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span>
            <span class="n">config</span><span class="o">.</span><span class="n">get_matlab_standalone_path</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_browse</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Browse&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_browse</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">browse_matlab_standalone</span>
        <span class="p">)</span>

        <span class="n">h_box_use_matlab</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_use_matlab</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_checkbox</span><span class="p">)</span>
        <span class="n">h_box_use_matlab</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_label</span><span class="p">)</span>
        <span class="n">h_box_use_matlab</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">h_box_matlab_path</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_matlab_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matlab_choice</span><span class="p">)</span>
        <span class="n">h_box_matlab_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matlab_browse</span><span class="p">)</span>

        <span class="n">v_box_matlab_path</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_matlab_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matlab_label</span><span class="p">)</span>
        <span class="n">v_box_matlab_path</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_matlab_path</span><span class="p">)</span>

        <span class="n">h_box_use_matlab_standalone</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_use_matlab_standalone</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_checkbox</span>
        <span class="p">)</span>
        <span class="n">h_box_use_matlab_standalone</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_label</span><span class="p">)</span>
        <span class="n">h_box_use_matlab_standalone</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">h_box_matlab_standalone_path</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_matlab_standalone_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_choice</span><span class="p">)</span>
        <span class="n">h_box_matlab_standalone_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_browse</span><span class="p">)</span>

        <span class="n">v_box_matlab_standalone_path</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_matlab_standalone_path</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_use_matlab_standalone</span><span class="p">)</span>
        <span class="n">v_box_matlab_standalone_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_label</span><span class="p">)</span>
        <span class="n">v_box_matlab_standalone_path</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_matlab_standalone_path</span><span class="p">)</span>

        <span class="n">v_box_matlab</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_matlab</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_use_matlab</span><span class="p">)</span>
        <span class="n">v_box_matlab</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">v_box_matlab_path</span><span class="p">)</span>
        <span class="n">v_box_matlab</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">v_box_matlab_standalone_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_matlab</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">v_box_matlab</span><span class="p">)</span>

        <span class="c1"># Groupbox &quot;SPM&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_spm</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">(</span><span class="s2">&quot;SPM&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Use SPM&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_checkbox</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">spm_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;SPM path (e.g., spm_dir/spm12):&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spm_choice</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_spm_path</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spm_browse</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Browse&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spm_browse</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">browse_spm</span><span class="p">)</span>

        <span class="n">h_box_use_spm</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_use_spm</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_spm_checkbox</span><span class="p">)</span>
        <span class="n">h_box_use_spm</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_spm_label</span><span class="p">)</span>
        <span class="n">h_box_use_spm</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">h_box_spm_path</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_spm_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spm_choice</span><span class="p">)</span>
        <span class="n">h_box_spm_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spm_browse</span><span class="p">)</span>

        <span class="n">v_box_spm_path</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_spm_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spm_label</span><span class="p">)</span>
        <span class="n">v_box_spm_path</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_spm_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Use SPM standalone&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span>
            <span class="s2">&quot;SPM standalone path (e.g., the &quot;</span>
            <span class="s2">&quot;directory hosting the run_spm12.sh &quot;</span>
            <span class="s2">&quot;file):&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_choice</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span>
            <span class="n">config</span><span class="o">.</span><span class="n">get_spm_standalone_path</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_browse</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Browse&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_browse</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">browse_spm_standalone</span><span class="p">)</span>

        <span class="n">h_box_use_spm_standalone</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_use_spm_standalone</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span><span class="p">)</span>
        <span class="n">h_box_use_spm_standalone</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_label</span><span class="p">)</span>
        <span class="n">h_box_use_spm_standalone</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">h_box_spm_standalone_path</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_spm_standalone_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_choice</span><span class="p">)</span>
        <span class="n">h_box_spm_standalone_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_browse</span><span class="p">)</span>

        <span class="n">v_box_spm_standalone_path</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_spm_standalone_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_label</span><span class="p">)</span>
        <span class="n">v_box_spm_standalone_path</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_spm_standalone_path</span><span class="p">)</span>

        <span class="n">v_box_spm</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_spm</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_use_spm</span><span class="p">)</span>
        <span class="n">v_box_spm</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">v_box_spm_path</span><span class="p">)</span>
        <span class="n">v_box_spm</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_use_spm_standalone</span><span class="p">)</span>
        <span class="n">v_box_spm</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">v_box_spm_standalone_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_spm</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">v_box_spm</span><span class="p">)</span>

        <span class="c1"># Groupbox &quot;FSL&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_fsl</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">(</span><span class="s2">&quot;FSL&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">use_fsl_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Use FSL&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_fsl_checkbox</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fsl_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span>
            <span class="s2">&quot;FSL config file (e.g., &quot;</span> <span class="s2">&quot;fsl_dir/etc/fslconf/fsl.sh):&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fsl_choice</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_fsl_config</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fsl_browse</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Browse&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fsl_browse</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">browse_fsl</span><span class="p">)</span>

        <span class="n">h_box_use_fsl</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_use_fsl</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_fsl_checkbox</span><span class="p">)</span>
        <span class="n">h_box_use_fsl</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_fsl_label</span><span class="p">)</span>
        <span class="n">h_box_use_fsl</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">h_box_fsl_path</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_fsl_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fsl_choice</span><span class="p">)</span>
        <span class="n">h_box_fsl_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fsl_browse</span><span class="p">)</span>

        <span class="n">v_box_fsl_path</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_fsl_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fsl_label</span><span class="p">)</span>
        <span class="n">v_box_fsl_path</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_fsl_path</span><span class="p">)</span>

        <span class="n">v_box_fsl</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_fsl</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_use_fsl</span><span class="p">)</span>
        <span class="n">v_box_fsl</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">v_box_fsl_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_fsl</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">v_box_fsl</span><span class="p">)</span>

        <span class="c1"># Groupbox &quot;AFNI&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_afni</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">(</span><span class="s2">&quot;AFNI&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">use_afni_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Use AFNI&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_afni_checkbox</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">afni_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;AFNI path (e.g. dir_containing_abin/abin):&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">afni_choice</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_afni_path</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">afni_browse</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Browse&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">afni_browse</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">browse_afni</span><span class="p">)</span>

        <span class="n">h_box_use_afni</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_use_afni</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_afni_checkbox</span><span class="p">)</span>
        <span class="n">h_box_use_afni</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_afni_label</span><span class="p">)</span>
        <span class="n">h_box_use_afni</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">h_box_afni_path</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_afni_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">afni_choice</span><span class="p">)</span>
        <span class="n">h_box_afni_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">afni_browse</span><span class="p">)</span>

        <span class="n">v_box_afni_path</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_afni_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">afni_label</span><span class="p">)</span>
        <span class="n">v_box_afni_path</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_afni_path</span><span class="p">)</span>

        <span class="n">v_box_afni</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_afni</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_use_afni</span><span class="p">)</span>
        <span class="n">v_box_afni</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">v_box_afni_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_afni</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">v_box_afni</span><span class="p">)</span>

        <span class="c1"># Groupbox &quot;ANTS&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_ants</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">(</span><span class="s2">&quot;ANTS&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">use_ants_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Use ANTS&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_ants_checkbox</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ants_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;ANTS path (e.g. ANTs_dir/bin):&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ants_choice</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_ants_path</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ants_browse</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Browse&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ants_browse</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">browse_ants</span><span class="p">)</span>

        <span class="n">h_box_use_ants</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_use_ants</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_ants_checkbox</span><span class="p">)</span>
        <span class="n">h_box_use_ants</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_ants_label</span><span class="p">)</span>
        <span class="n">h_box_use_ants</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">h_box_ants_path</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_ants_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ants_choice</span><span class="p">)</span>
        <span class="n">h_box_ants_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ants_browse</span><span class="p">)</span>

        <span class="n">v_box_ants_path</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_ants_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ants_label</span><span class="p">)</span>
        <span class="n">v_box_ants_path</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_ants_path</span><span class="p">)</span>

        <span class="n">v_box_ants</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_ants</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_use_ants</span><span class="p">)</span>
        <span class="n">v_box_ants</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">v_box_ants_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_ants</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">v_box_ants</span><span class="p">)</span>

        <span class="c1"># Groupbox &quot;freesurfer&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_freesurfer</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">(</span><span class="s2">&quot;freesurfer&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">use_freesurfer_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Use freesurfer&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_freesurfer_checkbox</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">freesurfer_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span>
            <span class="s2">&quot;freesurfer path (e.g. freesurfer_dir/FreeSurferEnv.sh):&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freesurfer_choice</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_freesurfer_setup</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freesurfer_browse</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Browse&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freesurfer_browse</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">browse_freesurfer</span><span class="p">)</span>

        <span class="n">h_box_use_freesurfer</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_use_freesurfer</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_freesurfer_checkbox</span><span class="p">)</span>
        <span class="n">h_box_use_freesurfer</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_freesurfer_label</span><span class="p">)</span>
        <span class="n">h_box_use_freesurfer</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">h_box_freesurfer_path</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_freesurfer_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">freesurfer_choice</span><span class="p">)</span>
        <span class="n">h_box_freesurfer_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">freesurfer_browse</span><span class="p">)</span>

        <span class="n">v_box_freesurfer_path</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_freesurfer_path</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">freesurfer_label</span><span class="p">)</span>
        <span class="n">v_box_freesurfer_path</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_freesurfer_path</span><span class="p">)</span>

        <span class="n">v_box_freesurfer</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_freesurfer</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_use_freesurfer</span><span class="p">)</span>
        <span class="n">v_box_freesurfer</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">v_box_freesurfer_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox_freesurfer</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">v_box_freesurfer</span><span class="p">)</span>

        <span class="c1"># Groupbox &quot;CAPSUL&quot;</span>
        <span class="n">groupbox_capsul</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">(</span><span class="s2">&quot;CAPSUL&quot;</span><span class="p">)</span>
        <span class="n">capsul_config_button</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span>
            <span class="s2">&quot;Edit CAPSUL config&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">autoDefault</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        <span class="n">capsul_config_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edit_capsul_config</span><span class="p">)</span>
        <span class="n">h_box_capsul</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_capsul</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">capsul_config_button</span><span class="p">)</span>
        <span class="n">h_box_capsul</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">v_box_capsul</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_capsul</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">h_box_capsul</span><span class="p">)</span>

        <span class="n">groupbox_capsul</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">v_box_capsul</span><span class="p">)</span>

        <span class="c1"># general layout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_pipeline_layout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_pipeline_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groupbox_matlab</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_pipeline_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groupbox_spm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_pipeline_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groupbox_fsl</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_pipeline_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groupbox_afni</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_pipeline_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groupbox_ants</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_pipeline_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groupbox_freesurfer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_pipeline_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">groupbox_capsul</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab_pipeline_layout</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_pipeline</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_pipeline_layout</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_spm_standalone</span><span class="p">():</span>
            <span class="n">archi</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">architecture</span><span class="p">()</span>

            <span class="k">if</span> <span class="s2">&quot;Windows&quot;</span> <span class="ow">in</span> <span class="n">archi</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_spm</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_matlab</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_matlab_standalone</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># elif config.get_use_matlab():</span>
        <span class="c1">#</span>
        <span class="c1">#     if config.get_use_matlab_standalone():</span>
        <span class="c1">#         self.use_matlab_standalone_checkbox.setChecked(True)</span>
        <span class="c1">#</span>
        <span class="c1">#     else:</span>
        <span class="c1">#         self.use_matlab_checkbox.setChecked(True)</span>
        <span class="c1">#</span>
        <span class="c1"># else:</span>
        <span class="c1">#     self.use_matlab_checkbox.setChecked(False)</span>
        <span class="c1">#     self.use_matlab_standalone_checkbox.setChecked(False)</span>

        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_fsl</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_fsl_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_afni</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_afni_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_ants</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_ants_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_freesurfer</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_freesurfer_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># The &#39;Appearance&#39; tab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_appearance</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_appearance</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;tab_appearance&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_widget</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tab_appearance</span><span class="p">,</span> <span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Dialog&quot;</span><span class="p">,</span> <span class="s2">&quot;Appearance&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;Black&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Blue&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Green&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Grey&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Orange&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Red&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Yellow&quot;</span><span class="p">,</span>
            <span class="s2">&quot;White&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">appearance_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_background_color</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Background color&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background_color_combo</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background_color_combo</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_text_color</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Text color&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_color_combo</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_color_combo</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">txt</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getTextColor</span><span class="p">()</span>
        <span class="n">bkgnd</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getBackgroundColor</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">txt</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">txt</span> <span class="o">=</span> <span class="s2">&quot;Black&quot;</span>

        <span class="k">if</span> <span class="n">bkgnd</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">bkgnd</span> <span class="o">=</span> <span class="s2">&quot;White&quot;</span>

        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">txt</span> <span class="o">!=</span> <span class="n">color</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">background_color_combo</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">bkgnd</span> <span class="o">!=</span> <span class="n">color</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">text_color_combo</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

        <span class="n">background_color</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getBackgroundColor</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background_color_combo</span><span class="o">.</span><span class="n">setCurrentText</span><span class="p">(</span><span class="n">background_color</span><span class="p">)</span>
        <span class="n">text_color</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getTextColor</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_color_combo</span><span class="o">.</span><span class="n">setCurrentText</span><span class="p">(</span><span class="n">text_color</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fullscreen_cbox</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;Use full screen&quot;</span><span class="p">)</span>
        <span class="n">mainwindow_size_lay</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">mainwindow_size_lay</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Main window size&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainwindow_size_x_spinbox</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSpinBox</span><span class="p">()</span>
        <span class="n">mainwindow_size_lay</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainwindow_size_x_spinbox</span><span class="p">)</span>
        <span class="n">mainwindow_size_lay</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot; x &quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainwindow_size_y_spinbox</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSpinBox</span><span class="p">()</span>
        <span class="n">mainwindow_size_lay</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainwindow_size_y_spinbox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fullscreen_cbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_mainwindow_maximized</span><span class="p">())</span>
        <span class="n">wsize</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_mainwindow_size</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainwindow_size_x_spinbox</span><span class="o">.</span><span class="n">setMaximum</span><span class="p">(</span>
            <span class="n">QApplication</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">desktop</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainwindow_size_y_spinbox</span><span class="o">.</span><span class="n">setMaximum</span><span class="p">(</span>
            <span class="n">QApplication</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">desktop</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">wsize</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">wsize</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mainwindow_size_x_spinbox</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">wsize</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mainwindow_size_y_spinbox</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">wsize</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainwindow_size_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;use current size&quot;</span><span class="p">)</span>
        <span class="n">mainwindow_size_lay</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainwindow_size_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainwindow_size_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_current_mainwindow_size</span><span class="p">,</span> <span class="n">main_window</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">appearance_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_background_color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">appearance_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">background_color_combo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">appearance_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_text_color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">appearance_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text_color_combo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">appearance_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fullscreen_cbox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">appearance_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">mainwindow_size_lay</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">appearance_layout</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_appearance</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">appearance_layout</span><span class="p">)</span>

        <span class="c1"># Global layout - scrollable global window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll</span> <span class="o">=</span> <span class="n">QScrollArea</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll</span><span class="o">.</span><span class="n">setWidgetResizable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vbox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll</span><span class="o">.</span><span class="n">setWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scroll</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span><span class="p">)</span>

        <span class="c1"># Disabling widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_changed</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_changed</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_changed</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_changed</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_fsl_changed</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_afni_changed</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_ants_changed</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_freesurfer_changed</span><span class="p">()</span>

        <span class="c1"># Signals</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_checkbox</span><span class="o">.</span><span class="n">stateChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_changed</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_checkbox</span><span class="o">.</span><span class="n">stateChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_changed</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_checkbox</span><span class="o">.</span><span class="n">stateChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_spm_changed</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span><span class="o">.</span><span class="n">stateChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_changed</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_fsl_checkbox</span><span class="o">.</span><span class="n">stateChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_fsl_changed</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_afni_checkbox</span><span class="o">.</span><span class="n">stateChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_afni_changed</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_ants_checkbox</span><span class="o">.</span><span class="n">stateChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">use_ants_changed</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_freesurfer_checkbox</span><span class="o">.</span><span class="n">stateChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_freesurfer_changed</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.browse_fsl"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.browse_fsl">[docs]</a>    <span class="k">def</span> <span class="nf">browse_fsl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when fsl browse button is clicked.&quot;&quot;&quot;</span>

        <span class="n">fname</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Choose FSL config file&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">fname</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fsl_choice</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.browse_afni"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.browse_afni">[docs]</a>    <span class="k">def</span> <span class="nf">browse_afni</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when afni browse button is clicked.&quot;&quot;&quot;</span>

        <span class="n">fname</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Choose AFNI directory&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">fname</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">afni_choice</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.browse_ants"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.browse_ants">[docs]</a>    <span class="k">def</span> <span class="nf">browse_ants</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when ants browse button is clicked.&quot;&quot;&quot;</span>

        <span class="n">fname</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Choose ANTS directory&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">fname</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ants_choice</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.browse_freesurfer"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.browse_freesurfer">[docs]</a>    <span class="k">def</span> <span class="nf">browse_freesurfer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when freesurfer browse button is clicked.&quot;&quot;&quot;</span>

        <span class="n">fname</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Choose freesurfer env file&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">fname</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">freesurfer_choice</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.browse_matlab"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.browse_matlab">[docs]</a>    <span class="k">def</span> <span class="nf">browse_matlab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when matlab browse button is clicked.&quot;&quot;&quot;</span>

        <span class="n">fname</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Choose Matlab file&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">fname</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matlab_choice</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.browse_matlab_standalone"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.browse_matlab_standalone">[docs]</a>    <span class="k">def</span> <span class="nf">browse_matlab_standalone</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when matlab browse button is clicked.&quot;&quot;&quot;</span>

        <span class="n">fname</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Choose MCR directory&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">fname</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_choice</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.browse_mri_conv_path"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.browse_mri_conv_path">[docs]</a>    <span class="k">def</span> <span class="nf">browse_mri_conv_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when &quot;MRIFileManager.jar&quot; browse button is clicked.&quot;&quot;&quot;</span>

        <span class="n">fname</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="s2">&quot;Select the location of the &quot;</span> <span class="s2">&quot;MRIManager.jar file&quot;</span><span class="p">,</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">),</span>
        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">fname</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mri_conv_path_line_edit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.browse_projects_save_path"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.browse_projects_save_path">[docs]</a>    <span class="k">def</span> <span class="nf">browse_projects_save_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when &quot;Projects folder&quot; browse button is clicked.&quot;&quot;&quot;</span>

        <span class="n">fname</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="s2">&quot;Select a folder where &quot;</span> <span class="s2">&quot;to save the projects&quot;</span><span class="p">,</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">fname</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">projects_save_path_line_edit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s2">&quot;.gitignore&quot;</span><span class="p">),</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">myFile</span><span class="p">:</span>
                <span class="n">myFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;/*&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.browse_resources_path"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.browse_resources_path">[docs]</a>    <span class="k">def</span> <span class="nf">browse_resources_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when &quot;resources&quot; browse button is clicked.&quot;&quot;&quot;</span>

        <span class="n">fname</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="s2">&quot;Select the location of the &quot;</span> <span class="s2">&quot;External resources folder&quot;</span><span class="p">,</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">fname</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resources_path_line_edit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.browse_spm"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.browse_spm">[docs]</a>    <span class="k">def</span> <span class="nf">browse_spm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when spm browse button is clicked.&quot;&quot;&quot;</span>

        <span class="n">fname</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Choose SPM directory&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">fname</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_choice</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.browse_spm_standalone"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.browse_spm_standalone">[docs]</a>    <span class="k">def</span> <span class="nf">browse_spm_standalone</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when spm standalone browse button is clicked.&quot;&quot;&quot;</span>

        <span class="n">fname</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Choose SPM standalone &quot;</span> <span class="s2">&quot;directory&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">fname</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_choice</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.change_admin_psswd"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.change_admin_psswd">[docs]</a>    <span class="k">def</span> <span class="nf">change_admin_psswd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method to change the admin password.</span>

<span class="sd">        :param status: String</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">change</span> <span class="o">=</span> <span class="n">QDialog</span><span class="p">()</span>
        <span class="n">change</span><span class="o">.</span><span class="n">old_psswd</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">change</span><span class="o">.</span><span class="n">new_psswd</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">change</span><span class="o">.</span><span class="n">new_psswd_conf</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;&lt;i&gt;&quot;</span> <span class="o">+</span> <span class="n">status</span> <span class="o">+</span> <span class="s2">&quot;&lt;/i&gt;&quot;</span>
        <span class="n">change</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
        <span class="n">change</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;color:red&quot;</span><span class="p">)</span>

        <span class="n">change</span><span class="o">.</span><span class="n">old_psswd</span><span class="o">.</span><span class="n">setEchoMode</span><span class="p">(</span><span class="n">QLineEdit</span><span class="o">.</span><span class="n">Password</span><span class="p">)</span>
        <span class="n">change</span><span class="o">.</span><span class="n">new_psswd</span><span class="o">.</span><span class="n">setEchoMode</span><span class="p">(</span><span class="n">QLineEdit</span><span class="o">.</span><span class="n">Password</span><span class="p">)</span>
        <span class="n">change</span><span class="o">.</span><span class="n">new_psswd_conf</span><span class="o">.</span><span class="n">setEchoMode</span><span class="p">(</span><span class="n">QLineEdit</span><span class="o">.</span><span class="n">Password</span><span class="p">)</span>

        <span class="n">buttonBox</span> <span class="o">=</span> <span class="n">QDialogButtonBox</span><span class="p">(</span>
            <span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Ok</span> <span class="o">|</span> <span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Cancel</span><span class="p">,</span> <span class="bp">self</span>
        <span class="p">)</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="n">QFormLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="s2">&quot;Old password&quot;</span><span class="p">,</span> <span class="n">change</span><span class="o">.</span><span class="n">old_psswd</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="s2">&quot;New password&quot;</span><span class="p">,</span> <span class="n">change</span><span class="o">.</span><span class="n">new_psswd</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="s2">&quot;Confirm new password&quot;</span><span class="p">,</span> <span class="n">change</span><span class="o">.</span><span class="n">new_psswd_conf</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="n">change</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">buttonBox</span><span class="p">)</span>
        <span class="n">buttonBox</span><span class="o">.</span><span class="n">accepted</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">change</span><span class="o">.</span><span class="n">accept</span><span class="p">)</span>
        <span class="n">buttonBox</span><span class="o">.</span><span class="n">rejected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">change</span><span class="o">.</span><span class="n">reject</span><span class="p">)</span>
        <span class="n">change</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">change</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">event</span><span class="p">:</span>
            <span class="n">change</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span>
            <span class="n">old_psswd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">salt</span> <span class="o">+</span> <span class="n">change</span><span class="o">.</span><span class="n">old_psswd</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">hash_psswd</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">old_psswd</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">hash_psswd</span> <span class="o">==</span> <span class="n">config</span><span class="o">.</span><span class="n">get_admin_hash</span><span class="p">()</span>
                <span class="ow">and</span> <span class="n">change</span><span class="o">.</span><span class="n">new_psswd</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">==</span> <span class="n">change</span><span class="o">.</span><span class="n">new_psswd_conf</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">change</span><span class="o">.</span><span class="n">new_psswd</span><span class="o">.</span><span class="n">text</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">6</span>
            <span class="p">):</span>
                <span class="n">new_psswd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">salt</span> <span class="o">+</span> <span class="n">change</span><span class="o">.</span><span class="n">new_psswd</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_admin_hash</span><span class="p">(</span>
                    <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">new_psswd</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">hash_psswd</span> <span class="o">!=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_admin_hash</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">change_admin_psswd</span><span class="p">(</span><span class="s2">&quot;The old password is incorrect.&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">change</span><span class="o">.</span><span class="n">new_psswd</span><span class="o">.</span><span class="n">text</span><span class="p">())</span> <span class="o">&lt;=</span> <span class="mi">6</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">change_admin_psswd</span><span class="p">(</span>
                    <span class="s2">&quot;Your password must have more than 6 &quot;</span> <span class="s2">&quot;characters&quot;</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">change</span><span class="o">.</span><span class="n">new_psswd</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">!=</span> <span class="n">change</span><span class="o">.</span><span class="n">new_psswd_conf</span><span class="o">.</span><span class="n">text</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">change_admin_psswd</span><span class="p">(</span><span class="s2">&quot;The new passwords are not the same.&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.control_checkbox_toggled"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.control_checkbox_toggled">[docs]</a>    <span class="k">def</span> <span class="nf">control_checkbox_toggled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">main_window</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if the user really wants to change the controller version.</span>

<span class="sd">        :param main_window: main window object of the software</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control_checkbox</span><span class="o">.</span><span class="n">toggle</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Warning</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Controller version change&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Warning&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">)</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">control_checkbox_changed</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span>
                <span class="s2">&quot;To change the controller from </span><span class="si">{0}</span><span class="s2"> to </span><span class="si">{1}</span><span class="s2">, &quot;</span>
                <span class="s2">&quot;MIA must be restarted. Would you like to plan &quot;</span>
                <span class="s2">&quot;this change for next &quot;</span>
                <span class="s2">&quot;start-up?&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s2">&quot;V1&quot;</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">isControlV1</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;V2&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;V2&quot;</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">isControlV1</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;V1&quot;</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span>
                <span class="s2">&quot;Change of controller from </span><span class="si">{0}</span><span class="s2"> to </span><span class="si">{1}</span><span class="s2"> is already &quot;</span>
                <span class="s2">&quot;planned for next start-up. Would you like to &quot;</span>
                <span class="s2">&quot;cancel this &quot;</span>
                <span class="s2">&quot;change?&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s2">&quot;V1&quot;</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">isControlV1</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;V2&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;V2&quot;</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">isControlV1</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;V1&quot;</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="n">return_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">return_value</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">control_checkbox_changed</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">control_checkbox_changed</span>
            <span class="n">main_window</span><span class="o">.</span><span class="n">set_controller_version</span><span class="p">()</span>

        <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpPreferences.edit_config_file"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.edit_config_file">[docs]</a>    <span class="k">def</span> <span class="nf">edit_config_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a window to view, edit the mia configuration file.&quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">editConf</span> <span class="o">=</span> <span class="n">QDialog</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_config_path</span><span class="p">(),</span> <span class="s2">&quot;config.yml&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">txt</span> <span class="o">=</span> <span class="n">QPlainTextEdit</span><span class="p">()</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span>
            <span class="n">config</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">allow_unicode</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">txt</span><span class="o">.</span><span class="n">insertPlainText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">stream</span><span class="p">))</span>
        <span class="n">textWidth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">txt</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">+</span> <span class="mi">100</span>
        <span class="n">textHeight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">txt</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">+</span> <span class="mi">200</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">txt</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="n">textWidth</span><span class="p">,</span> <span class="n">textHeight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">txt</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">textWidth</span><span class="p">,</span> <span class="n">textHeight</span><span class="p">)</span>

        <span class="n">buttonBox</span> <span class="o">=</span> <span class="n">QDialogButtonBox</span><span class="p">(</span>
            <span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Ok</span> <span class="o">|</span> <span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Cancel</span><span class="p">,</span> <span class="bp">self</span>
        <span class="p">)</span>
        <span class="n">buttonBox</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">buttonBox</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Cancel</span><span class="p">)</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">findChar_line_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">findChar_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Find&quot;</span><span class="p">)</span>
        <span class="n">findChar_button</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">h_box_find</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">h_box_find</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">findChar_line_edit</span><span class="p">)</span>
        <span class="n">h_box_find</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">findChar_button</span><span class="p">)</span>
        <span class="n">findChar_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">findChar</span><span class="p">)</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="n">QFormLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">txt</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="n">h_box_find</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">buttonBox</span><span class="p">)</span>
        <span class="n">buttonBox</span><span class="o">.</span><span class="n">accepted</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">accept</span><span class="p">)</span>
        <span class="n">buttonBox</span><span class="o">.</span><span class="n">rejected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">reject</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
        <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">event</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">stream</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">txt</span><span class="o">.</span><span class="n">toPlainText</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">verCmp</span><span class="p">(</span><span class="n">yaml</span><span class="o">.</span><span class="n">__version__</span><span class="p">,</span> <span class="s2">&quot;5.1&quot;</span><span class="p">,</span> <span class="s2">&quot;sup&quot;</span><span class="p">):</span>
                <span class="n">config</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">Loader</span><span class="o">=</span><span class="n">yaml</span><span class="o">.</span><span class="n">FullLoader</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>

            <span class="n">config</span><span class="o">.</span><span class="n">saveConfig</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpPreferences.findChar"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.findChar">[docs]</a>    <span class="k">def</span> <span class="nf">findChar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Highlights characters in red when using the Find button&#39;</span>
<span class="sd">        when editing configuration.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">txt</span><span class="o">.</span><span class="n">textCursor</span><span class="p">()</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QTextCursor</span><span class="o">.</span><span class="n">Document</span><span class="p">)</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">setCharFormat</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QTextCharFormat</span><span class="p">())</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">clearSelection</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">txt</span><span class="o">.</span><span class="n">setTextCursor</span><span class="p">(</span><span class="n">cursor</span><span class="p">)</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findChar_line_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">pattern</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">txt</span><span class="o">.</span><span class="n">textCursor</span><span class="p">()</span>
        <span class="nb">format</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTextCharFormat</span><span class="p">()</span>
        <span class="nb">format</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QBrush</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">)))</span>
        <span class="n">regex</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QRegExp</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">regex</span><span class="o">.</span><span class="n">indexIn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">txt</span><span class="o">.</span><span class="n">toPlainText</span><span class="p">(),</span> <span class="n">pos</span><span class="p">)</span>

        <span class="k">while</span> <span class="n">index</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">pattern</span><span class="p">:</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">movePosition</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QTextCursor</span><span class="o">.</span><span class="n">Right</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="n">cursor</span><span class="o">.</span><span class="n">mergeCharFormat</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="n">regex</span><span class="o">.</span><span class="n">matchedLength</span><span class="p">()</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">regex</span><span class="o">.</span><span class="n">indexIn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editConf</span><span class="o">.</span><span class="n">txt</span><span class="o">.</span><span class="n">toPlainText</span><span class="p">(),</span> <span class="n">pos</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.edit_capsul_config"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.edit_capsul_config">[docs]</a>    <span class="k">def</span> <span class="nf">edit_capsul_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Capsul engine edition</span>

<span class="sd">        This method is used when user hit the Edit CAPSUL config button (File &gt;</span>
<span class="sd">        MIA preferences, Pipeline tab).</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># from capsul.api import capsul_engine</span>
        <span class="c1"># from capsul.qt_gui.widgets.settings_editor import SettingsEditor</span>

        <span class="c1"># validate the current Mia config first</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_and_save</span><span class="p">():</span>
            <span class="k">return</span>

        <span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span>
        <span class="n">capsul_config</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_capsul_config</span><span class="p">(</span><span class="n">sync_from_engine</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">modules</span> <span class="o">=</span> <span class="n">capsul_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;engine_modules&quot;</span><span class="p">,</span> <span class="p">[])</span>

        <span class="c1"># build a temporary new engine (because it may not be validated)</span>
        <span class="n">engine</span> <span class="o">=</span> <span class="n">capsul_engine</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">module</span> <span class="ow">in</span> <span class="n">modules</span> <span class="o">+</span> <span class="p">[</span>
            <span class="s2">&quot;fom&quot;</span><span class="p">,</span>
            <span class="s2">&quot;axon&quot;</span><span class="p">,</span>
            <span class="s2">&quot;python&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fsl&quot;</span><span class="p">,</span>
            <span class="s2">&quot;freesurfer&quot;</span><span class="p">,</span>
            <span class="s2">&quot;nipype&quot;</span><span class="p">,</span>
            <span class="s2">&quot;afni&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ants&quot;</span><span class="p">,</span>
            <span class="s2">&quot;somaworkflow&quot;</span><span class="p">,</span>
        <span class="p">]:</span>
            <span class="n">engine</span><span class="o">.</span><span class="n">load_module</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>
        <span class="n">envs</span> <span class="o">=</span> <span class="n">capsul_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;engine&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">for</span> <span class="n">env</span><span class="p">,</span> <span class="n">conf</span> <span class="ow">in</span> <span class="n">envs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">c</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">conf</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;capsul_engine&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span> <span class="ow">or</span> <span class="s2">&quot;uses&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span><span class="p">[</span><span class="s2">&quot;capsul_engine&quot;</span><span class="p">]:</span>
                <span class="n">c</span><span class="p">[</span><span class="s2">&quot;capsul_engine&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;uses&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="n">engine</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">module_name</span><span class="p">(</span><span class="n">m</span><span class="p">):</span> <span class="s2">&quot;ALL&quot;</span>
                        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">conf</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="c1"># for mod, val in conf.items():</span>
            <span class="c1"># if &#39;config_id&#39; not in val:</span>
            <span class="c1"># val[&#39;config_id&#39;] = mod.split(&#39;.&#39;)[-1]</span>
            <span class="n">engine</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">import_configs</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">cont_on_error</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">dialog</span> <span class="o">=</span> <span class="n">SettingsEditor</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
            <span class="n">settings</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">export_config_dict</span><span class="p">()</span>

            <span class="n">capsul_config</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">settings</span>
            <span class="n">capsul_config</span><span class="p">[</span><span class="s2">&quot;engine_modules&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">engine</span><span class="o">.</span><span class="n">_loaded_modules</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_capsul_config</span><span class="p">(</span><span class="n">capsul_config</span><span class="p">)</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="c1"># update Mia preferences GUI which might have changed</span>

            <span class="c1"># afni</span>
            <span class="n">use_afni</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_afni</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">use_afni</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">afni_choice</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_afni_path</span><span class="p">())</span>

            <span class="n">use_afni</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span> <span class="k">if</span> <span class="n">use_afni</span> <span class="k">else</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Unchecked</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_afni_checkbox</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">use_afni</span><span class="p">)</span>

            <span class="c1"># ants</span>
            <span class="n">use_ants</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_ants</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">use_ants</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ants_choice</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_ants_path</span><span class="p">())</span>

            <span class="n">use_ants</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span> <span class="k">if</span> <span class="n">use_ants</span> <span class="k">else</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Unchecked</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_ants_checkbox</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">use_ants</span><span class="p">)</span>

            <span class="c1"># freesurfer</span>
            <span class="n">use_freesurfer</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_freesurfer</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">use_freesurfer</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">freesurfer_choice</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_freesurfer_setup</span><span class="p">())</span>

            <span class="n">use_freesurfer</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span> <span class="k">if</span> <span class="n">use_freesurfer</span> <span class="k">else</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Unchecked</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_freesurfer_checkbox</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">use_freesurfer</span><span class="p">)</span>

            <span class="c1"># fsl</span>
            <span class="n">use_fsl</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_fsl</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">use_fsl</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fsl_choice</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_fsl_config</span><span class="p">())</span>

            <span class="n">use_fsl</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span> <span class="k">if</span> <span class="n">use_fsl</span> <span class="k">else</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Unchecked</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_fsl_checkbox</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">use_fsl</span><span class="p">)</span>

            <span class="c1"># matlab</span>
            <span class="n">use_matlab</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_matlab</span><span class="p">()</span>
            <span class="n">use_matlab</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span> <span class="k">if</span> <span class="n">use_matlab</span> <span class="k">else</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Unchecked</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_checkbox</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">use_matlab</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matlab_choice</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_matlab_path</span><span class="p">())</span>
            <span class="n">use_matlab_sa</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_matlab_standalone</span><span class="p">()</span>
            <span class="n">use_matlab_sa</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span> <span class="k">if</span> <span class="n">use_matlab_sa</span> <span class="k">else</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Unchecked</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_checkbox</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">use_matlab_sa</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_choice</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
                <span class="n">config</span><span class="o">.</span><span class="n">get_matlab_standalone_path</span><span class="p">()</span>
            <span class="p">)</span>

            <span class="c1"># spm</span>
            <span class="n">use_spm</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_spm</span><span class="p">()</span>
            <span class="n">use_spm</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span> <span class="k">if</span> <span class="n">use_spm</span> <span class="k">else</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Unchecked</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_checkbox</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">use_spm</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_choice</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_spm_path</span><span class="p">())</span>
            <span class="n">use_spm_sa</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_spm_standalone</span><span class="p">()</span>
            <span class="n">use_spm_sa</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span> <span class="k">if</span> <span class="n">use_spm_sa</span> <span class="k">else</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Unchecked</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">use_spm_sa</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_choice</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
                <span class="n">config</span><span class="o">.</span><span class="n">get_spm_standalone_path</span><span class="p">()</span>
            <span class="p">)</span>

        <span class="k">del</span> <span class="n">dialog</span>
        <span class="k">del</span> <span class="n">engine</span></div>

<div class="viewcode-block" id="PopUpPreferences.validate_and_save"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.validate_and_save">[docs]</a>    <span class="k">def</span> <span class="nf">validate_and_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">OK_clicked</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Saves the modifications to the config file and apply them.</span>

<span class="sd">        :param OK_clicked: a boolean. If False, only make a minimal backup of</span>
<span class="sd">                           the settings to allow synchronisation with</span>
<span class="sd">                           capsul config. If True, should only correspond to</span>
<span class="sd">                           the moment when we finally exit the Mia config, all</span>
<span class="sd">                           parameters are saved and tested.</span>

<span class="sd">        :return: True if all is fine, False if a problem has been encountered</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span>
        <span class="c1"># Minimum config backup (for Edit CAPSUL config synchronisation):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">OK_clicked</span><span class="p">:</span>
            <span class="c1"># Use AFNI</span>
            <span class="n">afni_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">afni_choice</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set_afni_path</span><span class="p">(</span><span class="n">afni_dir</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_afni_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_afni</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_afni</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># Use ANTS</span>
            <span class="n">ants_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ants_choice</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set_ants_path</span><span class="p">(</span><span class="n">ants_dir</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_ants_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_ants</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_ants</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># Use freesurfer</span>
            <span class="n">freesurfer_setup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">freesurfer_choice</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set_freesurfer_setup</span><span class="p">(</span><span class="n">freesurfer_setup</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_freesurfer_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_freesurfer</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_freesurfer</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># Use FSL</span>
            <span class="n">fsl_conf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fsl_choice</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set_fsl_config</span><span class="p">(</span><span class="n">fsl_conf</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_fsl_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_fsl</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_fsl</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># Use Matlab</span>
            <span class="n">matlab_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matlab_choice</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set_matlab_path</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># Use Matlab Runtime:</span>
            <span class="n">matlab_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_choice</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set_matlab_standalone_path</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab_standalone</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab_standalone</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># Use SPM</span>
            <span class="n">spm_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spm_choice</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set_spm_path</span><span class="p">(</span><span class="n">spm_input</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># Use SPM standalone</span>
            <span class="n">spm_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_choice</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set_spm_standalone_path</span><span class="p">(</span><span class="n">spm_input</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm_standalone</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm_standalone</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># complete backup and testing</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Auto-save</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">config</span><span class="o">.</span><span class="n">setAutoSave</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">setAutoSave</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># RadioView in miniviewer (databrowser)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">radioView_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_radioView</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_radioView</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># Version 1 controller</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">control_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">config</span><span class="o">.</span><span class="n">setControlV1</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">setControlV1</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># Max thumbnails number at the data browser bottom</span>
            <span class="n">max_thumbnails</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_thumbnails_box</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">15</span><span class="p">)</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set_max_thumbnails</span><span class="p">(</span><span class="n">max_thumbnails</span><span class="p">)</span>

            <span class="c1"># Max projects in &quot;Saved projects&quot;</span>
            <span class="n">max_projects</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_projects_box</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">20</span><span class="p">)</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set_max_projects</span><span class="p">(</span><span class="n">max_projects</span><span class="p">)</span>

            <span class="c1"># User / Admin mode</span>
            <span class="n">main_window</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_window</span>
            <span class="n">main_window</span><span class="o">.</span><span class="n">windowName</span> <span class="o">=</span> <span class="s2">&quot;MIA - Multiparametric Image Analysis&quot;</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">admin_mode_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_user_mode</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">main_window</span><span class="o">.</span><span class="n">windowName</span> <span class="o">+=</span> <span class="s2">&quot; (Admin mode)&quot;</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_user_mode</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="c1"># Clinical mode</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">clinical_mode_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_clinical_mode</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">use_clinical_mode_signal</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_clinical_mode</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">not_use_clinical_mode_signal</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

            <span class="c1"># Window name</span>
            <span class="n">main_window</span><span class="o">.</span><span class="n">windowName</span> <span class="o">+=</span> <span class="s2">&quot; - &quot;</span>
            <span class="n">main_window</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span>
                <span class="n">main_window</span><span class="o">.</span><span class="n">windowName</span> <span class="o">+</span> <span class="n">main_window</span><span class="o">.</span><span class="n">projectName</span>
            <span class="p">)</span>

            <span class="c1"># Configuration test</span>
            <span class="n">QApplication</span><span class="o">.</span><span class="n">setOverrideCursor</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WaitCursor</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">status_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Testing configuration ...&quot;</span><span class="p">)</span>
            <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">processEvents</span><span class="p">()</span>

            <span class="c1"># AFNI config test</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_afni_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">afni_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">afni_choice</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="n">afni_cmd</span> <span class="o">=</span> <span class="s2">&quot;afni&quot;</span>

                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">afni_dir</span><span class="p">):</span>
                    <span class="n">afni_cmd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">afni_dir</span><span class="p">,</span> <span class="n">afni_cmd</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">afni_dir</span><span class="p">,</span> <span class="s2">&quot;AFNI&quot;</span><span class="p">)</span>
                    <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                    <span class="k">return</span> <span class="kc">False</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
                        <span class="p">[</span><span class="n">afni_cmd</span><span class="p">,</span> <span class="s2">&quot;-version&quot;</span><span class="p">],</span>
                        <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                        <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                        <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">output</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>

                    <span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">:</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_afni_path</span><span class="p">(</span><span class="n">afni_dir</span><span class="p">)</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_afni</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">afni_dir</span><span class="p">,</span> <span class="s2">&quot;AFNI&quot;</span><span class="p">)</span>
                        <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                        <span class="k">return</span> <span class="kc">False</span>

                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">afni_dir</span><span class="p">,</span> <span class="s2">&quot;AFNI&quot;</span><span class="p">)</span>
                    <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                    <span class="k">return</span> <span class="kc">False</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_afni</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># ANTS config test</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_ants_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">ants_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ants_choice</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="n">ants_cmd</span> <span class="o">=</span> <span class="s2">&quot;SmoothImage&quot;</span>

                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">ants_dir</span><span class="p">):</span>
                    <span class="n">ants_cmd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ants_dir</span><span class="p">,</span> <span class="n">ants_cmd</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">ants_dir</span><span class="p">,</span> <span class="s2">&quot;ANTS&quot;</span><span class="p">)</span>
                    <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                    <span class="k">return</span> <span class="kc">False</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
                        <span class="p">[</span><span class="n">ants_cmd</span><span class="p">,</span> <span class="s2">&quot;-version&quot;</span><span class="p">],</span>
                        <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                        <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                        <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">output</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>

                    <span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">:</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_ants_path</span><span class="p">(</span><span class="n">ants_dir</span><span class="p">)</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_ants</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">ants_dir</span><span class="p">,</span> <span class="s2">&quot;ANTS&quot;</span><span class="p">)</span>
                        <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                        <span class="k">return</span> <span class="kc">False</span>

                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">ants_dir</span><span class="p">,</span> <span class="s2">&quot;ANTS&quot;</span><span class="p">)</span>
                    <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                    <span class="k">return</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_ants</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># freesurfer config test</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_freesurfer_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">freesurfer_setup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">freesurfer_choice</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="n">freesurfer_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">freesurfer_setup</span><span class="p">)</span>

                <span class="k">if</span> <span class="s2">&quot;FREESURFER_HOME&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;FREESURFER_HOME&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">freesurfer_dir</span>

                <span class="n">freesurfer_cmd</span> <span class="o">=</span> <span class="s2">&quot;recon-all&quot;</span>

                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">freesurfer_dir</span><span class="p">):</span>
                    <span class="n">freesurfer_cmd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                        <span class="n">freesurfer_dir</span><span class="p">,</span> <span class="s2">&quot;bin&quot;</span><span class="p">,</span> <span class="n">freesurfer_cmd</span>
                    <span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">freesurfer_dir</span><span class="p">,</span> <span class="s2">&quot;freesurfer&quot;</span><span class="p">)</span>
                    <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                    <span class="k">return</span> <span class="kc">False</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
                        <span class="p">[</span><span class="n">freesurfer_cmd</span><span class="p">,</span> <span class="s2">&quot;--version&quot;</span><span class="p">],</span>
                        <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                        <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                        <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">output</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>

                    <span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">:</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_freesurfer_setup</span><span class="p">(</span><span class="n">freesurfer_setup</span><span class="p">)</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_freesurfer</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">freesurfer_dir</span><span class="p">,</span> <span class="s2">&quot;freesurfer&quot;</span><span class="p">)</span>
                        <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                        <span class="k">return</span> <span class="kc">False</span>

                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">freesurfer_dir</span><span class="p">,</span> <span class="s2">&quot;freesurfer&quot;</span><span class="p">)</span>
                    <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                    <span class="k">return</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_freesurfer</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># FSL config test</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_fsl_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">fsl_conf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fsl_choice</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

                <span class="k">if</span> <span class="n">fsl_conf</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                    <span class="n">fsl_cmd</span> <span class="o">=</span> <span class="s2">&quot;flirt&quot;</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fsl_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">fsl_conf</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">fsl_dir</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;etc&quot;</span><span class="p">,</span> <span class="s2">&quot;fslconf&quot;</span><span class="p">)):</span>
                        <span class="n">fsl_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">fsl_dir</span><span class="p">))</span>

                    <span class="k">elif</span> <span class="n">fsl_dir</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;etc&quot;</span><span class="p">):</span>
                        <span class="n">fsl_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">fsl_dir</span><span class="p">)</span>

                    <span class="n">fsl_cmd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fsl_dir</span><span class="p">,</span> <span class="s2">&quot;bin&quot;</span><span class="p">,</span> <span class="s2">&quot;flirt&quot;</span><span class="p">)</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
                        <span class="p">[</span><span class="n">fsl_cmd</span><span class="p">,</span> <span class="s2">&quot;-version&quot;</span><span class="p">],</span>
                        <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                        <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                        <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">output</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>

                    <span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">:</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_fsl_config</span><span class="p">(</span><span class="n">fsl_conf</span><span class="p">)</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_fsl</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">fsl_conf</span><span class="p">,</span> <span class="s2">&quot;FSL&quot;</span><span class="p">,</span> <span class="s2">&quot;config file&quot;</span><span class="p">)</span>
                        <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                        <span class="k">return</span> <span class="kc">False</span>

                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">fsl_conf</span><span class="p">,</span> <span class="s2">&quot;FSL&quot;</span><span class="p">,</span> <span class="s2">&quot;config file&quot;</span><span class="p">)</span>
                    <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                    <span class="k">return</span> <span class="kc">False</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_use_fsl</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># SPM &amp; Matlab (license) config test</span>
            <span class="n">matlab_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matlab_choice</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">spm_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spm_choice</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="n">matlab_input</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">spm_input</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span>
            <span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">,</span> <span class="s2">&quot;Matlab&quot;</span><span class="p">)</span>
                    <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                    <span class="k">return</span> <span class="kc">False</span>

                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">matlab_input</span> <span class="o">==</span> <span class="n">config</span><span class="o">.</span><span class="n">get_matlab_path</span><span class="p">()</span>
                    <span class="ow">and</span> <span class="n">spm_input</span> <span class="o">==</span> <span class="n">config</span><span class="o">.</span><span class="n">get_spm_path</span><span class="p">()</span>
                <span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab_standalone</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm_standalone</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">spm_input</span><span class="p">):</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">matlab_cmd</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="s2">&quot;restoredefaultpath; &quot;</span>
                            <span class="s2">&quot;addpath(&#39;&quot;</span> <span class="o">+</span> <span class="n">spm_input</span> <span class="o">+</span> <span class="s2">&quot;&#39;); &quot;</span>
                            <span class="s2">&quot;[name, ~]=spm(&#39;Ver&#39;); &quot;</span>
                            <span class="s2">&quot;exit&quot;</span>
                        <span class="p">)</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
                            <span class="p">[</span>
                                <span class="n">matlab_input</span><span class="p">,</span>
                                <span class="s2">&quot;-nodisplay&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;-nodesktop&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;-nosplash&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;-singleCompThread&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;-r&quot;</span><span class="p">,</span>
                                <span class="n">matlab_cmd</span><span class="p">,</span>
                            <span class="p">],</span>
                            <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                            <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                            <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="n">output</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>

                        <span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">:</span>
                            <span class="n">config</span><span class="o">.</span><span class="n">set_matlab_path</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">)</span>

                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                                <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                                <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab_standalone</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                                <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                                <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm_standalone</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

                            <span class="n">config</span><span class="o">.</span><span class="n">set_spm_path</span><span class="p">(</span><span class="n">spm_input</span><span class="p">)</span>

                        <span class="k">elif</span> <span class="s2">&quot;spm&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">spm_input</span><span class="p">,</span> <span class="s2">&quot;SPM&quot;</span><span class="p">)</span>
                            <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                            <span class="k">return</span> <span class="kc">False</span>

                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">,</span> <span class="s2">&quot;Matlab&quot;</span><span class="p">)</span>
                            <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                            <span class="k">return</span> <span class="kc">False</span>

                    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">,</span> <span class="s2">&quot;Matlab&quot;</span><span class="p">)</span>
                        <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                        <span class="k">return</span> <span class="kc">False</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">spm_input</span><span class="p">,</span> <span class="s2">&quot;SPM&quot;</span><span class="p">)</span>
                    <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                    <span class="k">return</span> <span class="kc">False</span>

            <span class="c1"># Matlab alone config test</span>
            <span class="k">if</span> <span class="n">matlab_input</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">matlab_input</span> <span class="o">==</span> <span class="n">config</span><span class="o">.</span><span class="n">get_matlab_path</span><span class="p">():</span>
                    <span class="k">if</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
                        <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
                    <span class="p">):</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab_standalone</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm_standalone</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">):</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">matlab_cmd</span> <span class="o">=</span> <span class="s2">&quot;ver; exit&quot;</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
                            <span class="p">[</span>
                                <span class="n">matlab_input</span><span class="p">,</span>
                                <span class="s2">&quot;-nodisplay&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;-nodesktop&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;-nosplash&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;-singleCompThread&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;-r&quot;</span><span class="p">,</span>
                                <span class="n">matlab_cmd</span><span class="p">,</span>
                            <span class="p">],</span>
                            <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                            <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                            <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="n">output</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>

                        <span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">:</span>
                            <span class="n">config</span><span class="o">.</span><span class="n">set_matlab_path</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">)</span>

                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                                <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                                <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab_standalone</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                                <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                                <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm_standalone</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">,</span> <span class="s2">&quot;Matlab&quot;</span><span class="p">)</span>
                            <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                            <span class="k">return</span> <span class="kc">False</span>

                    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">,</span> <span class="s2">&quot;Matlab&quot;</span><span class="p">)</span>
                        <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                        <span class="k">return</span> <span class="kc">False</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">,</span> <span class="s2">&quot;Matlab&quot;</span><span class="p">)</span>
                    <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                    <span class="k">return</span> <span class="kc">False</span>

            <span class="c1"># SPM (standalone) &amp; Matlab (MCR) config test</span>
            <span class="n">spm_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_choice</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">matlab_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_choice</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">archi</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">architecture</span><span class="p">()</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="n">matlab_input</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">spm_input</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span>
            <span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span>
                    <span class="s2">&quot;Windows&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">archi</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">,</span> <span class="s2">&quot;Matlab standalone&quot;</span><span class="p">)</span>
                    <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                    <span class="k">return</span> <span class="kc">False</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">matlab_input</span> <span class="o">==</span> <span class="n">config</span><span class="o">.</span><span class="n">get_matlab_standalone_path</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span>
                    <span class="n">spm_input</span> <span class="o">==</span> <span class="n">config</span><span class="o">.</span><span class="n">get_spm_standalone_path</span><span class="p">()</span>
                <span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm_standalone</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

                        <span class="k">if</span> <span class="s2">&quot;Windows&quot;</span> <span class="ow">in</span> <span class="n">archi</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                            <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                            <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab_standalone</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab_standalone</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">spm_input</span><span class="p">):</span>
                    <span class="k">if</span> <span class="s2">&quot;Windows&quot;</span> <span class="ow">in</span> <span class="n">archi</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="n">mcr</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span>
                            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">spm_input</span><span class="p">,</span> <span class="s2">&quot;spm*_win*.exe&quot;</span><span class="p">)</span>
                        <span class="p">)</span>
                        <span class="n">pos</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                        <span class="n">nb_bit_sys</span> <span class="o">=</span> <span class="n">archi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mcr</span><span class="p">)):</span>
                            <span class="n">spm_path</span><span class="p">,</span> <span class="n">spm_file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">mcr</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

                            <span class="k">if</span> <span class="n">nb_bit_sys</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="n">spm_file_name</span><span class="p">:</span>
                                <span class="n">pos</span> <span class="o">=</span> <span class="n">i</span>

                        <span class="k">if</span> <span class="n">pos</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">spm_input</span><span class="p">,</span> <span class="s2">&quot;SPM standalone&quot;</span><span class="p">)</span>
                            <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                            <span class="k">return</span> <span class="kc">False</span>

                    <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">):</span>
                        <span class="n">mcr</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">spm_input</span><span class="p">,</span> <span class="s2">&quot;run_spm*.sh&quot;</span><span class="p">))</span>

                    <span class="k">if</span> <span class="n">mcr</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="k">if</span> <span class="s2">&quot;Windows&quot;</span> <span class="ow">in</span> <span class="n">archi</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
                                    <span class="p">[</span><span class="n">mcr</span><span class="p">[</span><span class="n">pos</span><span class="p">],</span> <span class="s2">&quot;--version&quot;</span><span class="p">],</span>
                                    <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                                    <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                                    <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                                <span class="p">)</span>

                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
                                    <span class="p">[</span><span class="n">mcr</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">matlab_input</span><span class="p">,</span> <span class="s2">&quot;--version&quot;</span><span class="p">],</span>
                                    <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                                    <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                                    <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                                <span class="p">)</span>

                            <span class="n">output</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>

                            <span class="k">if</span> <span class="p">(</span>
                                <span class="n">err</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">output</span> <span class="o">!=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
                            <span class="p">)</span> <span class="ow">or</span> <span class="n">output</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;SPM8 &quot;</span><span class="p">):</span>
                                <span class="c1"># spm8 standalone doesn&#39;t accept --version</span>
                                <span class="c1"># argument but prints a message that we can</span>
                                <span class="c1"># interpret as saying that SPM8 is working</span>
                                <span class="c1"># anyway.</span>

                                <span class="k">if</span> <span class="p">(</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span><span class="o">.</span><span class="n">isChecked</span>
                                <span class="p">)():</span>
                                    <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm_standalone</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                                    <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab_standalone</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

                                <span class="n">config</span><span class="o">.</span><span class="n">set_spm_standalone_path</span><span class="p">(</span><span class="n">spm_input</span><span class="p">)</span>
                                <span class="n">config</span><span class="o">.</span><span class="n">set_matlab_standalone_path</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">)</span>

                            <span class="k">elif</span> <span class="p">(</span>
                                <span class="p">(</span><span class="n">err</span> <span class="o">!=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                                <span class="ow">and</span> <span class="p">(</span><span class="sa">b</span><span class="s2">&quot;version&quot;</span> <span class="ow">in</span> <span class="n">output</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">2</span><span class="p">:])</span>
                                <span class="ow">and</span> <span class="p">(</span><span class="sa">b</span><span class="s2">&quot;(standalone)&quot;</span> <span class="ow">in</span> <span class="n">output</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">2</span><span class="p">:])</span>
                            <span class="p">):</span>
                                <span class="k">if</span> <span class="p">(</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span><span class="o">.</span><span class="n">isChecked</span>
                                <span class="p">)():</span>
                                    <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm_standalone</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                                    <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab_standalone</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                                <span class="n">config</span><span class="o">.</span><span class="n">set_spm_standalone_path</span><span class="p">(</span><span class="n">spm_input</span><span class="p">)</span>
                                <span class="n">config</span><span class="o">.</span><span class="n">set_matlab_standalone_path</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">)</span>

                                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">err</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
                                    <span class="n">err</span> <span class="o">=</span> <span class="n">err</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>

                                <span class="nb">print</span><span class="p">(</span>
                                    <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Warning: The configuration for Matlab&quot;</span>
                                    <span class="s2">&quot; MCR and SPM standalone as defined in&quot;</span>
                                    <span class="s2">&quot; Mia&#39;s preferences seems to be valid &quot;</span>
                                    <span class="s2">&quot;but the following issue has been &quot;</span>
                                    <span class="s2">&quot;detected:</span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">Please fix this issue&quot;</span>
                                    <span class="s2">&quot; to avoid a malfunction ...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
                                <span class="p">)</span>

                            <span class="k">elif</span> <span class="n">err</span> <span class="o">!=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">:</span>
                                <span class="k">if</span> <span class="s2">&quot;shared libraries&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">):</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span>
                                        <span class="n">matlab_input</span><span class="p">,</span> <span class="s2">&quot;Matlab standalone&quot;</span>
                                    <span class="p">)</span>
                                    <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                                    <span class="k">return</span> <span class="kc">False</span>

                                <span class="k">else</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span>
                                        <span class="n">spm_input</span><span class="p">,</span> <span class="s2">&quot;SPM standalone&quot;</span>
                                    <span class="p">)</span>
                                    <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                                    <span class="k">return</span> <span class="kc">False</span>

                            <span class="k">else</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">spm_input</span><span class="p">,</span> <span class="s2">&quot;SPM standalone&quot;</span><span class="p">)</span>
                                <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                                <span class="k">return</span> <span class="kc">False</span>

                        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">spm_input</span><span class="p">,</span> <span class="s2">&quot;SPM standalone&quot;</span><span class="p">)</span>
                            <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                            <span class="k">return</span> <span class="kc">False</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">spm_input</span><span class="p">,</span> <span class="s2">&quot;SPM standalone&quot;</span><span class="p">)</span>
                        <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                        <span class="k">return</span> <span class="kc">False</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">spm_input</span><span class="p">,</span> <span class="s2">&quot;SPM standalone&quot;</span><span class="p">)</span>
                    <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                    <span class="k">return</span> <span class="kc">False</span>

            <span class="c1"># Matlab (MCR) alone config test</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">matlab_input</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span>
                <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
            <span class="p">):</span>
                <span class="k">if</span> <span class="s2">&quot;Windows&quot;</span> <span class="ow">in</span> <span class="n">archi</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="nb">print</span><span class="p">(</span>
                        <span class="s2">&quot;WARNING: Matlab Standalone Path enter, this &quot;</span>
                        <span class="s2">&quot;is unnecessary to use SPM12.&quot;</span>
                    <span class="p">)</span>
                    <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab_standalone</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                    <span class="n">config</span><span class="o">.</span><span class="n">set_matlab_standalone_path</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">):</span>
                    <span class="k">if</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
                        <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
                    <span class="p">):</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab_standalone</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_matlab_standalone_path</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">)</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_matlab</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm_standalone</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                        <span class="n">config</span><span class="o">.</span><span class="n">set_use_spm</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">wrong_path</span><span class="p">(</span><span class="n">matlab_input</span><span class="p">,</span> <span class="s2">&quot;Matlab standalone&quot;</span><span class="p">)</span>
                    <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                    <span class="k">return</span> <span class="kc">False</span>

            <span class="c1"># Colors</span>
            <span class="n">background_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">background_color_combo</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
            <span class="n">text_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_color_combo</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
            <span class="n">config</span><span class="o">.</span><span class="n">setBackgroundColor</span><span class="p">(</span><span class="n">background_color</span><span class="p">)</span>
            <span class="n">config</span><span class="o">.</span><span class="n">setTextColor</span><span class="p">(</span><span class="n">text_color</span><span class="p">)</span>
            <span class="n">main_window</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span>
                <span class="s2">&quot;background-color:&quot;</span>
                <span class="o">+</span> <span class="n">background_color</span>
                <span class="o">+</span> <span class="s2">&quot;;color:&quot;</span>
                <span class="o">+</span> <span class="n">text_color</span>
                <span class="o">+</span> <span class="s2">&quot;;&quot;</span>
            <span class="p">)</span>

            <span class="c1"># main window setup</span>
            <span class="n">fullscreen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fullscreen_cbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set_mainwindow_maximized</span><span class="p">(</span><span class="n">fullscreen</span><span class="p">)</span>
            <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mainwindow_size_x_spinbox</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
            <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mainwindow_size_y_spinbox</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set_mainwindow_size</span><span class="p">([</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">])</span>

            <span class="k">if</span> <span class="n">fullscreen</span><span class="p">:</span>
                <span class="n">main_window</span><span class="o">.</span><span class="n">showMaximized</span><span class="p">()</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">main_window</span><span class="o">.</span><span class="n">showNormal</span><span class="p">()</span>

            <span class="c1"># Projects folder</span>
            <span class="n">projects_folder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">projects_save_path_line_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">projects_folder</span><span class="p">):</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_projects_save_path</span><span class="p">(</span><span class="n">projects_folder</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Critical</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Invalid projects folder path&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span>
                    <span class="s2">&quot;The projects folder path entered &quot;</span>
                    <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> is &quot;</span>
                    <span class="s2">&quot;invalid.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">projects_folder</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">buttonClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">False</span>

            <span class="c1"># MRIFileManager.jar path</span>
            <span class="n">mri_conv_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mri_conv_path_line_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">mri_conv_path</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Warning</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Empty MRIFileManager.jar path&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span>
                    <span class="s2">&quot;No path has been entered for &quot;</span> <span class="s2">&quot;MRIFileManager.jar.&quot;</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Warning&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">buttonClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_mri_conv_path</span><span class="p">(</span><span class="n">mri_conv_path</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">mri_conv_path</span><span class="p">):</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_mri_conv_path</span><span class="p">(</span><span class="n">mri_conv_path</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Critical</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Invalid MRIFileManager.jar path&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span>
                    <span class="s2">&quot;The MRIFileManager.jar path &quot;</span>
                    <span class="s2">&quot;entered </span><span class="si">{0}</span><span class="s2"> &quot;</span>
                    <span class="s2">&quot;is invalid.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mri_conv_path</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">buttonClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">False</span>

            <span class="c1"># Resources folder</span>
            <span class="n">resources_folder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resources_path_line_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">resources_folder</span><span class="p">):</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set_resources_path</span><span class="p">(</span><span class="n">resources_folder</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Critical</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Invalid resources folder path&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span>
                    <span class="s2">&quot;The resources folder path entered &quot;</span>
                    <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> is &quot;</span>
                    <span class="s2">&quot;invalid.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">resources_folder</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">buttonClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">False</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">signal_preferences_change</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>

        <span class="n">c_c</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;capsul_config&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">c_e</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_capsul_engine</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">c_c</span> <span class="ow">and</span> <span class="n">c_e</span><span class="p">:</span>
            <span class="c1"># sync capsul config from mia config, if module is not used:</span>

            <span class="c1"># AFNI CapsulConfig</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_afni</span><span class="p">():</span>
                <span class="c1"># TODO: We only deal here with the global environment</span>
                <span class="n">cif</span> <span class="o">=</span> <span class="n">c_e</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">config_id_field</span>

                <span class="k">with</span> <span class="n">c_e</span><span class="o">.</span><span class="n">settings</span> <span class="k">as</span> <span class="n">settings</span><span class="p">:</span>
                    <span class="n">configafni</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="s2">&quot;afni&quot;</span><span class="p">,</span> <span class="s2">&quot;global&quot;</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">configafni</span><span class="p">:</span>
                        <span class="n">settings</span><span class="o">.</span><span class="n">remove_config</span><span class="p">(</span>
                            <span class="s2">&quot;afni&quot;</span><span class="p">,</span> <span class="s2">&quot;global&quot;</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">configafni</span><span class="p">,</span> <span class="n">cif</span><span class="p">)</span>
                        <span class="p">)</span>

                <span class="c1"># TODO: We could use a generic method to deal with c_c?</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span><span class="s2">&quot;capsul.engine.module.afni&quot;</span><span class="p">][</span>
                        <span class="s2">&quot;afni&quot;</span>
                    <span class="p">][</span><span class="s2">&quot;directory&quot;</span><span class="p">]</span>

                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>

            <span class="c1"># ANTS CapsulConfig</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_ants</span><span class="p">():</span>
                <span class="c1"># TODO: We only deal here with the global environment</span>
                <span class="n">cif</span> <span class="o">=</span> <span class="n">c_e</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">config_id_field</span>

                <span class="k">with</span> <span class="n">c_e</span><span class="o">.</span><span class="n">settings</span> <span class="k">as</span> <span class="n">settings</span><span class="p">:</span>
                    <span class="n">configants</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="s2">&quot;ants&quot;</span><span class="p">,</span> <span class="s2">&quot;global&quot;</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">configants</span><span class="p">:</span>
                        <span class="n">settings</span><span class="o">.</span><span class="n">remove_config</span><span class="p">(</span>
                            <span class="s2">&quot;ants&quot;</span><span class="p">,</span> <span class="s2">&quot;global&quot;</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">configants</span><span class="p">,</span> <span class="n">cif</span><span class="p">)</span>
                        <span class="p">)</span>

                <span class="c1"># TODO: We could use a generic method to deal with c_c?</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span><span class="s2">&quot;capsul.engine.module.ants&quot;</span><span class="p">][</span>
                        <span class="s2">&quot;ants&quot;</span>
                    <span class="p">][</span><span class="s2">&quot;directory&quot;</span><span class="p">]</span>

                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>

            <span class="c1"># freesurfer CapsulConfig</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_freesurfer</span><span class="p">():</span>
                <span class="c1"># TODO: We only deal here with the global environment</span>
                <span class="n">cif</span> <span class="o">=</span> <span class="n">c_e</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">config_id_field</span>

                <span class="k">with</span> <span class="n">c_e</span><span class="o">.</span><span class="n">settings</span> <span class="k">as</span> <span class="n">settings</span><span class="p">:</span>
                    <span class="n">configants</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="s2">&quot;freesurfer&quot;</span><span class="p">,</span> <span class="s2">&quot;global&quot;</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">configants</span><span class="p">:</span>
                        <span class="n">settings</span><span class="o">.</span><span class="n">remove_config</span><span class="p">(</span>
                            <span class="s2">&quot;freesurfer&quot;</span><span class="p">,</span> <span class="s2">&quot;global&quot;</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">configants</span><span class="p">,</span> <span class="n">cif</span><span class="p">)</span>
                        <span class="p">)</span>

                <span class="c1"># TODO: We could use a generic method to deal with c_c?</span>
                <span class="c1"># try:</span>
                <span class="c1">#     del c_c[&quot;engine&quot;][&quot;global&quot;][</span>
                <span class="c1">#         &quot;capsul.engine.module.freesurfer&quot;</span>
                <span class="c1">#         ][&quot;freesurfer&quot;</span>
                <span class="c1">#          ][&quot;directory&quot;]</span>
                <span class="c1">#</span>
                <span class="c1"># except KeyError:</span>
                <span class="c1">#     pass</span>

            <span class="c1"># FSL CapsulConfig</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_fsl</span><span class="p">():</span>
                <span class="c1"># TODO: We only deal here with the global environment</span>
                <span class="n">cif</span> <span class="o">=</span> <span class="n">c_e</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">config_id_field</span>

                <span class="k">with</span> <span class="n">c_e</span><span class="o">.</span><span class="n">settings</span> <span class="k">as</span> <span class="n">settings</span><span class="p">:</span>
                    <span class="n">configfsl</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="s2">&quot;fsl&quot;</span><span class="p">,</span> <span class="s2">&quot;global&quot;</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">configfsl</span><span class="p">:</span>
                        <span class="n">settings</span><span class="o">.</span><span class="n">remove_config</span><span class="p">(</span>
                            <span class="s2">&quot;fsl&quot;</span><span class="p">,</span> <span class="s2">&quot;global&quot;</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">configfsl</span><span class="p">,</span> <span class="n">cif</span><span class="p">)</span>
                        <span class="p">)</span>

                <span class="c1"># TODO: We could use a generic method to deal with c_c?</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span><span class="s2">&quot;capsul.engine.module.fsl&quot;</span><span class="p">][</span>
                        <span class="s2">&quot;fsl&quot;</span>
                    <span class="p">][</span><span class="s2">&quot;directory&quot;</span><span class="p">]</span>

                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span><span class="s2">&quot;capsul.engine.module.fsl&quot;</span><span class="p">][</span>
                        <span class="s2">&quot;fsl&quot;</span>
                    <span class="p">][</span><span class="s2">&quot;config&quot;</span><span class="p">]</span>

                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>

            <span class="c1"># SPM standalone CapsulConfig</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_spm_standalone</span><span class="p">():</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">keys</span> <span class="o">=</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span>
                        <span class="s2">&quot;capsul.engine.module.spm&quot;</span>
                    <span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dict4clean</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
                        <span class="k">if</span> <span class="p">(</span>
                            <span class="s2">&quot;standalone&quot;</span>
                            <span class="ow">in</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span>
                                <span class="s2">&quot;capsul.engine.module.spm&quot;</span>
                            <span class="p">][</span><span class="n">i</span><span class="p">]</span>
                        <span class="p">):</span>
                            <span class="k">if</span> <span class="p">(</span>
                                <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span>
                                    <span class="s2">&quot;capsul.engine.module.spm&quot;</span>
                                <span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;standalone&quot;</span><span class="p">]</span>
                                <span class="ow">is</span> <span class="kc">True</span>
                            <span class="p">):</span>
                                <span class="n">dict4clean</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

                        <span class="k">else</span><span class="p">:</span>
                            <span class="c1"># TODO: What we do if standalone is not a key ?</span>
                            <span class="k">pass</span>

                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dict4clean</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">dict4clean</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                            <span class="k">del</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span>
                                <span class="s2">&quot;capsul.engine.module.spm&quot;</span>
                            <span class="p">][</span><span class="n">i</span><span class="p">]</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_spm</span><span class="p">():</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">keys</span> <span class="o">=</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span>
                        <span class="s2">&quot;capsul.engine.module.spm&quot;</span>
                    <span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dict4clean</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
                        <span class="k">if</span> <span class="p">(</span>
                            <span class="s2">&quot;standalone&quot;</span>
                            <span class="ow">in</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span>
                                <span class="s2">&quot;capsul.engine.module.spm&quot;</span>
                            <span class="p">][</span><span class="n">i</span><span class="p">]</span>
                        <span class="p">):</span>
                            <span class="k">if</span> <span class="p">(</span>
                                <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span>
                                    <span class="s2">&quot;capsul.engine.module.spm&quot;</span>
                                <span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;standalone&quot;</span><span class="p">]</span>
                                <span class="ow">is</span> <span class="kc">False</span>
                            <span class="p">):</span>
                                <span class="n">dict4clean</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dict4clean</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">dict4clean</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                            <span class="k">del</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span>
                                <span class="s2">&quot;capsul.engine.module.spm&quot;</span>
                            <span class="p">][</span><span class="n">i</span><span class="p">]</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span><span class="s2">&quot;capsul.engine.module.spm&quot;</span><span class="p">]:</span>
                    <span class="k">del</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span><span class="s2">&quot;capsul.engine.module.spm&quot;</span><span class="p">]</span>

            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">pass</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_matlab</span><span class="p">():</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">keys</span> <span class="o">=</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span>
                        <span class="s2">&quot;capsul.engine.module.matlab&quot;</span>
                    <span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dict4clean</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
                        <span class="k">if</span> <span class="p">(</span>
                            <span class="s2">&quot;executable&quot;</span>
                            <span class="ow">in</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span>
                                <span class="s2">&quot;capsul.engine.module.matlab&quot;</span>
                            <span class="p">][</span><span class="n">i</span><span class="p">]</span>
                        <span class="p">):</span>
                            <span class="n">dict4clean</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dict4clean</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">dict4clean</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                            <span class="k">del</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span>
                                <span class="s2">&quot;capsul.engine.module.matlab&quot;</span>
                            <span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;executable&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get_use_matlab_standalone</span><span class="p">():</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">keys</span> <span class="o">=</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span>
                        <span class="s2">&quot;capsul.engine.module.matlab&quot;</span>
                    <span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dict4clean</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
                        <span class="k">if</span> <span class="p">(</span>
                            <span class="s2">&quot;mcr_directory&quot;</span>
                            <span class="ow">in</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span>
                                <span class="s2">&quot;capsul.engine.module.matlab&quot;</span>
                            <span class="p">][</span><span class="n">i</span><span class="p">]</span>
                        <span class="p">):</span>
                            <span class="n">dict4clean</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dict4clean</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">dict4clean</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                            <span class="k">del</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span>
                                <span class="s2">&quot;capsul.engine.module.matlab&quot;</span>
                            <span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;mcr_directory&quot;</span><span class="p">]</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span><span class="s2">&quot;capsul.engine.module.matlab&quot;</span><span class="p">]:</span>
                    <span class="k">del</span> <span class="n">c_c</span><span class="p">[</span><span class="s2">&quot;engine&quot;</span><span class="p">][</span><span class="s2">&quot;global&quot;</span><span class="p">][</span><span class="s2">&quot;capsul.engine.module.matlab&quot;</span><span class="p">]</span>

            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">pass</span>

            <span class="c1"># if not config.get_use_spm_standalone():</span>
            <span class="c1">#</span>
            <span class="c1">#     try:</span>
            <span class="c1">#         del c_c[&#39;engine&#39;][&#39;global&#39;][</span>
            <span class="c1">#             &#39;capsul.engine.module.spm&#39;][</span>
            <span class="c1">#                                    &#39;spm12-standalone&#39;]</span>
            <span class="c1">#</span>
            <span class="c1">#     except KeyError:</span>
            <span class="c1">#         pass</span>
            <span class="c1">#</span>
            <span class="c1">#     # try:</span>
            <span class="c1">#     #     del c_c[&#39;engine&#39;][&#39;global&#39;][</span>
            <span class="c1">#     #         &#39;capsul.engine.module.spm&#39;][</span>
            <span class="c1">#     #                           &#39;spm12-standalone&#39;][&#39;standalone&#39;]</span>
            <span class="c1">#     #</span>
            <span class="c1">#     # except KeyError:</span>
            <span class="c1">#     #     pass</span>
            <span class="c1">#</span>
            <span class="c1">#     cif = c_e.settings.config_id_field</span>
            <span class="c1">#</span>
            <span class="c1">#     with c_e.settings as settings:</span>
            <span class="c1">#</span>
            <span class="c1">#         for c in settings.configs(&#39;spm&#39;, &#39;global&#39;):</span>
            <span class="c1">#             settings.remove_config(&#39;spm&#39;, &#39;global&#39;,</span>
            <span class="c1">#                                    getattr(c, cif))</span>
            <span class="c1">#</span>
            <span class="c1">#         # settings.new_config(&#39;spm&#39;, &#39;global&#39;,</span>
            <span class="c1">#         #        {&#39;config_id&#39;: &#39;spm&#39;,</span>
            <span class="c1">#         #         &#39;standalone&#39;: False,</span>
            <span class="c1">#         #         &#39;directory&#39;: config.get_spm_standalone_path()})</span>
            <span class="c1">#</span>
            <span class="c1">#         # for c in settings.configs(&#39;matlab&#39;, &#39;global&#39;):</span>
            <span class="c1">#         #     settings.remove_config(&#39;matlab&#39;, &#39;global&#39;,</span>
            <span class="c1">#         #                            getattr(c, cif))</span>
            <span class="c1">#</span>
            <span class="c1">#     # try:</span>
            <span class="c1">#     #     del c_c[&#39;engine&#39;][&#39;global&#39;][</span>
            <span class="c1">#     #         &#39;capsul.engine.module.matlab&#39;][</span>
            <span class="c1">#     #             &#39;executable&#39;]</span>
            <span class="c1">#     #</span>
            <span class="c1">#     # except KeyError:</span>
            <span class="c1">#     #     pass</span>
            <span class="c1">#</span>
            <span class="c1"># # SPM</span>
            <span class="c1"># elif not config.get_use_spm():</span>
            <span class="c1">#</span>
            <span class="c1">#     try:</span>
            <span class="c1">#         c_c[&#39;engine&#39;][&#39;global&#39;][</span>
            <span class="c1">#             &#39;capsul.engine.module.spm&#39;][&#39;spm&#39;[</span>
            <span class="c1">#                 &#39;directory&#39;] = config.get_spm_path()</span>
            <span class="c1">#</span>
            <span class="c1">#     except KeyError:</span>
            <span class="c1">#         pass</span>
            <span class="c1">#</span>
            <span class="c1">#     cif = c_e.settings.config_id_field</span>
            <span class="c1">#</span>
            <span class="c1">#     with c_e.settings as settings:</span>
            <span class="c1">#</span>
            <span class="c1">#         for c in settings.configs(&#39;spm&#39;, &#39;global&#39;):</span>
            <span class="c1">#             settings.remove_config(&#39;spm&#39;, &#39;global&#39;,</span>
            <span class="c1">#                                    getattr(c, cif))</span>
            <span class="c1">#</span>
            <span class="c1">#         # settings.new_config(&#39;spm&#39;, &#39;global&#39;,</span>
            <span class="c1">#         #                {&#39;config_id&#39;: &#39;spm&#39;,</span>
            <span class="c1">#         #                 &#39;directory&#39;: config.get_spm_path(),</span>
            <span class="c1">#         #                 &#39;standalone&#39;: False})</span>
            <span class="c1">#</span>
            <span class="c1">#         # for c in settings.configs(&#39;matlab&#39;, &#39;global&#39;):</span>
            <span class="c1">#         #     settings.remove_config(&#39;matlab&#39;, &#39;global&#39;,</span>
            <span class="c1">#         #                            getattr(c, cif))</span>
            <span class="c1">#         #</span>
            <span class="c1">#         # settings.new_config(&#39;matlab&#39;, &#39;global&#39;,</span>
            <span class="c1">#         #               {&#39;config_id&#39;: &#39;matlab&#39;,</span>
            <span class="c1">#         #                &#39;executable&#39;: config.get_matlab_path()})</span>
            <span class="c1">#     # try:</span>
            <span class="c1">#     #     c_c[&#39;engine&#39;][&#39;global&#39;][</span>
            <span class="c1">#     #         &#39;capsul.engine.module.matlab&#39;][</span>
            <span class="c1">#     #             &#39;executable&#39;] = config.get_matlab_path()</span>
            <span class="c1">#     #</span>
            <span class="c1">#     # except KeyError:</span>
            <span class="c1">#     #     pass</span>
            <span class="c1">#</span>
            <span class="c1"># # no SPM at all</span>
            <span class="c1"># else:</span>
            <span class="c1">#     cif = c_e.settings.config_id_field</span>
            <span class="c1">#</span>
            <span class="c1">#     with c_e.settings as settings:</span>
            <span class="c1">#</span>
            <span class="c1">#         for c in settings.configs(&#39;spm&#39;, &#39;global&#39;):</span>
            <span class="c1">#             settings.remove_config(&#39;spm&#39;, &#39;global&#39;,</span>
            <span class="c1">#                                    getattr(c, cif))</span>
            <span class="c1">#</span>
            <span class="c1">#     try:</span>
            <span class="c1">#         del c_c[&#39;engine&#39;][&#39;global&#39;][</span>
            <span class="c1">#             &#39;capsul.engine.module.spm&#39;][</span>
            <span class="c1">#                 &#39;directory&#39;]</span>
            <span class="c1">#</span>
            <span class="c1">#     except KeyError:</span>
            <span class="c1">#         pass</span>
            <span class="c1">#</span>
            <span class="c1"># # no MATLAB at all</span>
            <span class="c1"># if (not config.get_use_matlab() and</span>
            <span class="c1">#                        not config.get_use_matlab_standalone()):</span>
            <span class="c1">#     cif = c_e.settings.config_id_field</span>
            <span class="c1">#</span>
            <span class="c1">#     with c_e.settings as settings:</span>
            <span class="c1">#</span>
            <span class="c1">#         for c in settings.configs(&#39;matlab&#39;, &#39;global&#39;):</span>
            <span class="c1">#             settings.remove_config(&#39;matlab&#39;, &#39;global&#39;,</span>
            <span class="c1">#                                    getattr(c, cif))</span>
            <span class="c1">#</span>
            <span class="c1">#     try:</span>
            <span class="c1">#         del c_c[&#39;engine&#39;][&#39;global&#39;][</span>
            <span class="c1">#             &#39;capsul.engine.module.matlab&#39;][</span>
            <span class="c1">#                 &#39;executable&#39;]</span>
            <span class="c1">#</span>
            <span class="c1">#     except KeyError:</span>
            <span class="c1">#         pass</span>
            <span class="c1">#</span>
            <span class="c1"># # only MATLAB</span>
            <span class="c1"># if config.get_use_matlab() and not config.get_use_spm():</span>
            <span class="c1">#</span>
            <span class="c1">#     try:</span>
            <span class="c1">#         c_c[&#39;engine&#39;][&#39;global&#39;][</span>
            <span class="c1">#             &#39;capsul.engine.module.matlab&#39;][</span>
            <span class="c1">#                 &#39;executable&#39;] = config.get_matlab_path()</span>
            <span class="c1">#</span>
            <span class="c1">#     except KeyError:</span>
            <span class="c1">#         pass</span>
            <span class="c1">#</span>
            <span class="c1">#     cif = c_e.settings.config_id_field</span>
            <span class="c1">#</span>
            <span class="c1">#     with c_e.settings as settings:</span>
            <span class="c1">#</span>
            <span class="c1">#         for c in settings.configs(&#39;matlab&#39;, &#39;global&#39;):</span>
            <span class="c1">#             settings.remove_config(&#39;matlab&#39;, &#39;global&#39;,</span>
            <span class="c1">#                                    getattr(c, cif))</span>
            <span class="c1">#</span>
            <span class="c1">#         settings.new_config(&#39;matlab&#39;, &#39;global&#39;,</span>
            <span class="c1">#                        {&#39;config_id&#39;: &#39;matlab&#39;,</span>
            <span class="c1">#                         &#39;executable&#39;: config.get_matlab_path()})</span>
            <span class="c1">#</span>
            <span class="c1">#         for c in settings.configs(&#39;spm&#39;, &#39;global&#39;):</span>
            <span class="c1">#             settings.remove_config(&#39;spm&#39;, &#39;global&#39;,</span>
            <span class="c1">#                                    getattr(c, cif))</span>

        <span class="n">config</span><span class="o">.</span><span class="n">get_capsul_config</span><span class="p">(</span><span class="n">sync_from_engine</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">saveConfig</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="PopUpPreferences.ok_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.ok_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">ok_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Blabla&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_and_save</span><span class="p">(</span><span class="n">OK_clicked</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpPreferences.use_afni_changed"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.use_afni_changed">[docs]</a>    <span class="k">def</span> <span class="nf">use_afni_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when the use_afni checkbox is changed.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_afni_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">afni_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">afni_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">afni_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">afni_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.use_ants_changed"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.use_ants_changed">[docs]</a>    <span class="k">def</span> <span class="nf">use_ants_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when the use_ants checkbox is changed.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_ants_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ants_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ants_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ants_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ants_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.use_freesurfer_changed"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.use_freesurfer_changed">[docs]</a>    <span class="k">def</span> <span class="nf">use_freesurfer_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when the use_freesurfer checkbox is changed.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_freesurfer_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">freesurfer_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">freesurfer_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">freesurfer_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">freesurfer_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.use_fsl_changed"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.use_fsl_changed">[docs]</a>    <span class="k">def</span> <span class="nf">use_fsl_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when the use_fsl checkbox is changed.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_fsl_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fsl_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fsl_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fsl_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fsl_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.use_matlab_changed"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.use_matlab_changed">[docs]</a>    <span class="k">def</span> <span class="nf">use_matlab_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when the use_matlab checkbox is changed.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matlab_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matlab_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_browse</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matlab_browse</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matlab_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matlab_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matlab_browse</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.use_matlab_standalone_changed"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.use_matlab_standalone_changed">[docs]</a>    <span class="k">def</span> <span class="nf">use_matlab_standalone_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when the use_matlab_standalone checkbox is changed.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="n">archi</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">architecture</span><span class="p">()</span>

            <span class="k">if</span> <span class="s2">&quot;Windows&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">archi</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_browse</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_browse</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">matlab_standalone_browse</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.use_spm_changed"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.use_spm_changed">[docs]</a>    <span class="k">def</span> <span class="nf">use_spm_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when the use_spm checkbox is changed.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_browse</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_browse</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_browse</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.use_spm_standalone_changed"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.use_spm_standalone_changed">[docs]</a>    <span class="k">def</span> <span class="nf">use_spm_standalone_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when the use_spm_standalone checkbox is changed.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_standalone_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_browse</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">archi</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">architecture</span><span class="p">()</span>

            <span class="k">if</span> <span class="s2">&quot;Windows&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">archi</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_standalone_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_standalone_browse</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_choice</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_label</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spm_browse</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_spm_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">use_matlab_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.admin_mode_switch"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.admin_mode_switch">[docs]</a>    <span class="k">def</span> <span class="nf">admin_mode_switch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when the admin mode checkbox is clicked.&quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">admin_mode_checkbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="n">psswd</span><span class="p">,</span> <span class="n">ok</span> <span class="o">=</span> <span class="n">QInputDialog</span><span class="o">.</span><span class="n">getText</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="s2">&quot;Password Input Dialog&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Enter the admin password:&quot;</span><span class="p">,</span>
                <span class="n">QLineEdit</span><span class="o">.</span><span class="n">Password</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
                <span class="n">salt_psswd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">salt</span> <span class="o">+</span> <span class="n">psswd</span>
                <span class="n">hash_psswd</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">salt_psswd</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

                <span class="k">if</span> <span class="n">hash_psswd</span> <span class="o">!=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_admin_hash</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">admin_mode_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">status_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
                        <span class="s2">&quot;&lt;i style=&#39;color:red&#39;&gt;Wrong &quot;</span> <span class="s2">&quot;password.&lt;/i&gt;&quot;</span>
                    <span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">change_psswd</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">edit_config</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">status_label</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">admin_mode_checkbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">change_psswd</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">edit_config</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpPreferences.wrong_path"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.wrong_path">[docs]</a>    <span class="k">def</span> <span class="nf">wrong_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">tool</span><span class="p">,</span> <span class="n">extra_mess</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Blabla&quot;&quot;&quot;</span>

        <span class="n">QApplication</span><span class="o">.</span><span class="n">restoreOverrideCursor</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Critical</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Invalid &quot;</span> <span class="o">+</span> <span class="n">tool</span> <span class="o">+</span> <span class="s2">&quot; path&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">extra_mess</span><span class="p">:</span>
            <span class="n">extra_mess</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">extra_mess</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span>
            <span class="s2">&quot;The </span><span class="si">{0}{1}</span><span class="s2"> path entered </span><span class="si">{2}</span><span class="s2"> is invalid.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">tool</span><span class="p">,</span> <span class="n">extra_mess</span><span class="p">,</span> <span class="n">path</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">buttonClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpPreferences.use_current_mainwindow_size"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpPreferences.use_current_mainwindow_size">[docs]</a>    <span class="k">def</span> <span class="nf">use_current_mainwindow_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">main_window</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Blabla&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mainwindow_size_x_spinbox</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">main_window</span><span class="o">.</span><span class="n">width</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainwindow_size_y_spinbox</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">main_window</span><span class="o">.</span><span class="n">height</span><span class="p">())</span></div></div>


<div class="viewcode-block" id="PopUpProperties"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpProperties">[docs]</a><span class="k">class</span> <span class="nc">PopUpProperties</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to change the current project&#39;s</span>
<span class="sd">       properties (File &gt; properties).</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - ok_clicked: saves the modifications and updates the data browser</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Signal that will be emitted at the end to tell that the project has</span>
    <span class="c1"># been created</span>
    <span class="n">signal_settings_change</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>

<div class="viewcode-block" id="PopUpProperties.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpProperties.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">,</span> <span class="n">databrowser</span><span class="p">,</span> <span class="n">old_tags</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization</span>

<span class="sd">        :param project: current project in the software</span>
<span class="sd">        :param databrowser: data browser instance of the software</span>
<span class="sd">        :param old_tags: visualized tags before opening this dialog</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModal</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span> <span class="o">=</span> <span class="n">databrowser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">old_tags</span> <span class="o">=</span> <span class="n">old_tags</span>

        <span class="n">_translate</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;Dialog&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;project properties&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab_widget</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTabWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_widget</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># The &#39;Visualized tags&quot; tab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_tags</span> <span class="o">=</span> <span class="n">PopUpVisualizedTags</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_shown_tags</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_tags</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;tab_tags&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_widget</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tab_tags</span><span class="p">,</span> <span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Dialog&quot;</span><span class="p">,</span> <span class="s2">&quot;Visualized tags&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># The &#39;Informations&quot; tab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_infos</span> <span class="o">=</span> <span class="n">PopUpInformation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_infos</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;tab_infos&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_widget</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tab_infos</span><span class="p">,</span> <span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Dialog&quot;</span><span class="p">,</span> <span class="s2">&quot;Informations&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># The &#39;OK&#39; push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_ok&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ok_clicked</span><span class="p">)</span>

        <span class="c1"># The &#39;Cancel&#39; push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>

        <span class="n">hbox_buttons</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="p">)</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="p">)</span>

        <span class="n">vbox</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_widget</span><span class="p">)</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox_buttons</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vbox</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpProperties.ok_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpProperties.ok_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">ok_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Saves the modifications and updates the data browser.&quot;&quot;&quot;</span>

        <span class="n">history_maker</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;modified_visibilities&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">old_tags</span><span class="p">]</span>
        <span class="n">new_visibilities</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_tags</span><span class="o">.</span><span class="n">list_widget_selected_tags</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
            <span class="n">visible_tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tab_tags</span><span class="o">.</span><span class="n">list_widget_selected_tags</span><span class="o">.</span><span class="n">item</span><span class="p">(</span>
                <span class="n">x</span>
            <span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">new_visibilities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">visible_tag</span><span class="p">)</span>

        <span class="n">new_visibilities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TAG_FILENAME</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">set_shown_tags</span><span class="p">(</span><span class="n">new_visibilities</span><span class="p">)</span>
        <span class="n">history_maker</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_visibilities</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">undos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">history_maker</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">redos</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">unsavedModifications</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># Columns updated</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">table_data</span><span class="o">.</span><span class="n">update_visualized_columns</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">old_tags</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_shown_tags</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpQuit"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpQuit">[docs]</a><span class="k">class</span> <span class="nc">PopUpQuit</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user closes the software and the current project has</span>
<span class="sd">      been modified.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - can_exit: returns the value of bool_exit</span>
<span class="sd">        - cancel_clicked: makes the actions to cancel the action</span>
<span class="sd">        - do_not_save_clicked: makes the actions not to save the project</span>
<span class="sd">        - save_as_clicked: makes the actions to save the project</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">save_as_signal</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="n">do_not_save_signal</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="n">cancel_signal</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>

<div class="viewcode-block" id="PopUpQuit.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpQuit.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">database</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param database: current database in the project</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">=</span> <span class="n">database</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bool_exit</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Confirm exit&quot;</span><span class="p">)</span>

        <span class="n">label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
            <span class="s2">&quot;Do you want to exit without saving &quot;</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span>
            <span class="o">+</span> <span class="s2">&quot;?&quot;</span>
        <span class="p">)</span>

        <span class="n">push_button_save_as</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Save&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">push_button_do_not_save</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Do not save&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">push_button_cancel</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="n">hbox</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">push_button_save_as</span><span class="p">)</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">push_button_do_not_save</span><span class="p">)</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">push_button_cancel</span><span class="p">)</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">vbox</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vbox</span><span class="p">)</span>

        <span class="n">push_button_save_as</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_as_clicked</span><span class="p">)</span>
        <span class="n">push_button_do_not_save</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">do_not_save_clicked</span><span class="p">)</span>
        <span class="n">push_button_cancel</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cancel_clicked</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpQuit.can_exit"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpQuit.can_exit">[docs]</a>    <span class="k">def</span> <span class="nf">can_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the value of bool_exit.</span>

<span class="sd">        :return: bool_exit value</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bool_exit</span></div>

<div class="viewcode-block" id="PopUpQuit.cancel_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpQuit.cancel_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">cancel_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Makes the actions to cancel the action.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bool_exit</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpQuit.do_not_save_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpQuit.do_not_save_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">do_not_save_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Makes the actions not to save the project.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bool_exit</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpQuit.save_as_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpQuit.save_as_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">save_as_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Makes the actions to save the project.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_as_signal</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bool_exit</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpRemoveScan"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpRemoveScan">[docs]</a><span class="k">class</span> <span class="nc">PopUpRemoveScan</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to remove a scan that was previously sent</span>
<span class="sd">       to the pipeline manager.</span>

<span class="sd">    :param scan: The scan that may be removed</span>
<span class="sd">    :param size: The number of scan the user wants to remove</span>

<span class="sd">     .. Methods:</span>
<span class="sd">         - cancel_clicked:</span>
<span class="sd">         - no_all_clicked:</span>
<span class="sd">         - yes_all_clicked:</span>
<span class="sd">         - yes_clicked:</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PopUpRemoveScan.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpRemoveScan.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scan</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;The document exists in the pipeline manager&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">repeat</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
            <span class="s2">&quot;The document &quot;</span> <span class="o">+</span> <span class="n">scan</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">was previously sent to the &quot;</span>
            <span class="s2">&quot;pipeline manager, do you &quot;</span>
            <span class="s2">&quot;really want to delete it ?&quot;</span>
        <span class="p">)</span>

        <span class="n">push_button_yes</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Ok&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">push_button_cancel</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;No&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">push_button_yes_all</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Ok to all&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="n">push_button_no_all</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;No to all&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="n">hbox</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">push_button_yes</span><span class="p">)</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">push_button_cancel</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">hbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">push_button_yes_all</span><span class="p">)</span>
            <span class="n">hbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">push_button_no_all</span><span class="p">)</span>

        <span class="n">hbox</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">vbox</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vbox</span><span class="p">)</span>

        <span class="n">push_button_yes</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yes_clicked</span><span class="p">)</span>
        <span class="n">push_button_cancel</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cancel_clicked</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">push_button_yes_all</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yes_all_clicked</span><span class="p">)</span>
            <span class="n">push_button_no_all</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">no_all_clicked</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpRemoveScan.cancel_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpRemoveScan.cancel_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">cancel_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Blabla&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">repeat</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpRemoveScan.no_all_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpRemoveScan.no_all_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">no_all_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Blabla&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">repeat</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpRemoveScan.yes_all_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpRemoveScan.yes_all_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">yes_all_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Blabla&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">repeat</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpRemoveScan.yes_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpRemoveScan.yes_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">yes_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Blabla&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">repeat</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpRemoveTag"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpRemoveTag">[docs]</a><span class="k">class</span> <span class="nc">PopUpRemoveTag</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to remove a user tag from</span>
<span class="sd">      populse_mia project.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - ok_action: verifies the selected tags and send the information to</span>
<span class="sd">           the data browser</span>
<span class="sd">        - search_str: matches the searched pattern with the tags of the project</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Signal that will be emitted at the end to tell that</span>
    <span class="c1"># the project has been created</span>
    <span class="n">signal_remove_tag</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>

<div class="viewcode-block" id="PopUpRemoveTag.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpRemoveTag.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">databrowser</span><span class="p">,</span> <span class="n">project</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization</span>

<span class="sd">        :param databrowser: current project in the software</span>
<span class="sd">        :param project: data browser instance of the software</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span> <span class="o">=</span> <span class="n">databrowser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Remove a tag&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModal</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">_translate</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;Remove a tag&quot;</span><span class="p">)</span>

        <span class="c1"># The &#39;OK&#39; push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;push_button_ok&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Remove a tag&quot;</span><span class="p">,</span> <span class="s2">&quot;OK&quot;</span><span class="p">))</span>

        <span class="n">hbox_buttons</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="p">)</span>

        <span class="c1"># The &quot;Tag list&quot; label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span><span class="o">.</span><span class="n">setTextFormat</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AutoText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;label_tag_list&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
            <span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Remove a tag&quot;</span><span class="p">,</span> <span class="s2">&quot;Available tags:&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;lineEdit_search_bar&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Search&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_str</span><span class="p">)</span>

        <span class="n">hbox_top</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hbox_top</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span><span class="p">)</span>
        <span class="n">hbox_top</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">hbox_top</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="p">)</span>

        <span class="c1"># The list of tags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;listWidget_tags&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span>
            <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">MultiSelection</span>
        <span class="p">)</span>

        <span class="n">vbox</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox_top</span><span class="p">)</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="p">)</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox_buttons</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vbox</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(</span><span class="n">COLLECTION_CURRENT</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">tag</span><span class="o">.</span><span class="n">origin</span> <span class="o">==</span> <span class="n">TAG_ORIGIN_USER</span><span class="p">:</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Dialog&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="o">.</span><span class="n">field_name</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vbox</span><span class="p">)</span>

        <span class="c1"># Connecting the OK push buttone</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ok_action</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpRemoveTag.ok_action"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpRemoveTag.ok_action">[docs]</a>    <span class="k">def</span> <span class="nf">ok_action</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Verifies the selected tags and send the information to the data</span>
<span class="sd">        browser.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tag_names_to_remove</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">selectedItems</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tag_names_to_remove</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">remove_tag_infos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag_names_to_remove</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpRemoveTag.search_str"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpRemoveTag.search_str">[docs]</a>    <span class="k">def</span> <span class="nf">search_str</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">str_search</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Matches the searched pattern with the tags of the project</span>

<span class="sd">        :param str_search: string pattern to search</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_translate</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span>

        <span class="k">if</span> <span class="n">str_search</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">return_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(</span><span class="n">COLLECTION_CURRENT</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">tag</span><span class="o">.</span><span class="n">origin</span> <span class="o">==</span> <span class="n">TAG_ORIGIN_USER</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">str_search</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">tag</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">():</span>
                        <span class="n">return_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">return_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(</span><span class="n">COLLECTION_CURRENT</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">tag</span><span class="o">.</span><span class="n">origin</span> <span class="o">==</span> <span class="n">TAG_ORIGIN_USER</span><span class="p">:</span>
                    <span class="n">return_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">tag_name</span> <span class="ow">in</span> <span class="n">return_list</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;Dialog&quot;</span><span class="p">,</span> <span class="n">tag_name</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="PopUpSaveProjectAs"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSaveProjectAs">[docs]</a><span class="k">class</span> <span class="nc">PopUpSaveProjectAs</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to save a project under another name.</span>

<span class="sd">    .. Method:</span>
<span class="sd">        - fill_input: fills the input field when a project is clicked on</span>
<span class="sd">        - return_value: sets the widget&#39;s attributes depending on the</span>
<span class="sd">          selected file name</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Signal that will be emitted at the end to tell</span>
    <span class="c1"># that the new file name has been chosen</span>
    <span class="n">signal_saved_project</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>

<div class="viewcode-block" id="PopUpSaveProjectAs.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSaveProjectAs.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Save project as&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_project</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_project_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;New project name&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_projects_save_path</span><span class="p">()</span>

        <span class="n">project_list</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">v_box</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="c1"># Label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Projects list:&quot;</span><span class="p">)</span>

        <span class="n">project_list</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">project_list</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_path</span><span class="p">,</span> <span class="n">project_list</span><span class="p">[</span><span class="n">i</span><span class="p">])):</span>
                <span class="n">label</span> <span class="o">=</span> <span class="n">QLabel_clickable</span><span class="p">(</span><span class="n">project_list</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">label</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                    <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fill_input</span><span class="p">,</span> <span class="n">project_list</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">v_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>

        <span class="c1"># The text input</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_text</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_text</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">new_project_label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_text</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">new_project</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_bottom</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_bottom</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># The &#39;OK&#39; push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Save as&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_ok&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">return_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_bottom</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="p">)</span>

        <span class="c1"># The &#39;Cancel&#39; push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_bottom</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">scroll</span> <span class="o">=</span> <span class="n">QScrollArea</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll</span><span class="o">.</span><span class="n">setVerticalScrollBarPolicy</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ScrollBarAlwaysOn</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll</span><span class="o">.</span><span class="n">setMaximumHeight</span><span class="p">(</span><span class="mi">250</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">v_box</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll</span><span class="o">.</span><span class="n">setWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">final</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">final</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scroll</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">final</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">h_box_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">h_box_bottom</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpSaveProjectAs.fill_input"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSaveProjectAs.fill_input">[docs]</a>    <span class="k">def</span> <span class="nf">fill_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Fills the input field with the name of a project.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_project</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpSaveProjectAs.return_value"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSaveProjectAs.return_value">[docs]</a>    <span class="k">def</span> <span class="nf">return_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the widget&#39;s attributes depending on the selected file name.</span>

<span class="sd">        :return: new project&#39;s file name</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">file_name_tuple</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_project</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">file_name_tuple</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">file_name</span> <span class="o">=</span> <span class="n">file_name_tuple</span>
            <span class="n">projects_folder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_path</span>

            <span class="k">if</span> <span class="n">file_name</span><span class="p">:</span>
                <span class="n">entire_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">projects_folder</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">entire_path</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">total_path</span> <span class="o">=</span> <span class="n">entire_path</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">relative_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">entire_path</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">relative_subpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relative_path</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">signal_saved_project</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">validate</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="c1"># A signal is emitted to tell that the project</span>
                    <span class="c1"># has been created</span>
                <span class="k">elif</span> <span class="n">file_name</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                    <span class="k">return</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_user_mode</span><span class="p">():</span>
                        <span class="n">utils</span><span class="o">.</span><span class="n">message_already_exists</span><span class="p">()</span>
                        <span class="k">return</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">msgtext</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="s2">&quot;Do you really want to overwrite the &quot;</span>
                            <span class="o">+</span> <span class="n">file_name</span>
                            <span class="o">+</span> <span class="s2">&quot; project ?</span><span class="se">\n</span><span class="s2">This action &quot;</span>
                            <span class="s2">&quot;delete all contents inside this folder!&quot;</span>
                        <span class="p">)</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
                        <span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Warning</span><span class="p">)</span>
                        <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;populse_mia - Warning: Overwriting project&quot;</span>
                        <span class="n">reply</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">question</span><span class="p">(</span>
                            <span class="bp">self</span><span class="p">,</span>
                            <span class="n">title</span><span class="p">,</span>
                            <span class="n">msgtext</span><span class="p">,</span>
                            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="k">if</span> <span class="n">reply</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">validate</span> <span class="o">=</span> <span class="kc">True</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">return</span>

            <span class="k">return</span> <span class="n">entire_path</span></div></div>


<div class="viewcode-block" id="PopUpSeeAllProjects"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSeeAllProjects">[docs]</a><span class="k">class</span> <span class="nc">PopUpSeeAllProjects</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to create a see all the projects.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - checkState: checks if the project still exists and returns the</span>
<span class="sd">                      corresponding icon</span>
<span class="sd">        - item_to_path: returns the path of the first selected item</span>
<span class="sd">        - open_project: switches to the selected project</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PopUpSeeAllProjects.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSeeAllProjects.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">saved_projects</span><span class="p">,</span> <span class="n">main_window</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param saved_projects: List of saved projects</span>
<span class="sd">        :param main_window: Main window</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span> <span class="o">=</span> <span class="n">main_window</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;See all saved projects&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>

        <span class="c1"># Tree widget</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;List of saved projects&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">treeWidget</span> <span class="o">=</span> <span class="n">QTreeWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">treeWidget</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">treeWidget</span><span class="o">.</span><span class="n">setHeaderLabels</span><span class="p">([</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="s2">&quot;Path&quot;</span><span class="p">,</span> <span class="s2">&quot;State&quot;</span><span class="p">])</span>

        <span class="n">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">saved_projects</span><span class="o">.</span><span class="n">pathsList</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="n">wdg</span> <span class="o">=</span> <span class="n">QTreeWidgetItem</span><span class="p">()</span>
            <span class="n">wdg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
            <span class="n">wdg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
            <span class="n">wdg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkState</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">treeWidget</span><span class="o">.</span><span class="n">addTopLevelItem</span><span class="p">(</span><span class="n">wdg</span><span class="p">)</span>

        <span class="n">hd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">treeWidget</span><span class="o">.</span><span class="n">header</span><span class="p">()</span>
        <span class="n">hd</span><span class="o">.</span><span class="n">setSectionResizeMode</span><span class="p">(</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">ResizeToContents</span><span class="p">)</span>

        <span class="c1"># Buttons</span>

        <span class="c1"># The &#39;Open project&#39; push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushButtonOpenProject</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Open project&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushButtonOpenProject</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_ok&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushButtonOpenProject</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">open_project</span><span class="p">)</span>

        <span class="c1"># The &#39;Cancel&#39; push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushButtonCancel</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushButtonCancel</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushButtonCancel</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>

        <span class="c1"># Layouts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hBoxButtons</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hBoxButtons</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hBoxButtons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pushButtonOpenProject</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hBoxButtons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pushButtonCancel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">vBox</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vBox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vBox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">treeWidget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vBox</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hBoxButtons</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vBox</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpSeeAllProjects.checkState"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSeeAllProjects.checkState">[docs]</a>    <span class="k">def</span> <span class="nf">checkState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if the project still exists and returns the corresponding</span>
<span class="sd">           icon.</span>

<span class="sd">        :param path: path of the project</span>
<span class="sd">        :return: either a green &quot;v&quot; or a red cross depending on</span>
<span class="sd">          the existence of the project</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">sources_images_dir</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span><span class="o">.</span><span class="n">getSourceImageDir</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">)):</span>
            <span class="n">icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sources_images_dir</span><span class="p">,</span> <span class="s2">&quot;green_v.png&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sources_images_dir</span><span class="p">,</span> <span class="s2">&quot;red_cross.png&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">icon</span></div>

<div class="viewcode-block" id="PopUpSeeAllProjects.item_to_path"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSeeAllProjects.item_to_path">[docs]</a>    <span class="k">def</span> <span class="nf">item_to_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the path of the first selected item.</span>

<span class="sd">        :return: the path of the first selected item</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">nb_items</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">treeWidget</span><span class="o">.</span><span class="n">selectedItems</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">nb_items</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Warning</span><span class="p">)</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Please select a project to open&quot;</span><span class="p">)</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Warning&quot;</span><span class="p">)</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">buttonClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">treeWidget</span><span class="o">.</span><span class="n">selectedItems</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">text</span></div>

<div class="viewcode-block" id="PopUpSeeAllProjects.open_project"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSeeAllProjects.open_project">[docs]</a>    <span class="k">def</span> <span class="nf">open_project</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Switches to the selected project.&quot;&quot;&quot;</span>

        <span class="n">file_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_to_path</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">file_name</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">entire_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">entire_path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relative_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
            <span class="n">project_switched</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="o">.</span><span class="n">switch_project</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">relative_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">project_switched</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpSelectFilter"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSelectFilter">[docs]</a><span class="k">class</span> <span class="nc">PopUpSelectFilter</span><span class="p">(</span><span class="n">PopUpFilterSelection</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to open a filter that has already been</span>
<span class="sd">       saved.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - ok_clicked: saves the modifications and updates the data browser</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PopUpSelectFilter.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSelectFilter.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">,</span> <span class="n">databrowser</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param project: current project in the software</span>
<span class="sd">        :param databrowser: data browser instance of the software</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">PopUpSelectFilter</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span> <span class="o">=</span> <span class="n">databrowser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Open a filter&quot;</span><span class="p">)</span>

        <span class="c1"># Filling the filter list</span>
        <span class="k">for</span> <span class="nb">filter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">filters</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_filters</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">filter</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpSelectFilter.ok_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSelectFilter.ok_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">ok_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Saves the modifications and updates the data browser.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_filters</span><span class="o">.</span><span class="n">selectedItems</span><span class="p">():</span>
            <span class="c1"># Current filter updated</span>
            <span class="n">filter_name</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">filter_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">getFilter</span><span class="p">(</span><span class="n">filter_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">setCurrentFilter</span><span class="p">(</span><span class="n">filter_object</span><span class="p">)</span>
            <span class="k">break</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">open_filter_infos</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpSelectIteration"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSelectIteration">[docs]</a><span class="k">class</span> <span class="nc">PopUpSelectIteration</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to run an iterated pipeline.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - ok_clicked: sends the selected values to the pipeline manager</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PopUpSelectIteration.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSelectIteration.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterated_tag</span><span class="p">,</span> <span class="n">tag_values</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param iterated_tag: name of the iterated tag</span>
<span class="sd">        :param tag_values: values that can take the iterated tag</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">iterated_tag</span> <span class="o">=</span> <span class="n">iterated_tag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tag_values</span> <span class="o">=</span> <span class="n">tag_values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">final_values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span>
            <span class="s2">&quot;Iterate pipeline run over tag </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iterated_tag</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">v_box</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="c1"># Label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Select values to iterate over:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">v_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">check_boxes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">tag_value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag_values</span><span class="p">:</span>
            <span class="n">check_box</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="n">tag_value</span><span class="p">)</span>
            <span class="n">check_box</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check_boxes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">check_box</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">v_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">check_box</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_bottom</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_bottom</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># The &#39;OK&#39; push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_ok&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ok_clicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_bottom</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="p">)</span>

        <span class="c1"># The &#39;Cancel&#39; push button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h_box_bottom</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">scroll</span> <span class="o">=</span> <span class="n">QScrollArea</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">v_box</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll</span><span class="o">.</span><span class="n">setWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">final</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">final</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scroll</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">final</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">h_box_bottom</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">final_layout</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpSelectIteration.ok_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSelectIteration.ok_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">ok_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sends the selected values to the pipeline manager.&quot;&quot;&quot;</span>

        <span class="n">final_values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">check_box</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_boxes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">check_box</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">final_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">check_box</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">final_values</span> <span class="o">=</span> <span class="n">final_values</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpTagSelection"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpTagSelection">[docs]</a><span class="k">class</span> <span class="nc">PopUpTagSelection</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to update the tags that are visualized in</span>
<span class="sd">       the data browser.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - cancel_clicked: closes the pop-up</span>
<span class="sd">        - item_clicked: checks the checkbox of an item when the latter</span>
<span class="sd">          is clicked</span>
<span class="sd">        - ok_clicked: actions when the &quot;OK&quot; button is clicked</span>
<span class="sd">        - search_str: matches the searched pattern with the tags of the project</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PopUpTagSelection.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpTagSelection.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param project: current project in the software</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>

        <span class="n">_translate</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span>

        <span class="c1"># The &quot;Tag list&quot; label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span><span class="o">.</span><span class="n">setTextFormat</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AutoText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;label_tag_list&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
            <span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;main_window&quot;</span><span class="p">,</span> <span class="s2">&quot;Available tags:&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># The search bar to search in the list of tags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;lineEdit_search_bar&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Search&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_str</span><span class="p">)</span>

        <span class="c1"># The list of tags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;listWidget_tags&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span>
            <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">SingleSelection</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">itemClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_clicked</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_ok&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ok_clicked</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cancel_clicked</span><span class="p">)</span>

        <span class="n">hbox_top_left</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hbox_top_left</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span><span class="p">)</span>
        <span class="n">hbox_top_left</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="p">)</span>

        <span class="n">vbox_top_left</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">vbox_top_left</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox_top_left</span><span class="p">)</span>
        <span class="n">vbox_top_left</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="p">)</span>

        <span class="n">hbox_buttons</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_ok</span><span class="p">)</span>
        <span class="n">hbox_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_cancel</span><span class="p">)</span>

        <span class="n">vbox_final</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">vbox_final</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">vbox_top_left</span><span class="p">)</span>
        <span class="n">vbox_final</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox_buttons</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vbox_final</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpTagSelection.cancel_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpTagSelection.cancel_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">cancel_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Closes the pop-up.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpTagSelection.item_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpTagSelection.item_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">item_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks the checkbox of an item when the latter is clicked.</span>

<span class="sd">        :param item: clicked item</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
            <span class="n">itm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">itm</span> <span class="o">==</span> <span class="n">item</span><span class="p">:</span>
                <span class="n">itm</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">itm</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Unchecked</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpTagSelection.ok_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpTagSelection.ok_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">ok_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Actions when the &quot;OK&quot; button is clicked.&quot;&quot;&quot;</span>

        <span class="c1"># Has to be override in the PopUpSelectTag* classes</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="PopUpTagSelection.search_str"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpTagSelection.search_str">[docs]</a>    <span class="k">def</span> <span class="nf">search_str</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">str_search</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Matches the searched pattern with the tags of the project.</span>

<span class="sd">        :param str_search: string pattern to search</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">return_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">str_search</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_fields_names</span><span class="p">(</span>
                <span class="n">COLLECTION_CURRENT</span>
            <span class="p">):</span>
                <span class="k">if</span> <span class="n">tag</span> <span class="o">!=</span> <span class="n">TAG_CHECKSUM</span> <span class="ow">and</span> <span class="n">tag</span> <span class="o">!=</span> <span class="n">TAG_HISTORY</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">str_search</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">tag</span><span class="o">.</span><span class="n">upper</span><span class="p">():</span>
                        <span class="n">return_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_fields_names</span><span class="p">(</span>
                <span class="n">COLLECTION_CURRENT</span>
            <span class="p">):</span>
                <span class="k">if</span> <span class="n">tag</span> <span class="o">!=</span> <span class="n">TAG_CHECKSUM</span> <span class="ow">and</span> <span class="n">tag</span> <span class="o">!=</span> <span class="n">TAG_HISTORY</span><span class="p">:</span>
                    <span class="n">return_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">in</span> <span class="n">return_list</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setHidden</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setHidden</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="PopUpSelectTag"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSelectTag">[docs]</a><span class="k">class</span> <span class="nc">PopUpSelectTag</span><span class="p">(</span><span class="n">PopUpTagSelection</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to update the tag to display in the mini</span>
<span class="sd">      viewer.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - ok_clicked: saves the modifications and updates the mini viewer</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PopUpSelectTag.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSelectTag.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param project: current project in the software</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">PopUpSelectTag</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span>

        <span class="c1"># Filling the list and checking the thumbnail tag</span>
        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_fields_names</span><span class="p">(</span><span class="n">COLLECTION_CURRENT</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">tag</span> <span class="o">!=</span> <span class="n">TAG_CHECKSUM</span> <span class="ow">and</span> <span class="n">tag</span> <span class="o">!=</span> <span class="n">TAG_HISTORY</span><span class="p">:</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">()</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">|</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsUserCheckable</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getThumbnailTag</span><span class="p">():</span>
                    <span class="n">item</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">item</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Unchecked</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">sortItems</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpSelectTag.ok_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSelectTag.ok_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">ok_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the modifications and updates the mini viewer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">checkState</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">setThumbnailTag</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
                <span class="k">break</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpSelectTagCountTable"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSelectTagCountTable">[docs]</a><span class="k">class</span> <span class="nc">PopUpSelectTagCountTable</span><span class="p">(</span><span class="n">PopUpTagSelection</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Is called when the user wants to update a visualized tag of the count</span>
<span class="sd">       table.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - ok_clicked: updates the selected tag and closes the pop-up</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PopUpSelectTagCountTable.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSelectTagCountTable.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">,</span> <span class="n">tags_to_display</span><span class="p">,</span> <span class="n">tag_name_checked</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param project: current project in the software</span>
<span class="sd">        :param tags_to_display: the tags to display</span>
<span class="sd">        :param tag_name_checked: the checked tags</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">PopUpSelectTagCountTable</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">selected_tag</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags_to_display</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">tag</span> <span class="o">!=</span> <span class="n">TAG_CHECKSUM</span> <span class="ow">and</span> <span class="n">tag</span> <span class="o">!=</span> <span class="n">TAG_HISTORY</span><span class="p">:</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">()</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">|</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsUserCheckable</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="n">tag_name_checked</span><span class="p">:</span>
                    <span class="n">item</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">item</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Unchecked</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">sortItems</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpSelectTagCountTable.ok_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpSelectTagCountTable.ok_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">ok_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Updates the selected tag and closes the pop-up.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">checkState</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">selected_tag</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="k">break</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpShowHistory"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpShowHistory">[docs]</a><span class="k">class</span> <span class="nc">PopUpShowHistory</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class to display the history of a document.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - io_value_is_scan: checks if the I/O value is a scan</span>
<span class="sd">        - file_clicked: called when a file is clicked</span>
<span class="sd">        - node_selected: called when a pipeline node is clicked</span>
<span class="sd">        - update_table: update the brick row at the bottom</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PopUpShowHistory.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpShowHistory.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">,</span> <span class="n">brick_uuid</span><span class="p">,</span> <span class="n">scan</span><span class="p">,</span> <span class="n">databrowser</span><span class="p">,</span> <span class="n">main_window</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Prepares the brick history popup.</span>

<span class="sd">        :param project: current project in the software</span>
<span class="sd">        :param scan: filename of the scan</span>
<span class="sd">        :param databrowser; data browser instance of the software</span>
<span class="sd">        :param main_window: main window of the software</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setModal</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowFlags</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">windowFlags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowStaysOnBottomHint</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span> <span class="o">=</span> <span class="n">databrowser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_window</span> <span class="o">=</span> <span class="n">main_window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;History of &quot;</span> <span class="o">+</span> <span class="n">scan</span><span class="p">)</span>

        <span class="n">brick_row</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_document</span><span class="p">(</span><span class="n">COLLECTION_BRICK</span><span class="p">,</span> <span class="n">brick_uuid</span><span class="p">)</span>
        <span class="n">full_brick_name</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span>
            <span class="n">COLLECTION_BRICK</span><span class="p">,</span> <span class="n">brick_uuid</span><span class="p">,</span> <span class="n">BRICK_NAME</span>
        <span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">splitter</span> <span class="o">=</span> <span class="n">QSplitter</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Vertical</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="n">QTableWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setVerticalScrollBarPolicy</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ScrollBarAlwaysOn</span><span class="p">)</span>

        <span class="n">history_uuid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span>
            <span class="n">COLLECTION_CURRENT</span><span class="p">,</span> <span class="n">scan</span><span class="p">,</span> <span class="n">TAG_HISTORY</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">unitary_pipeline</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uuid_idx</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">history_uuid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_xml</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span>
                <span class="n">COLLECTION_HISTORY</span><span class="p">,</span> <span class="n">history_uuid</span><span class="p">,</span> <span class="n">HISTORY_PIPELINE</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_xml</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">brick_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span>
                    <span class="n">COLLECTION_HISTORY</span><span class="p">,</span> <span class="n">history_uuid</span><span class="p">,</span> <span class="n">HISTORY_BRICKS</span>
                <span class="p">)</span>

                <span class="n">engine</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">get_capsul_engine</span><span class="p">()</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">pipeline</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">get_process_instance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_xml</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="n">pipeline</span> <span class="o">=</span> <span class="kc">None</span>

                <span class="k">if</span> <span class="n">pipeline</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="c1"># handle case of pipeline node alone --&gt; exploded view</span>
                    <span class="c1"># (e.g. a pipeline alone and plug exported)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pipeline</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
                                    <span class="n">pipeline</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">PipelineNode</span>
                                <span class="p">):</span>
                                    <span class="n">pipeline</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">process</span>
                                    <span class="n">full_brick_name</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">unitary_pipeline</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="c1"># handle cases of named pipeline/brick without being a</span>
                    <span class="c1"># single Pipeline node (e.g. a pipeline alone without</span>
                    <span class="c1"># exporting plugs)</span>
                    <span class="k">if</span> <span class="p">(</span>
                        <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">unitary_pipeline</span>
                        <span class="ow">and</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;CustomPipeline&quot;</span>
                    <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                        <span class="nb">len</span><span class="p">(</span><span class="n">full_brick_name</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
                        <span class="ow">and</span> <span class="n">full_brick_name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;main&quot;</span>
                    <span class="p">):</span>
                        <span class="n">full_brick_name</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">unitary_pipeline</span> <span class="o">=</span> <span class="kc">True</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_view</span> <span class="o">=</span> <span class="n">PipelineDeveloperView</span><span class="p">(</span>
                        <span class="n">pipeline</span><span class="p">,</span> <span class="n">allow_open_controller</span><span class="o">=</span><span class="kc">False</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_view</span><span class="o">.</span><span class="n">auto_dot_node_positions</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">splitter</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_view</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_view</span><span class="o">.</span><span class="n">node_clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_selected</span><span class="p">)</span>
                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_view</span><span class="o">.</span><span class="n">process_clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">)(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">node_selected</span>
                    <span class="p">)</span>

                    <span class="n">bricks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_associated_bricks</span><span class="p">(</span><span class="n">full_brick_name</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="k">for</span> <span class="n">bricks_uuids</span> <span class="ow">in</span> <span class="n">bricks</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">bricks_uuids</span><span class="p">)):</span>
                            <span class="k">if</span> <span class="n">bricks_uuids</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">brick_uuid</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">uuid_idx</span> <span class="o">=</span> <span class="n">i</span>
                                <span class="k">break</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">continue</span>
                        <span class="k">break</span>

                    <span class="n">selected_name</span> <span class="o">=</span> <span class="n">full_brick_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">node_selected</span><span class="p">(</span>
                            <span class="n">selected_name</span><span class="p">,</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">selected_name</span><span class="p">]</span>
                        <span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span>
                            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">error in naming association brick</span><span class="se">\\</span><span class="s2">pipeline, &quot;</span>
                            <span class="s2">&quot;cannot select node ...&quot;</span>
                        <span class="p">)</span>
                        <span class="k">pass</span>

        <span class="n">inputs</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">brick_row</span><span class="p">,</span> <span class="n">BRICK_INPUTS</span><span class="p">)</span>
        <span class="n">outputs</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">brick_row</span><span class="p">,</span> <span class="n">BRICK_OUTPUTS</span><span class="p">)</span>
        <span class="n">brick_name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">brick_row</span><span class="p">,</span> <span class="n">BRICK_NAME</span><span class="p">)</span>
        <span class="n">init</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">brick_row</span><span class="p">,</span> <span class="n">BRICK_INIT</span><span class="p">)</span>
        <span class="n">init_time</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">brick_row</span><span class="p">,</span> <span class="n">BRICK_INIT_TIME</span><span class="p">)</span>
        <span class="n">exec</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">brick_row</span><span class="p">,</span> <span class="n">BRICK_INIT</span><span class="p">)</span>
        <span class="n">exec_time</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">brick_row</span><span class="p">,</span> <span class="n">BRICK_INIT_TIME</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_table</span><span class="p">(</span>
            <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">,</span> <span class="n">brick_name</span><span class="p">,</span> <span class="n">init</span><span class="p">,</span> <span class="n">init_time</span><span class="p">,</span> <span class="n">exec</span><span class="p">,</span> <span class="n">exec_time</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">splitter</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="p">)</span>

        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">splitter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

        <span class="n">screen_resolution</span> <span class="o">=</span> <span class="n">QApplication</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">desktop</span><span class="p">()</span><span class="o">.</span><span class="n">screenGeometry</span><span class="p">()</span>
        <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">screen_resolution</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="n">screen_resolution</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="mf">0.6</span> <span class="o">*</span> <span class="n">width</span><span class="p">),</span> <span class="nb">round</span><span class="p">(</span><span class="mf">0.4</span> <span class="o">*</span> <span class="n">height</span><span class="p">))</span></div>

<div class="viewcode-block" id="PopUpShowHistory.io_value_is_scan"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpShowHistory.io_value_is_scan">[docs]</a>    <span class="k">def</span> <span class="nf">io_value_is_scan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if the I/O value is a scan.</span>

<span class="sd">        :param value: I/O value</span>
<span class="sd">        :return: The scan corresponding to the value if it exists,</span>
<span class="sd">          None otherwise</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">value_scan</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">scan</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_documents_names</span><span class="p">(</span>
            <span class="n">COLLECTION_CURRENT</span>
        <span class="p">):</span>
            <span class="k">if</span> <span class="n">scan</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                <span class="n">value_scan</span> <span class="o">=</span> <span class="n">scan</span>

        <span class="k">return</span> <span class="n">value_scan</span></div>

<div class="viewcode-block" id="PopUpShowHistory.file_clicked"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpShowHistory.file_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">file_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when a file is clicked.&quot;&quot;&quot;</span>

        <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sender</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">table_data</span><span class="o">.</span><span class="n">clearSelection</span><span class="p">()</span>
        <span class="n">row_to_select</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">table_data</span><span class="o">.</span><span class="n">get_scan_row</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">table_data</span><span class="o">.</span><span class="n">selectRow</span><span class="p">(</span><span class="n">row_to_select</span><span class="p">)</span>
        <span class="n">item_to_scroll_to</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">table_data</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row_to_select</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">databrowser</span><span class="o">.</span><span class="n">table_data</span><span class="o">.</span><span class="n">scrollToItem</span><span class="p">(</span><span class="n">item_to_scroll_to</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpShowHistory.find_associated_bricks"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpShowHistory.find_associated_bricks">[docs]</a>    <span class="k">def</span> <span class="nf">find_associated_bricks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Blabla&quot;&quot;&quot;</span>

        <span class="n">bricks</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">uuid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">brick_list</span><span class="p">:</span>
            <span class="n">full_brick_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span>
                <span class="n">COLLECTION_BRICK</span><span class="p">,</span> <span class="n">uuid</span><span class="p">,</span> <span class="n">BRICK_NAME</span>
            <span class="p">)</span>
            <span class="n">list_full_brick_name</span> <span class="o">=</span> <span class="n">full_brick_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">unitary_pipeline</span><span class="p">:</span>
                <span class="n">list_full_brick_name</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">list_full_brick_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">node_name</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">full_brick_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bricks</span><span class="p">:</span>
                    <span class="n">bricks</span><span class="p">[</span><span class="n">full_brick_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">uuid</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">bricks</span><span class="p">[</span><span class="n">full_brick_name</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uuid</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bricks</span></div>

<div class="viewcode-block" id="PopUpShowHistory.find_process_from_plug"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpShowHistory.find_process_from_plug">[docs]</a>    <span class="k">def</span> <span class="nf">find_process_from_plug</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plug</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Blabla&quot;&quot;&quot;</span>

        <span class="n">process_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">plug_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">plug</span><span class="o">.</span><span class="n">output</span><span class="p">:</span>
            <span class="n">link_done</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">plug</span><span class="o">.</span><span class="n">links_from</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">link_done</span><span class="p">:</span>
                    <span class="n">link_done</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">process_name</span> <span class="o">+=</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">link</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
                    <span class="n">plug_name</span> <span class="o">=</span> <span class="n">link</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">link</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">PipelineNode</span><span class="p">):</span>
                        <span class="p">(</span>
                            <span class="n">sub_process_name</span><span class="p">,</span>
                            <span class="n">plug_name</span><span class="p">,</span>
                        <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_process_from_plug</span><span class="p">(</span><span class="n">link</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">plugs</span><span class="p">[</span><span class="n">link</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                        <span class="n">process_name</span> <span class="o">+=</span> <span class="n">sub_process_name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">link_done</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">plug</span><span class="o">.</span><span class="n">links_to</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">link_done</span><span class="p">:</span>
                    <span class="n">link_done</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">process_name</span> <span class="o">+=</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">link</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
                    <span class="n">plug_name</span> <span class="o">=</span> <span class="n">link</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">link</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">PipelineNode</span><span class="p">):</span>
                        <span class="p">(</span>
                            <span class="n">sub_process_name</span><span class="p">,</span>
                            <span class="n">plug_name</span><span class="p">,</span>
                        <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_process_from_plug</span><span class="p">(</span><span class="n">link</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">plugs</span><span class="p">[</span><span class="n">link</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                        <span class="n">process_name</span> <span class="o">+=</span> <span class="n">sub_process_name</span>
        <span class="k">return</span> <span class="n">process_name</span><span class="p">,</span> <span class="n">plug_name</span></div>

<div class="viewcode-block" id="PopUpShowHistory.node_selected"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpShowHistory.node_selected">[docs]</a>    <span class="k">def</span> <span class="nf">node_selected</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_name</span><span class="p">,</span> <span class="n">process</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Emit a signal when a node is clicked.</span>

<span class="sd">        :param node_name: node name</span>
<span class="sd">        :param process: process of the corresponding node</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">process</span><span class="p">,</span> <span class="s2">&quot;pipeline_node&quot;</span><span class="p">):</span>
            <span class="n">process</span> <span class="o">=</span> <span class="n">process</span><span class="o">.</span><span class="n">pipeline_node</span>

        <span class="n">bricks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_associated_bricks</span><span class="p">(</span><span class="n">node_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">bricks</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bricks</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">brick_row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_document</span><span class="p">(</span>
                    <span class="n">COLLECTION_BRICK</span><span class="p">,</span>
                    <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">bricks</span><span class="o">.</span><span class="n">values</span><span class="p">()))[</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid_idx</span><span class="p">],</span>
                <span class="p">)</span>
                <span class="n">inputs</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">brick_row</span><span class="p">,</span> <span class="n">BRICK_INPUTS</span><span class="p">)</span>
                <span class="n">outputs</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">brick_row</span><span class="p">,</span> <span class="n">BRICK_OUTPUTS</span><span class="p">)</span>
                <span class="n">brick_name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">brick_row</span><span class="p">,</span> <span class="n">BRICK_NAME</span><span class="p">)</span>
                <span class="n">init</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">brick_row</span><span class="p">,</span> <span class="n">BRICK_INIT</span><span class="p">)</span>
                <span class="n">init_time</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">brick_row</span><span class="p">,</span> <span class="n">BRICK_INIT_TIME</span><span class="p">)</span>
                <span class="n">exec</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">brick_row</span><span class="p">,</span> <span class="n">BRICK_INIT</span><span class="p">)</span>
                <span class="n">exec_time</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">brick_row</span><span class="p">,</span> <span class="n">BRICK_INIT_TIME</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update_table</span><span class="p">(</span>
                    <span class="n">inputs</span><span class="p">,</span>
                    <span class="n">outputs</span><span class="p">,</span>
                    <span class="n">brick_name</span><span class="p">,</span>
                    <span class="n">init</span><span class="p">,</span>
                    <span class="n">init_time</span><span class="p">,</span>
                    <span class="n">exec</span><span class="p">,</span>
                    <span class="n">exec_time</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># subpipeline case</span>
                <span class="n">inputs_dict</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">outputs_dict</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">process</span><span class="p">,</span> <span class="n">PipelineNode</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">plug_name</span><span class="p">,</span> <span class="n">plug</span> <span class="ow">in</span> <span class="n">process</span><span class="o">.</span><span class="n">plugs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">plug</span><span class="o">.</span><span class="n">activated</span><span class="p">:</span>
                            <span class="p">(</span>
                                <span class="n">process_name</span><span class="p">,</span>
                                <span class="n">inner_plug_name</span><span class="p">,</span>
                            <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_process_from_plug</span><span class="p">(</span><span class="n">plug</span><span class="p">)</span>
                            <span class="k">for</span> <span class="n">uuid</span> <span class="ow">in</span> <span class="n">bricks</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                                <span class="n">full_brick_name</span> <span class="o">=</span> <span class="p">(</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span>
                                        <span class="n">COLLECTION_BRICK</span><span class="p">,</span> <span class="n">uuid</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">BRICK_NAME</span>
                                    <span class="p">)</span>
                                <span class="p">)</span>
                                <span class="k">if</span> <span class="n">full_brick_name</span> <span class="o">==</span> <span class="n">node_name</span> <span class="o">+</span> <span class="n">process_name</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">plug</span><span class="o">.</span><span class="n">output</span><span class="p">:</span>
                                        <span class="n">plugs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span>
                                            <span class="n">COLLECTION_BRICK</span><span class="p">,</span>
                                            <span class="n">uuid</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid_idx</span><span class="p">],</span>
                                            <span class="n">BRICK_OUTPUTS</span><span class="p">,</span>
                                        <span class="p">)</span>
                                        <span class="n">outputs_dict</span><span class="p">[</span><span class="n">plug_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">plugs</span><span class="p">[</span>
                                            <span class="n">inner_plug_name</span>
                                        <span class="p">]</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">plugs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span>
                                            <span class="n">COLLECTION_BRICK</span><span class="p">,</span>
                                            <span class="n">uuid</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid_idx</span><span class="p">],</span>
                                            <span class="n">BRICK_INPUTS</span><span class="p">,</span>
                                        <span class="p">)</span>
                                        <span class="n">inputs_dict</span><span class="p">[</span><span class="n">plug_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">plugs</span><span class="p">[</span>
                                            <span class="n">inner_plug_name</span>
                                        <span class="p">]</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">update_table</span><span class="p">(</span><span class="n">inputs_dict</span><span class="p">,</span> <span class="n">outputs_dict</span><span class="p">,</span> <span class="n">node_name</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">gnode</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_view</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">gnodes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="n">node_name</span><span class="p">:</span>
                    <span class="n">gnode</span><span class="o">.</span><span class="n">fonced_viewer</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">gnode</span><span class="o">.</span><span class="n">fonced_viewer</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="PopUpShowHistory.update_table"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpShowHistory.update_table">[docs]</a>    <span class="k">def</span> <span class="nf">update_table</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">inputs</span><span class="p">,</span>
        <span class="n">outputs</span><span class="p">,</span>
        <span class="n">brick_name</span><span class="p">,</span>
        <span class="n">init</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">init_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">exec</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">exec_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Filling the table.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">removeRow</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">nbColumn</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">init</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">nbColumn</span> <span class="o">+=</span> <span class="mi">2</span>
        <span class="k">if</span> <span class="n">exec</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">nbColumn</span> <span class="o">+=</span> <span class="mi">2</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="n">nbColumn</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">outputs</span><span class="p">))</span>

        <span class="c1"># Brick name</span>
        <span class="n">item_idx</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">()</span>
        <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">BRICK_NAME</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setHorizontalHeaderItem</span><span class="p">(</span><span class="n">item_idx</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">()</span>
        <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">brick_name</span><span class="p">)</span>
        <span class="n">item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">^</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">item_idx</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
        <span class="n">item_idx</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Brick init</span>
        <span class="k">if</span> <span class="n">init</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">()</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">BRICK_INIT</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setHorizontalHeaderItem</span><span class="p">(</span><span class="n">item_idx</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">()</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">init</span><span class="p">)</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">^</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">item_idx</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
            <span class="n">item_idx</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="c1"># Brick init time</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">()</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">BRICK_INIT_TIME</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setHorizontalHeaderItem</span><span class="p">(</span><span class="n">item_idx</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">()</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">^</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">init_time</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">init_time</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">item_idx</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
            <span class="n">item_idx</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Brick execution</span>
        <span class="k">if</span> <span class="n">init</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">()</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">BRICK_EXEC</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setHorizontalHeaderItem</span><span class="p">(</span><span class="n">item_idx</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">()</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">exec</span><span class="p">)</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">^</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">item_idx</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
            <span class="n">item_idx</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="c1"># Brick execution time</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">()</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">BRICK_EXEC_TIME</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setHorizontalHeaderItem</span><span class="p">(</span><span class="n">item_idx</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">()</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">^</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">exec_time</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">exec_time</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">item_idx</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
            <span class="n">item_idx</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Inputs</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">inputs</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">()</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setHorizontalHeaderItem</span><span class="p">(</span><span class="n">item_idx</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="c1"># value = str(value).strip(&#39;[]&#39;)</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

            <span class="n">value_scan</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">io_value_is_scan</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value_scan</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
                <span class="n">output_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
                <span class="n">button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="n">value_scan</span><span class="p">)</span>
                <span class="n">button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_clicked</span><span class="p">)</span>
                <span class="n">output_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">output_layout</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">item_idx</span><span class="p">,</span> <span class="n">widget</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">()</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">^</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setTextAlignment</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">item_idx</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
            <span class="n">item_idx</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Outputs</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">outputs</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">()</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setHorizontalHeaderItem</span><span class="p">(</span><span class="n">item_idx</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">outputs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">sub_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
                <span class="n">sub_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">sub_value</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                    <span class="n">value_scan</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">io_value_is_scan</span><span class="p">(</span><span class="n">sub_value</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">value_scan</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="n">value_scan</span><span class="p">)</span>
                        <span class="n">button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_clicked</span><span class="p">)</span>
                        <span class="n">sub_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">sub_value</span><span class="p">))</span>
                        <span class="n">sub_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
                <span class="n">sub_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">sub_layout</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">item_idx</span><span class="p">,</span> <span class="n">sub_widget</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value_scan</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">io_value_is_scan</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">value_scan</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
                    <span class="n">output_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
                    <span class="n">button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="n">value_scan</span><span class="p">)</span>
                    <span class="n">button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_clicked</span><span class="p">)</span>
                    <span class="n">output_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>
                    <span class="n">widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">output_layout</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">item_idx</span><span class="p">,</span> <span class="n">widget</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">()</span>
                    <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
                    <span class="n">item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">^</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">item_idx</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
            <span class="n">item_idx</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">verticalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setMinimumSectionSize</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">resizeColumnsToContents</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">resizeRowsToContents</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="PopUpVisualizedTags"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpVisualizedTags">[docs]</a><span class="k">class</span> <span class="nc">PopUpVisualizedTags</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Is called when the user wants to update the tags that are visualized.</span>

<span class="sd">    .. Methods:</span>
<span class="sd">        - search_str: matches the searched pattern with the tags of the project</span>
<span class="sd">        - click_select_tag: puts the selected tags in the &quot;selected tag&quot; table</span>
<span class="sd">        - click_unselect_tag: removes the unselected tags from populse_mia</span>
<span class="sd">           &quot;selected tag&quot; table</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Signal that will be emitted at the end to tell that the preferences</span>
    <span class="c1"># have been changed</span>
    <span class="n">signal_preferences_change</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>

<div class="viewcode-block" id="PopUpVisualizedTags.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpVisualizedTags.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">,</span> <span class="n">visualized_tags</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        :param project: current project in the software</span>
<span class="sd">        :param visualized_tags: project&#39;s visualized tags before opening</span>
<span class="sd">          this widget</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visualized_tags</span> <span class="o">=</span> <span class="n">visualized_tags</span>

        <span class="n">_translate</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span>

        <span class="c1"># Two buttons to select or unselect tags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_select_tag</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_select_tag</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_select_tag&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_select_tag</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">click_select_tag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_unselect_tag</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_unselect_tag</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;pushButton_unselect_tag&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_unselect_tag</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">click_unselect_tag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_select_tag</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;main_window&quot;</span><span class="p">,</span> <span class="s2">&quot;--&gt;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_button_unselect_tag</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;main_window&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;--&quot;</span><span class="p">))</span>

        <span class="n">vbox_tag_buttons</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">vbox_tag_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_select_tag</span><span class="p">)</span>
        <span class="n">vbox_tag_buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">push_button_unselect_tag</span><span class="p">)</span>

        <span class="c1"># The &quot;Tag list&quot; label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span><span class="o">.</span><span class="n">setTextFormat</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AutoText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;label_tag_list&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
            <span class="n">_translate</span><span class="p">(</span><span class="s2">&quot;main_window&quot;</span><span class="p">,</span> <span class="s2">&quot;Available tags:&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># The search bar to search in the list of tags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;lineEdit_search_bar&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Search&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_str</span><span class="p">)</span>

        <span class="c1"># The list of tags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;listWidget_tags&quot;</span><span class="p">)</span>
        <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span>
                <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">MultiSelection</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="n">hbox_top_left</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hbox_top_left</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_tag_list</span><span class="p">)</span>
        <span class="n">hbox_top_left</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_bar</span><span class="p">)</span>

        <span class="n">vbox_top_left</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">vbox_top_left</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox_top_left</span><span class="p">)</span>
        <span class="n">vbox_top_left</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="p">)</span>

        <span class="c1"># List of the tags selected by the user</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_visualized_tags</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_visualized_tags</span><span class="o">.</span><span class="n">setTextFormat</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AutoText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_visualized_tags</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;label_visualized_tags&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_visualized_tags</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Visualized tags:&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_selected_tags</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_selected_tags</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span>
                <span class="s2">&quot;listWidget_visualized_tags&quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_selected_tags</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span>
                <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">MultiSelection</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="n">v_box_top_right</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">v_box_top_right</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_visualized_tags</span><span class="p">)</span>
        <span class="n">v_box_top_right</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_widget_selected_tags</span><span class="p">)</span>

        <span class="n">hbox_tags</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hbox_tags</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">vbox_top_left</span><span class="p">)</span>
        <span class="n">hbox_tags</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">vbox_tag_buttons</span><span class="p">)</span>
        <span class="n">hbox_tags</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">v_box_top_right</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">hbox_tags</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">left_tags</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># List that will keep track on</span>
        <span class="c1"># the tags on the left (invisible tags)</span>

        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">project</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_fields_names</span><span class="p">(</span><span class="n">COLLECTION_CURRENT</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">tag</span> <span class="o">!=</span> <span class="n">TAG_CHECKSUM</span>
                <span class="ow">and</span> <span class="n">tag</span> <span class="o">!=</span> <span class="n">TAG_FILENAME</span>
                <span class="ow">and</span> <span class="n">tag</span> <span class="o">!=</span> <span class="n">TAG_HISTORY</span>
            <span class="p">):</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">tag</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">visualized_tags</span><span class="p">:</span>
                    <span class="c1"># Tag not visible: left side</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">left_tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Tag visible: right side</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_selected_tags</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">sortItems</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpVisualizedTags.search_str"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpVisualizedTags.search_str">[docs]</a>    <span class="k">def</span> <span class="nf">search_str</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">str_search</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Matches the searched pattern with the tags of the project.</span>

<span class="sd">        :param str_search: string pattern to search</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">return_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">str_search</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">left_tags</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">str_search</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">tag</span><span class="o">.</span><span class="n">upper</span><span class="p">():</span>
                    <span class="n">return_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">left_tags</span><span class="p">:</span>
                <span class="n">return_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>

        <span class="c1"># Selection updated</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">tag_name</span> <span class="ow">in</span> <span class="n">return_list</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">tag_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">sortItems</span><span class="p">()</span></div>

<div class="viewcode-block" id="PopUpVisualizedTags.click_select_tag"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpVisualizedTags.click_select_tag">[docs]</a>    <span class="k">def</span> <span class="nf">click_select_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Puts the selected tags in the &quot;selected tag&quot; table.&quot;&quot;&quot;</span>

        <span class="n">rows</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
            <span class="p">[</span><span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()],</span>
            <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="c1"># assuming the other listWidget is called listWidget_2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">left_tags</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
            <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_selected_tags</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">takeItem</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="PopUpVisualizedTags.click_unselect_tag"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.PopUpVisualizedTags.click_unselect_tag">[docs]</a>    <span class="k">def</span> <span class="nf">click_unselect_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Removes the unselected tags from populse_mia table.&quot;&quot;&quot;</span>

        <span class="n">rows</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_selected_tags</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()</span>
            <span class="p">],</span>
            <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">left_tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_selected_tags</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_selected_tags</span><span class="o">.</span><span class="n">takeItem</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">list_widget_tags</span><span class="o">.</span><span class="n">sortItems</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="QLabel_clickable"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.QLabel_clickable">[docs]</a><span class="k">class</span> <span class="nc">QLabel_clickable</span><span class="p">(</span><span class="n">QLabel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Custom class to click on a QLabel&quot;&quot;&quot;</span>

    <span class="n">clicked</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>

<div class="viewcode-block" id="QLabel_clickable.__init__"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.QLabel_clickable.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">QLabel</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span></div>

<div class="viewcode-block" id="QLabel_clickable.mousePressEvent"><a class="viewcode-back" href="../../../populse_mia.user_interface.html#populse_mia.user_interface.pop_ups.QLabel_clickable.mousePressEvent">[docs]</a>    <span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ev</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Blabla&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span></div></div>
</pre></div>

      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        <a class="uplink" href="../../../index.html">Contents</a>
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, populse.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>